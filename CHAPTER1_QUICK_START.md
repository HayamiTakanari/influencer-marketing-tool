# Chapter 1 å®Ÿè£… - ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆã‚¬ã‚¤ãƒ‰

## ğŸ¯ å®Ÿè£…æ¸ˆã¿æ©Ÿèƒ½

âœ… **ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ API** - å…¨6ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
âœ… **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰** - 5ã‚¹ãƒ†ãƒƒãƒ—ç™»éŒ²ãƒ•ãƒ­ãƒ¼
âœ… **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒ** - æ‹¡å¼µæ¸ˆã¿
âœ… **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£** - ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒãƒƒã‚·ãƒ³ã‚°ã€å…¥åŠ›æ¤œè¨¼ã€ãƒ¬ãƒ¼ãƒˆåˆ¶é™
âœ… **ãƒ†ã‚¹ãƒˆ** - ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ + çµ±åˆãƒ†ã‚¹ãƒˆ

---

## ğŸš€ ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

### 1. ç’°å¢ƒå¤‰æ•°ã®è¨­å®š

```bash
# .env.local ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆ
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASS=your-app-password
AWS_REGION=ap-northeast-1
AWS_S3_BUCKET_NAME=dev-bucket
FRONTEND_URL=http://localhost:3000
```

### 2. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³

```bash
# ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§å®Ÿè¡Œ
cd backend
npx prisma migrate dev --name chapter1_verification
```

### 3. ã‚µãƒ¼ãƒãƒ¼èµ·å‹•

```bash
# ã‚¿ãƒ¼ãƒŸãƒŠãƒ« 1: ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰
cd backend
npm run dev

# ã‚¿ãƒ¼ãƒŸãƒŠãƒ« 2: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
cd frontend
npm run dev
```

### 4. ã‚¢ã‚¯ã‚»ã‚¹

- **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰**: http://localhost:3000
- **ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ API**: http://localhost:5002
- **ç™»éŒ²ãƒšãƒ¼ã‚¸**: http://localhost:3000/chapter1-register

---

## ğŸ“¡ API ãƒ†ã‚¹ãƒˆ

### cURL ã§ãƒ†ã‚¹ãƒˆ

**ä¼æ¥­ç™»éŒ²**:
```bash
curl -X POST http://localhost:5002/api/chapter1/register \
  -H "Content-Type: application/json" \
  -d '{
    "email": "company@example.com",
    "password": "SecurePass123",
    "role": "COMPANY",
    "companyName": "Test Company",
    "legalNumber": "1234567890123"
  }'
```

**ã‚¤ãƒ³ãƒ•ãƒ«ã‚¨ãƒ³ã‚µãƒ¼ç™»éŒ²**:
```bash
curl -X POST http://localhost:5002/api/chapter1/register \
  -H "Content-Type: application/json" \
  -d '{
    "email": "influencer@example.com",
    "password": "SecurePass123",
    "role": "INFLUENCER",
    "displayName": "Test Influencer"
  }'
```

**ãƒ¡ãƒ¼ãƒ«èªè¨¼ç¢ºèª**:
```bash
curl http://localhost:5002/api/chapter1/verify-email?token=<token>
```

---

## ğŸ“ ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ

```
backend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ email-verification.service.ts      â† ãƒ¡ãƒ¼ãƒ«èªè¨¼
â”‚   â”‚   â””â”€â”€ document-verification.service.ts   â† æ›¸é¡èªè¨¼
â”‚   â”œâ”€â”€ controllers/
â”‚   â”‚   â”œâ”€â”€ auth-chapter1.controller.ts        â† èªè¨¼API
â”‚   â”‚   â””â”€â”€ document-verification.controller.ts â† æ›¸é¡API
â”‚   â”œâ”€â”€ routes/
â”‚   â”‚   â””â”€â”€ chapter1-registration.routes.ts    â† ãƒ«ãƒ¼ãƒˆå®šç¾©
â”‚   â””â”€â”€ __tests__/
â”‚       â”œâ”€â”€ email-verification.test.ts
â”‚       â””â”€â”€ chapter1-registration.integration.test.ts
â””â”€â”€ prisma/
    â””â”€â”€ schema.prisma                           â† DBå®šç¾©

frontend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â””â”€â”€ chapter1-register.tsx               â† ç™»éŒ²ãƒšãƒ¼ã‚¸
â”‚   â””â”€â”€ styles/
â”‚       â””â”€â”€ Chapter1Register.module.css         â† ã‚¹ã‚¿ã‚¤ãƒ«
```

---

## ğŸ§ª ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ

```bash
# ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ
npm test -- email-verification.test.ts

# çµ±åˆãƒ†ã‚¹ãƒˆ
npm test -- chapter1-registration.integration.test.ts

# ã™ã¹ã¦ã®ãƒ†ã‚¹ãƒˆ
npm test
```

---

## ğŸ” ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

å®Ÿè£…æ¸ˆã¿:
- âœ… ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒãƒƒã‚·ãƒ³ã‚°ï¼ˆbcryptï¼‰
- âœ… ãƒ¡ãƒ¼ãƒ«èªè¨¼ãƒˆãƒ¼ã‚¯ãƒ³ï¼ˆUUID v4ï¼‰
- âœ… å…¥åŠ›ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
- âœ… XSSå¯¾ç­–
- âœ… ãƒ¬ãƒ¼ãƒˆåˆ¶é™
- âœ… HTTPS/TLSå¯¾å¿œï¼ˆæœ¬ç•ªï¼‰
- âœ… CORSè¨­å®š
- âœ… SQL ã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³å¯¾ç­–ï¼ˆPrismaï¼‰

æœ¬ç•ªç’°å¢ƒã§ã®ç¢ºèªé …ç›®:
- [ ] SMTP èªè¨¼æƒ…å ±ã®ç¢ºèª
- [ ] AWS S3 æ¨©é™è¨­å®š
- [ ] CORS ã‚ªãƒªã‚¸ãƒ³è¨­å®š
- [ ] JWT ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆç¢ºèª
- [ ] ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å¼·åº¦ãƒãƒªã‚·ãƒ¼ç¢ºèª

---

## ğŸ“Š ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ãƒ­ãƒ¼å›³

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ãƒ­ãƒ¼ãƒ«é¸æŠ           â”‚
â”‚ ä¼æ¥­ or ã‚¤ãƒ³ãƒ•ãƒ«    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”
    â”‚          â”‚
â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”  â”Œâ–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ä¼æ¥­ç™»éŒ² â”‚  â”‚ ã‚¤ãƒ³ãƒ•ãƒ«ç™»éŒ²â”‚
â””â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚        â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”˜
         â”‚
    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ ã‚¢ã‚«ã‚¦ãƒ³ãƒˆæƒ…å ± â”‚
    â”‚ ãƒ¡ãƒ¼ãƒ«/PWç­‰   â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ ãƒ¡ãƒ¼ãƒ«èªè¨¼    â”‚
    â”‚ ãƒªãƒ³ã‚¯ç¢ºèª    â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ æ›¸é¡ã‚¢ãƒƒãƒ—    â”‚
    â”‚ ç™»è¨˜ç°¿ or èº«åˆ†â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ ç®¡ç†è€…å¯©æŸ»    â”‚
    â”‚ 1-3å–¶æ¥­æ—¥    â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ èªè¨¼å®Œäº†!      â”‚
    â”‚ ãƒ—ãƒ©ãƒƒãƒˆåˆ©ç”¨å¯â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ’¾ ã‚ˆãä½¿ã†ã‚³ãƒãƒ³ãƒ‰

```bash
# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹çŠ¶æ…‹ç¢ºèª
npx prisma db push

# Prisma ã‚¹ã‚¿ã‚¸ã‚ªã§ UI ç¢ºèª
npx prisma studio

# ç‰¹å®šã®ãƒ¦ãƒ¼ã‚¶ãƒ¼å‰Šé™¤ï¼ˆãƒ†ã‚¹ãƒˆç”¨ï¼‰
npx prisma db execute --stdin

# ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å±¥æ­´ç¢ºèª
npx prisma migrate status

# ãƒ›ãƒƒãƒˆãƒªãƒ­ãƒ¼ãƒ‰é–‹ç™º
npm run dev
```

---

## ğŸ› ãƒ‡ãƒãƒƒã‚°

### ãƒ­ã‚°ç¢ºèª

```bash
# ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ ãƒ­ã‚°
tail -f backend/logs/app.log

# ç‰¹å®šã®ã‚¨ãƒ©ãƒ¼ã‚’æ¤œç´¢
grep -i "error" backend/logs/app.log
```

### Prisma ãƒ‡ãƒãƒƒã‚°

```bash
# Prisma ãƒ­ã‚°æœ‰åŠ¹åŒ–
DEBUG=prisma:* npm run dev
```

### ãƒ–ãƒ©ã‚¦ã‚¶ DevTools

- F12 ã§ã‚³ãƒ³ã‚½ãƒ¼ãƒ«é–‹ã
- Network ã‚¿ãƒ–ã§ API ãƒªã‚¯ã‚¨ã‚¹ãƒˆç¢ºèª
- Storage ã‚¿ãƒ–ã§ localStorage ç¢ºèª

---

## ğŸ“± ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼

```
User Input
    â†“
Form Validation (React)
    â†“
API Request (/api/chapter1/...)
    â†“
Backend Processing
    â†“
Database Operation
    â†“
API Response
    â†“
UI Update
    â†“
Next Step
```

---

## ğŸ”„ ã‚ªãƒ³ãƒœãƒ¼ãƒ‡ã‚£ãƒ³ã‚° ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

æ–°ã—ã„é–‹ç™ºè€…å‘ã‘:

1. [ ] ãƒªãƒã‚¸ãƒˆãƒªã‚’ã‚¯ãƒ­ãƒ¼ãƒ³
2. [ ] ç’°å¢ƒå¤‰æ•°ã‚’ .env.local ã«è¨­å®š
3. [ ] `npm install` ã‚’å®Ÿè¡Œ
4. [ ] `npx prisma migrate dev` ã§DBåˆæœŸåŒ–
5. [ ] `npm run dev` ã§é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•
6. [ ] http://localhost:3000/chapter1-register ã§ç™»éŒ²ãƒ†ã‚¹ãƒˆ
7. [ ] ãƒ–ãƒ©ã‚¦ã‚¶ DevTools ã§ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚’ç¢ºèª
8. [ ] ãƒ†ã‚¹ãƒˆã‚¹ã‚¤ãƒ¼ãƒˆå®Ÿè¡Œ: `npm test`
9. [ ] å®Ÿè£…ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç†Ÿèª­
10. [ ] ãƒãƒ¼ãƒ å†…ã§ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼

---

## ğŸ“ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ãƒ¡ãƒ¼ãƒ«èªè¨¼ãƒ¡ãƒ¼ãƒ«ãŒå±Šã‹ãªã„

**ç¢ºèªäº‹é …**:
1. SMTP èªè¨¼æƒ…å ±ãŒæ­£ã—ã„
2. Gmail ã®å ´åˆã¯ã€Œã‚¢ãƒ—ãƒªãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã€ã‚’ä½¿ç”¨
3. SPF/DKIM/DMARC ãƒ¬ã‚³ãƒ¼ãƒ‰è¨­å®š
4. è¿·æƒ‘ãƒ¡ãƒ¼ãƒ«ãƒ•ã‚©ãƒ«ãƒ€ã‚’ç¢ºèª

### S3 ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã‚¨ãƒ©ãƒ¼

**ç¢ºèªäº‹é …**:
1. AWS Access Key/Secret Key ãŒæ­£ã—ã„
2. IAM ãƒãƒªã‚·ãƒ¼ã§ S3:PutObject æ¨©é™ã‚ã‚Š
3. ãƒã‚±ãƒƒãƒˆåãŒæ­£ã—ã„
4. ãƒªãƒ¼ã‚¸ãƒ§ãƒ³è¨­å®šãŒä¸€è‡´

### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šã‚¨ãƒ©ãƒ¼

**ç¢ºèªäº‹é …**:
1. DATABASE_URL ãŒæ­£ã—ã„
2. ãƒ•ã‚¡ã‚¤ã‚¢ã‚¦ã‚©ãƒ¼ãƒ«è¨­å®š
3. Prisma ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå†ç”Ÿæˆ: `npx prisma generate`
4. ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œ: `npx prisma migrate dev`

---

## ğŸ“š å‚è€ƒãƒªãƒ³ã‚¯

- **Prisma ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**: https://www.prisma.io/docs/
- **JWT**: https://jwt.io/
- **AWS S3**: https://docs.aws.amazon.com/s3/
- **Nodemailer**: https://nodemailer.com/
- **Zod ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³**: https://zod.dev/

---

**æœ€çµ‚æ›´æ–°**: 2025-11-30
**å¯¾å¿œãƒãƒ¼ã‚¸ãƒ§ãƒ³**: Node.js 18+, npm 9+
