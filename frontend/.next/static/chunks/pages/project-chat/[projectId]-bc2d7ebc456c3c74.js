(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8250],{541:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/project-chat/[projectId]",function(){return s(1104)}])},1104:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return w}});var l=s(5893),a=s(7294),r=s(8083),i=s(5364),n=s(6681),o=s(8868),c=s(240),d=s(3243),x=s(6014);class m extends a.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=t.offsetParent,s=(0,d.R)(e)&&e.offsetWidth||0,l=this.props.sizeRef.current;l.height=t.offsetHeight||0,l.width=t.offsetWidth||0,l.top=t.offsetTop,l.left=t.offsetLeft,l.right=s-l.width-l.left}return null}componentDidUpdate(){}render(){return this.props.children}}function u({children:e,isPresent:t,anchorX:s,root:r}){let i=(0,a.useId)(),n=(0,a.useRef)(null),o=(0,a.useRef)({width:0,height:0,top:0,left:0,right:0}),{nonce:c}=(0,a.useContext)(x._);return(0,a.useInsertionEffect)(()=>{let{width:e,height:l,top:a,left:d,right:x}=o.current;if(t||!n.current||!e||!l)return;let m="left"===s?`left: ${d}`:`right: ${x}`;n.current.dataset.motionPopId=i;let u=document.createElement("style");c&&(u.nonce=c);let p=r??document.head;return p.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${e}px !important;
            height: ${l}px !important;
            ${m}px !important;
            top: ${a}px !important;
          }
        `),()=>{p.removeChild(u),p.contains(u)&&p.removeChild(u)}},[t]),(0,l.jsx)(m,{isPresent:t,childRef:n,sizeRef:o,children:a.cloneElement(e,{ref:n})})}let p=({children:e,initial:t,isPresent:s,onExitComplete:r,custom:i,presenceAffectsLayout:o,mode:d,anchorX:x,root:m})=>{let p=(0,n.h)(h),f=(0,a.useId)(),g=!0,y=(0,a.useMemo)(()=>(g=!1,{id:f,initial:t,isPresent:s,custom:i,onExitComplete:e=>{for(let t of(p.set(e,!0),p.values()))if(!t)return;r&&r()},register:e=>(p.set(e,!1),()=>p.delete(e))}),[s,p,r]);return o&&g&&(y={...y}),(0,a.useMemo)(()=>{p.forEach((e,t)=>p.set(t,!1))},[s]),a.useEffect(()=>{s||p.size||!r||r()},[s]),"popLayout"===d&&(e=(0,l.jsx)(u,{isPresent:s,anchorX:x,root:m,children:e})),(0,l.jsx)(c.O.Provider,{value:y,children:e})};function h(){return new Map}var f=s(5947);let g=e=>e.key||"";function y(e){let t=[];return a.Children.forEach(e,e=>{(0,a.isValidElement)(e)&&t.push(e)}),t}let b=({children:e,custom:t,initial:s=!0,onExitComplete:r,presenceAffectsLayout:c=!0,mode:d="sync",propagate:x=!1,anchorX:m="left",root:u})=>{let[h,b]=(0,f.oO)(x),j=(0,a.useMemo)(()=>y(e),[e]),N=x&&!h?[]:j.map(g),v=(0,a.useRef)(!0),w=(0,a.useRef)(j),C=(0,n.h)(()=>new Map),[k,D]=(0,a.useState)(j),[E,S]=(0,a.useState)(j);(0,o.L)(()=>{v.current=!1,w.current=j;for(let e=0;e<E.length;e++){let t=g(E[e]);N.includes(t)?C.delete(t):!0!==C.get(t)&&C.set(t,!1)}},[E,N.length,N.join("-")]);let I=[];if(j!==k){let e=[...j];for(let t=0;t<E.length;t++){let s=E[t],l=g(s);N.includes(l)||(e.splice(t,0,s),I.push(s))}return"wait"===d&&I.length&&(e=I),S(y(e)),D(j),null}let{forceRender:L}=(0,a.useContext)(i.p);return(0,l.jsx)(l.Fragment,{children:E.map(e=>{let a=g(e),i=(!x||!!h)&&(j===E||N.includes(a));return(0,l.jsx)(p,{isPresent:i,initial:(!v.current||!!s)&&void 0,custom:t,presenceAffectsLayout:c,mode:d,root:u,onExitComplete:i?void 0:()=>{if(!C.has(a))return;C.set(a,!0);let e=!0;C.forEach(t=>{t||(e=!1)}),e&&(L?.(),S(w.current),x&&b?.(),r&&r())},anchorX:m,children:e},a)})})};var j=s(1163),N=s(1664),v=s.n(N),w=()=>{let[e,t]=(0,a.useState)(null),[s,i]=(0,a.useState)(null),[n,o]=(0,a.useState)([]),[c,d]=(0,a.useState)(""),[x,m]=(0,a.useState)(!0),[u,p]=(0,a.useState)(""),[h,f]=(0,a.useState)(!1),[g,y]=(0,a.useState)("format"),[N,w]=(0,a.useState)([]),[C,k]=(0,a.useState)(!1),[D,E]=(0,a.useState)([]),[S,I]=(0,a.useState)(""),L=(0,a.useRef)(null),T=(0,j.useRouter)(),{projectId:R}=T.query,[P,M]=(0,a.useState)({title:"",concept:"",structure:"",deliverables:"",timeline:""});(0,a.useEffect)(()=>{{let e=localStorage.getItem("user"),s=localStorage.getItem("token");if(!e||!s){T.push("/login");return}t(JSON.parse(e)),R&&(z(),A())}},[T,R]);let z=async()=>{try{m(!0),i({id:R,title:"美容コスメ PR キャンペーン",status:"IN_PROGRESS",client:{id:"client-1",displayName:"田中太郎",companyName:"株式会社ビューティコスメ"},matchedInfluencer:{id:"influencer-1",displayName:"美容系インフルエンサー 田中美咲"}})}catch(e){console.error("Error fetching project:",e),p("プロジェクト情報の取得に失敗しました。")}finally{m(!1)}},A=async()=>{try{o([{id:"1",content:"こんにちは！このプロジェクトでよろしくお願いします。",createdAt:"2024-01-15T10:00:00Z",senderId:"client-1",messageType:"text",sender:{id:"client-1",role:"CLIENT",displayName:"田中太郎（株式会社ビューティコスメ）"}},{id:"2",content:"こちらこそよろしくお願いします！さっそく構成案を作成させていただきます。",createdAt:"2024-01-15T10:30:00Z",senderId:"influencer-1",messageType:"text",sender:{id:"influencer-1",role:"INFLUENCER",displayName:"田中美咲"}}])}catch(e){console.error("Error fetching messages:",e)}},_=()=>{var e;null===(e=L.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})};(0,a.useEffect)(()=>{_()},[n]);let O=async()=>{if(!c.trim()||!e||!s)return;let t={id:Date.now().toString(),content:c,createdAt:new Date().toISOString(),senderId:e.id,messageType:"text",sender:{id:e.id,role:e.role,displayName:"CLIENT"===e.role?s.client.displayName:s.matchedInfluencer.displayName}};o(e=>[...e,t]),d("")},U=async()=>{if(e&&s){if("format"===g){if(!P.title||!P.concept||!P.structure){alert("必須項目を入力してください。");return}let t={id:Date.now().toString(),content:"構成案を提出しました",createdAt:new Date().toISOString(),senderId:e.id,messageType:"proposal",sender:{id:e.id,role:e.role,displayName:"CLIENT"===e.role?s.client.displayName:s.matchedInfluencer.displayName},proposalData:{id:Date.now().toString(),...P,status:"submitted"}};o(e=>[...e,t]),M({title:"",concept:"",structure:"",deliverables:"",timeline:""})}else{if(0===N.length){alert("アップロードするファイルを選択してください。");return}let t={id:Date.now().toString(),content:"ファイルを送信しました",createdAt:new Date().toISOString(),senderId:e.id,messageType:"file",sender:{id:e.id,role:e.role,displayName:"CLIENT"===e.role?s.client.displayName:s.matchedInfluencer.displayName},attachments:N.map((e,t)=>({id:"".concat(Date.now(),"-").concat(t),fileName:e.name,fileType:e.type,fileUrl:URL.createObjectURL(e),fileSize:e.size}))};o(e=>[...e,t]),w([])}f(!1)}},B=async()=>{if(!e||!s)return;if(0===D.length){alert("アップロードする動画ファイルを選択してください。");return}let t={id:Date.now().toString(),content:S||"動画を提出しました",createdAt:new Date().toISOString(),senderId:e.id,messageType:"video",sender:{id:e.id,role:e.role,displayName:"CLIENT"===e.role?s.client.displayName:s.matchedInfluencer.displayName},attachments:D.map((e,t)=>({id:"".concat(Date.now(),"-").concat(t),fileName:e.name,fileType:e.type,fileUrl:URL.createObjectURL(e),fileSize:e.size}))};o(e=>[...e,t]),E([]),I(""),k(!1)},F=e=>{if(0===e)return"0 Bytes";let t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]},W=e=>new Date(e).toLocaleString("ja-JP",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return x?(0,l.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 flex items-center justify-center",children:(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,l.jsx)("p",{className:"text-gray-600",children:"プロジェクトを読み込み中..."})]})}):(0,l.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50",children:[(0,l.jsx)("div",{className:"bg-white/80 backdrop-blur-xl border-b border-gray-200 sticky top-0 z-10",children:(0,l.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-4 flex items-center justify-between",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,l.jsxs)(v(),{href:"/projects",className:"flex items-center space-x-2 px-4 py-2 bg-white/80 backdrop-blur-xl rounded-xl shadow-lg hover:shadow-xl transition-all text-gray-700 hover:text-blue-600",children:[(0,l.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),(0,l.jsx)("span",{className:"font-medium",children:"プロジェクトに戻る"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"プロジェクトチャット"}),(0,l.jsx)("p",{className:"text-sm text-gray-600",children:null==s?void 0:s.title})]})]}),(0,l.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,l.jsx)("span",{className:"text-gray-700",children:null==e?void 0:e.email}),(0,l.jsx)(v(),{href:"/dashboard",className:"px-4 py-2 text-gray-600 hover:text-blue-600 transition-colors",children:"ダッシュボード"})]})]})}),(0,l.jsxs)("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[u&&(0,l.jsx)(r.E.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-xl mb-6",children:u}),s&&(0,l.jsx)(r.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},className:"bg-white/80 backdrop-blur-xl border border-gray-200 rounded-3xl p-6 shadow-xl mb-6",children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:s.title}),(0,l.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[(0,l.jsxs)("span",{children:["企業: ",s.client.companyName]}),(0,l.jsx)("span",{children:"•"}),(0,l.jsxs)("span",{children:["インフルエンサー: ",s.matchedInfluencer.displayName]})]})]}),(0,l.jsx)("div",{className:"flex space-x-2",children:(null==e?void 0:e.role)==="INFLUENCER"&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("button",{onClick:()=>f(!0),className:"px-4 py-2 bg-blue-500 text-white rounded-xl font-semibold hover:bg-blue-600 transition-colors",children:"\uD83D\uDCDD 構成案提出"}),(0,l.jsx)("button",{onClick:()=>k(!0),className:"px-4 py-2 bg-green-500 text-white rounded-xl font-semibold hover:bg-green-600 transition-colors",children:"\uD83C\uDFAC 動画提出"})]})})]})}),(0,l.jsxs)(r.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.1},className:"bg-white/80 backdrop-blur-xl border border-gray-200 rounded-3xl shadow-xl overflow-hidden",children:[(0,l.jsxs)("div",{className:"h-96 overflow-y-auto p-6 space-y-4",children:[n.map(t=>(0,l.jsx)(r.E.div,{initial:{opacity:0,x:t.senderId===(null==e?void 0:e.id)?20:-20},animate:{opacity:1,x:0},className:"flex ".concat(t.senderId===(null==e?void 0:e.id)?"justify-end":"justify-start"),children:(0,l.jsxs)("div",{className:"max-w-xs lg:max-w-md px-4 py-3 rounded-2xl ".concat(t.senderId===(null==e?void 0:e.id)?"bg-blue-500 text-white":"bg-gray-100 text-gray-900"),children:[(0,l.jsx)("div",{className:"text-xs mb-1 opacity-75",children:t.sender.displayName}),"text"===t.messageType&&(0,l.jsx)("p",{className:"text-sm",children:t.content}),"proposal"===t.messageType&&t.proposalData&&(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)("p",{className:"text-sm font-semibold",children:["\uD83D\uDCDD ",t.content]}),(0,l.jsxs)("div",{className:"text-xs space-y-1 bg-black/10 rounded p-2",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("strong",{children:"タイトル:"})," ",t.proposalData.title]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("strong",{children:"コンセプト:"})," ",t.proposalData.concept]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("strong",{children:"構成:"})," ",t.proposalData.structure]})]})]}),"file"===t.messageType&&t.attachments&&(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)("p",{className:"text-sm font-semibold",children:["\uD83D\uDCCE ",t.content]}),t.attachments.map(e=>(0,l.jsxs)("div",{className:"text-xs bg-black/10 rounded p-2",children:[(0,l.jsx)("div",{className:"font-medium",children:e.fileName}),(0,l.jsx)("div",{className:"opacity-75",children:F(e.fileSize)})]},e.id))]}),"video"===t.messageType&&t.attachments&&(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)("p",{className:"text-sm font-semibold",children:["\uD83C\uDFAC ",t.content]}),t.attachments.map(e=>(0,l.jsx)("div",{className:"text-xs bg-black/10 rounded p-2",children:e.fileType.startsWith("video/")?(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("video",{controls:!0,className:"w-full max-w-xs rounded",src:e.fileUrl,children:"お使いのブラウザは動画再生に対応していません。"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"font-medium",children:e.fileName}),(0,l.jsx)("div",{className:"opacity-75",children:F(e.fileSize)})]})]}):(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"font-medium",children:e.fileName}),(0,l.jsx)("div",{className:"opacity-75",children:F(e.fileSize)})]})},e.id))]}),(0,l.jsx)("div",{className:"text-xs mt-2 opacity-75",children:W(t.createdAt)})]})},t.id)),(0,l.jsx)("div",{ref:L})]}),(0,l.jsx)("div",{className:"border-t border-gray-200 p-4",children:(0,l.jsxs)("div",{className:"flex space-x-2",children:[(0,l.jsx)("input",{type:"text",value:c,onChange:e=>d(e.target.value),onKeyPress:e=>"Enter"===e.key&&O(),placeholder:"メッセージを入力...",className:"flex-1 px-4 py-2 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,l.jsx)("button",{onClick:O,disabled:!c.trim(),className:"px-6 py-2 bg-blue-500 text-white rounded-xl font-semibold hover:bg-blue-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"送信"})]})})]})]}),(0,l.jsx)(b,{children:h&&(0,l.jsx)(r.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:(0,l.jsxs)(r.E.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-2xl p-6 w-full max-w-2xl max-h-[80vh] overflow-y-auto",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,l.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:"構成案提出"}),(0,l.jsx)("button",{onClick:()=>f(!1),className:"text-gray-500 hover:text-gray-700",children:(0,l.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,l.jsxs)("div",{className:"mb-6",children:[(0,l.jsx)("p",{className:"text-sm font-medium text-gray-700 mb-3",children:"提出方法を選択してください"}),(0,l.jsxs)("div",{className:"flex space-x-4",children:[(0,l.jsx)("button",{onClick:()=>y("format"),className:"px-4 py-2 rounded-xl font-semibold transition-all ".concat("format"===g?"bg-blue-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"\uD83D\uDCCB 指定フォーマット"}),(0,l.jsx)("button",{onClick:()=>y("upload"),className:"px-4 py-2 rounded-xl font-semibold transition-all ".concat("upload"===g?"bg-blue-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"\uD83D\uDCCE ファイルアップロード"})]})]}),"format"===g?(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"構成案タイトル *"}),(0,l.jsx)("input",{type:"text",value:P.title,onChange:e=>M({...P,title:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"例: 新商品PR動画構成案"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"コンセプト *"}),(0,l.jsx)("textarea",{value:P.concept,onChange:e=>M({...P,concept:e.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"動画のコンセプトや狙いを記載してください"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"構成・シナリオ *"}),(0,l.jsx)("textarea",{value:P.structure,onChange:e=>M({...P,structure:e.target.value}),rows:5,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"動画の構成やシナリオを時系列で記載してください"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"成果物"}),(0,l.jsx)("textarea",{value:P.deliverables,onChange:e=>M({...P,deliverables:e.target.value}),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"提供する動画の仕様や追加成果物"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"スケジュール"}),(0,l.jsx)("textarea",{value:P.timeline,onChange:e=>M({...P,timeline:e.target.value}),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"制作スケジュールを記載してください"})]})]}):(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ファイルを選択"}),(0,l.jsx)("input",{type:"file",onChange:e=>{let t=e.target.files;t&&w(Array.from(t))},multiple:!0,accept:".doc,.docx,.pdf,.ppt,.pptx",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,l.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"対応ファイル: Word(.doc, .docx), PDF, PowerPoint(.ppt, .pptx)"})]}),N.length>0&&(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"選択されたファイル:"}),N.map((e,t)=>(0,l.jsxs)("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded-lg",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"text-sm font-medium",children:e.name}),(0,l.jsx)("div",{className:"text-xs text-gray-500",children:F(e.size)})]}),(0,l.jsx)("button",{onClick:()=>w(e=>e.filter((e,s)=>s!==t)),className:"text-red-500 hover:text-red-700",children:"削除"})]},t))]})]}),(0,l.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,l.jsx)("button",{onClick:()=>f(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"キャンセル"}),(0,l.jsx)("button",{onClick:U,className:"px-6 py-2 bg-blue-500 text-white rounded-xl font-semibold hover:bg-blue-600 transition-colors",children:"提出する"})]})]})})}),(0,l.jsx)(b,{children:C&&(0,l.jsx)(r.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:(0,l.jsxs)(r.E.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-2xl p-6 w-full max-w-xl max-h-[80vh] overflow-y-auto",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,l.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:"動画提出"}),(0,l.jsx)("button",{onClick:()=>k(!1),className:"text-gray-500 hover:text-gray-700",children:(0,l.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"動画ファイルを選択 *"}),(0,l.jsx)("input",{type:"file",onChange:e=>{let t=e.target.files;t&&E(Array.from(t))},multiple:!0,accept:"video/*",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"}),(0,l.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"対応ファイル: MP4, MOV, AVI, WMV など"})]}),D.length>0&&(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"選択された動画:"}),D.map((e,t)=>(0,l.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,l.jsx)("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center",children:"\uD83C\uDFAC"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"text-sm font-medium",children:e.name}),(0,l.jsx)("div",{className:"text-xs text-gray-500",children:F(e.size)})]})]}),(0,l.jsx)("button",{onClick:()=>E(e=>e.filter((e,s)=>s!==t)),className:"text-red-500 hover:text-red-700",children:"削除"})]},t))]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"コメント"}),(0,l.jsx)("textarea",{value:S,onChange:e=>I(e.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"動画についてのコメントや説明があれば記載してください"})]})]}),(0,l.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,l.jsx)("button",{onClick:()=>k(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"キャンセル"}),(0,l.jsx)("button",{onClick:B,className:"px-6 py-2 bg-green-500 text-white rounded-xl font-semibold hover:bg-green-600 transition-colors",children:"提出する"})]})]})})})]})}},1163:function(e,t,s){e.exports=s(3079)}},function(e){e.O(0,[8083,1664,2888,9774,179],function(){return e(e.s=541)}),_N_E=e.O()}]);