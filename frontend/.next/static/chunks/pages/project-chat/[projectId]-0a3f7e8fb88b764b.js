(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8250],{541:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/project-chat/[projectId]",function(){return t(1104)}])},1104:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return D}});var a=t(5893),i=t(7294),l=t(8083),r=t(5364),n=t(6681),d=t(8868),o=t(240),c=t(3243),x=t(6014);class m extends i.Component{getSnapshotBeforeUpdate(e){let s=this.props.childRef.current;if(s&&e.isPresent&&!this.props.isPresent){let e=s.offsetParent,t=(0,c.R)(e)&&e.offsetWidth||0,a=this.props.sizeRef.current;a.height=s.offsetHeight||0,a.width=s.offsetWidth||0,a.top=s.offsetTop,a.left=s.offsetLeft,a.right=t-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function u({children:e,isPresent:s,anchorX:t,root:l}){let r=(0,i.useId)(),n=(0,i.useRef)(null),d=(0,i.useRef)({width:0,height:0,top:0,left:0,right:0}),{nonce:o}=(0,i.useContext)(x._);return(0,i.useInsertionEffect)(()=>{let{width:e,height:a,top:i,left:c,right:x}=d.current;if(s||!n.current||!e||!a)return;let m="left"===t?`left: ${c}`:`right: ${x}`;n.current.dataset.motionPopId=r;let u=document.createElement("style");o&&(u.nonce=o);let g=l??document.head;return g.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${e}px !important;
            height: ${a}px !important;
            ${m}px !important;
            top: ${i}px !important;
          }
        `),()=>{g.removeChild(u),g.contains(u)&&g.removeChild(u)}},[s]),(0,a.jsx)(m,{isPresent:s,childRef:n,sizeRef:d,children:i.cloneElement(e,{ref:n})})}let g=({children:e,initial:s,isPresent:t,onExitComplete:l,custom:r,presenceAffectsLayout:d,mode:c,anchorX:x,root:m})=>{let g=(0,n.h)(p),h=(0,i.useId)(),b=!0,v=(0,i.useMemo)(()=>(b=!1,{id:h,initial:s,isPresent:t,custom:r,onExitComplete:e=>{for(let s of(g.set(e,!0),g.values()))if(!s)return;l&&l()},register:e=>(g.set(e,!1),()=>g.delete(e))}),[t,g,l]);return d&&b&&(v={...v}),(0,i.useMemo)(()=>{g.forEach((e,s)=>g.set(s,!1))},[t]),i.useEffect(()=>{t||g.size||!l||l()},[t]),"popLayout"===c&&(e=(0,a.jsx)(u,{isPresent:t,anchorX:x,root:m,children:e})),(0,a.jsx)(o.O.Provider,{value:v,children:e})};function p(){return new Map}var h=t(5947);let b=e=>e.key||"";function v(e){let s=[];return i.Children.forEach(e,e=>{(0,i.isValidElement)(e)&&s.push(e)}),s}let y=({children:e,custom:s,initial:t=!0,onExitComplete:l,presenceAffectsLayout:o=!0,mode:c="sync",propagate:x=!1,anchorX:m="left",root:u})=>{let[p,y]=(0,h.oO)(x),j=(0,i.useMemo)(()=>v(e),[e]),f=x&&!p?[]:j.map(b),N=(0,i.useRef)(!0),D=(0,i.useRef)(j),w=(0,n.h)(()=>new Map),[C,k]=(0,i.useState)(j),[S,A]=(0,i.useState)(j);(0,d.L)(()=>{N.current=!1,D.current=j;for(let e=0;e<S.length;e++){let s=b(S[e]);f.includes(s)?w.delete(s):!0!==w.get(s)&&w.set(s,!1)}},[S,f.length,f.join("-")]);let T=[];if(j!==C){let e=[...j];for(let s=0;s<S.length;s++){let t=S[s],a=b(t);f.includes(a)||(e.splice(s,0,t),T.push(t))}return"wait"===c&&T.length&&(e=T),A(v(e)),k(j),null}let{forceRender:R}=(0,i.useContext)(r.p);return(0,a.jsx)(a.Fragment,{children:S.map(e=>{let i=b(e),r=(!x||!!p)&&(j===S||f.includes(i));return(0,a.jsx)(g,{isPresent:r,initial:(!N.current||!!t)&&void 0,custom:s,presenceAffectsLayout:o,mode:c,root:u,onExitComplete:r?void 0:()=>{if(!w.has(i))return;w.set(i,!0);let e=!0;w.forEach(s=>{s||(e=!1)}),e&&(R?.(),A(D.current),x&&y?.(),l&&l())},anchorX:m,children:e},i)})})};var j=t(1163),f=t(1664),N=t.n(f),D=()=>{var e,s,t,r,n,d,o;let[c,x]=(0,i.useState)(null),[m,u]=(0,i.useState)(null),[g,p]=(0,i.useState)([]),[h,b]=(0,i.useState)(""),[v,f]=(0,i.useState)(!0),[D,w]=(0,i.useState)(""),[C,k]=(0,i.useState)(!1),[S,A]=(0,i.useState)("format"),[T,R]=(0,i.useState)([]),[I,_]=(0,i.useState)(!1),[E,M]=(0,i.useState)([]),[L,F]=(0,i.useState)(""),[z,B]=(0,i.useState)(null),[P,O]=(0,i.useState)(""),[U,W]=(0,i.useState)(!1),[V,Z]=(0,i.useState)("initial"),[$,X]=(0,i.useState)("original"),[J,q]=(0,i.useState)([]),[K,G]=(0,i.useState)({title:"",scenes:[{id:"1",sceneNumber:1,description:"",duration:30,cameraAngle:"フロント",notes:""}],targetDuration:60,overallTheme:"",keyMessages:[""]}),[H,Q]=(0,i.useState)(""),[Y,ee]=(0,i.useState)(!1),[es,et]=(0,i.useState)("initial"),[ea,ei]=(0,i.useState)([]),[el,er]=(0,i.useState)(""),[en,ed]=(0,i.useState)(!1),[eo,ec]=(0,i.useState)(null),[ex,em]=(0,i.useState)({overallFeedback:"",sceneRevisions:[],keyMessageRevisions:[],themeRevision:null,durationRevision:null}),[eu,eg]=(0,i.useState)(!1),[ep,eh]=(0,i.useState)("all"),[eb,ev]=(0,i.useState)(null),ey=(0,i.useRef)(null),ej=(0,j.useRouter)(),{projectId:ef}=ej.query,[eN,eD]=(0,i.useState)({title:"",concept:"",structure:"",deliverables:"",timeline:""});(0,i.useEffect)(()=>{{let e=localStorage.getItem("user"),s=localStorage.getItem("token");if(!e||!s){ej.push("/login");return}x(JSON.parse(e)),ef&&(ew(),eC())}},[ej,ef]);let ew=async()=>{try{f(!0),u({id:ef,title:"美容コスメ PR キャンペーン",status:"IN_PROGRESS",client:{id:"client-1",displayName:"田中太郎",companyName:"株式会社ビューティコスメ"},matchedInfluencer:{id:"influencer-1",displayName:"美容系インフルエンサー 田中美咲"},progress:{currentPhase:"コンテ修正",overallProgress:47,milestones:[{id:"1",title:"正式依頼",status:"completed",completedAt:"2024-01-15T09:00:00Z"},{id:"2",title:"商品受領",status:"completed",completedAt:"2024-01-16T14:00:00Z"},{id:"3",title:"初稿コンテ作成",status:"completed",completedAt:"2024-01-18T10:30:00Z"},{id:"4",title:"初稿コンテ提出",status:"completed",completedAt:"2024-01-18T16:30:00Z"},{id:"5",title:"初稿コンテ戻し",status:"completed",completedAt:"2024-01-20T11:15:00Z"},{id:"6",title:"コンテ修正",status:"in_progress",dueDate:"2024-01-25T23:59:59Z",dueDateStatus:"agreed"},{id:"7",title:"修正稿コンテFIX",status:"pending",dueDate:"2024-01-26T17:00:00Z",dueDateStatus:"agreed"},{id:"8",title:"撮影",status:"pending",dueDate:"2024-01-30T18:00:00Z",dueDateStatus:"agreed"},{id:"9",title:"初稿動画提出",status:"pending",proposedDueDate:"2024-02-02T23:59:59Z",proposedBy:"influencer",dueDateStatus:"proposed_by_influencer"},{id:"10",title:"初稿動画戻し",status:"pending",dueDateStatus:"not_set"},{id:"11",title:"動画修正",status:"pending",proposedDueDate:"2024-02-08T23:59:59Z",proposedBy:"client",dueDateStatus:"proposed_by_client"},{id:"12",title:"動画データ提出",status:"pending",dueDateStatus:"not_set"},{id:"13",title:"動画FIX",status:"pending",dueDateStatus:"not_set"},{id:"14",title:"投稿",status:"pending",dueDate:"2024-02-15T12:00:00Z",dueDateStatus:"agreed"},{id:"15",title:"インサイトデータ提出",status:"pending",dueDate:"2024-02-20T23:59:59Z",dueDateStatus:"agreed"}],nextAction:{id:"action-1",title:"コンテ修正作業",description:"クライアントからのフィードバックを反映してコンテを修正し、修正稿を提出してください",dueDate:"2024-01-25T23:59:59Z",assignee:"influencer",priority:"high",status:"in_progress"}}})}catch(e){console.error("Error fetching project:",e),w("プロジェクト情報の取得に失敗しました。")}finally{f(!1)}},eC=async()=>{try{p([{id:"1",content:"こんにちは！このプロジェクトでよろしくお願いします。",createdAt:"2024-01-15T10:00:00Z",senderId:"client-1",messageType:"text",sender:{id:"client-1",role:"CLIENT",displayName:"田中太郎（株式会社ビューティコスメ）"}},{id:"2",content:"こちらこそよろしくお願いします！さっそく構成案を作成させていただきます。",createdAt:"2024-01-15T10:30:00Z",senderId:"influencer-1",messageType:"text",sender:{id:"influencer-1",role:"INFLUENCER",displayName:"田中美咲"}}])}catch(e){console.error("Error fetching messages:",e)}},ek=()=>{var e;null===(e=ey.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})};(0,i.useEffect)(()=>{ek()},[g]);let eS=async()=>{if(!h.trim()||!c||!m)return;let e={id:Date.now().toString(),content:h,createdAt:new Date().toISOString(),senderId:c.id,messageType:"text",sender:{id:c.id,role:c.role,displayName:"CLIENT"===c.role?m.client.displayName:m.matchedInfluencer.displayName}};p(s=>[...s,e]),b("")},eA=async()=>{if(c&&m){if("format"===S){if(!eN.title||!eN.concept||!eN.structure){alert("必須項目を入力してください。");return}let e={id:Date.now().toString(),content:"構成案を提出しました",createdAt:new Date().toISOString(),senderId:c.id,messageType:"proposal",sender:{id:c.id,role:c.role,displayName:"CLIENT"===c.role?m.client.displayName:m.matchedInfluencer.displayName},proposalData:{id:Date.now().toString(),...eN,status:"submitted"}};p(s=>[...s,e]),eD({title:"",concept:"",structure:"",deliverables:"",timeline:""})}else{if(0===T.length){alert("アップロードするファイルを選択してください。");return}let e={id:Date.now().toString(),content:"ファイルを送信しました",createdAt:new Date().toISOString(),senderId:c.id,messageType:"file",sender:{id:c.id,role:c.role,displayName:"CLIENT"===c.role?m.client.displayName:m.matchedInfluencer.displayName},attachments:T.map((e,s)=>({id:"".concat(Date.now(),"-").concat(s),fileName:e.name,fileType:e.type,fileUrl:URL.createObjectURL(e),fileSize:e.size}))};p(s=>[...s,e]),R([])}k(!1)}},eT=async()=>{if(!c||!m)return;if(0===E.length){alert("アップロードする動画ファイルを選択してください。");return}let e={id:Date.now().toString(),content:L||"動画を提出しました",createdAt:new Date().toISOString(),senderId:c.id,messageType:"video",sender:{id:c.id,role:c.role,displayName:"CLIENT"===c.role?m.client.displayName:m.matchedInfluencer.displayName},attachments:E.map((e,s)=>({id:"".concat(Date.now(),"-").concat(s),fileName:e.name,fileType:e.type,fileUrl:URL.createObjectURL(e),fileSize:e.size}))};p(s=>[...s,e]),M([]),F(""),_(!1)},eR=async()=>{var e;if(!c||!m)return;if("document"===$&&0===J.length){alert("ドキュメントファイルを選択してください。");return}if("original"===$&&(!K.overallTheme||0===K.scenes.length)){alert("全体テーマとシーン情報を入力してください。");return}let s={id:Date.now().toString(),content:"".concat("initial"===V?"初稿":"修正稿","コンテを提出しました"),createdAt:new Date().toISOString(),senderId:c.id,messageType:"initial"===V?"conte":"revised_conte",sender:{id:c.id,role:c.role,displayName:"CLIENT"===c.role?m.client.displayName:m.matchedInfluencer.displayName},conteData:{id:Date.now().toString(),type:V,format:$,title:"original"===$?K.overallTheme:null===(e=J[0])||void 0===e?void 0:e.name,scenes:"original"===$?K.scenes:void 0,targetDuration:"original"===$?K.targetDuration:void 0,overallTheme:"original"===$?K.overallTheme:void 0,keyMessages:"original"===$?K.keyMessages:void 0,status:"submitted",submittedAt:new Date().toISOString()},attachments:"document"===$?J.map((e,s)=>({id:"".concat(Date.now(),"-").concat(s),fileName:e.name,fileType:e.type,fileUrl:URL.createObjectURL(e),fileSize:e.size})):void 0};p(e=>[...e,s]),q([]),G({title:"",scenes:[{id:"1",sceneNumber:1,description:"",duration:30,cameraAngle:"フロント",notes:""}],targetDuration:60,overallTheme:"",keyMessages:[""]}),Q(""),W(!1)},eI=async()=>{if(!c||!m)return;if(0===ea.length){alert("動画ファイルを選択してください。");return}let e={id:Date.now().toString(),content:"".concat("initial"===es?"初稿動画":"修正動画","を提出しました"),createdAt:new Date().toISOString(),senderId:c.id,messageType:"initial"===es?"initial_video":"revised_video",sender:{id:c.id,role:c.role,displayName:"CLIENT"===c.role?m.client.displayName:m.matchedInfluencer.displayName},videoData:{id:Date.now().toString(),type:es,description:el,status:"submitted",submittedAt:new Date().toISOString()},attachments:ea.map((e,s)=>({id:"".concat(Date.now(),"-").concat(s),fileName:e.name,fileType:e.type,fileUrl:URL.createObjectURL(e),fileSize:e.size}))};p(s=>[...s,e]),ei([]),er(""),ee(!1)},e_=e=>{var s,t;if(!e.conteData||"original"!==e.conteData.format){alert("オリジナルフォーマットのコンテのみ修正指摘できます。");return}ec(e),em({overallFeedback:"",sceneRevisions:(null===(s=e.conteData.scenes)||void 0===s?void 0:s.map(e=>({sceneId:e.id,sceneNumber:e.sceneNumber,revisionType:"content",currentValue:e.description,suggestedValue:"",comment:"",priority:"medium"})))||[],keyMessageRevisions:(null===(t=e.conteData.keyMessages)||void 0===t?void 0:t.map((e,s)=>({index:s,currentMessage:e,suggestedMessage:"",comment:""})))||[],themeRevision:{currentTheme:e.conteData.overallTheme||"",suggestedTheme:"",comment:""},durationRevision:{currentDuration:e.conteData.targetDuration||60,suggestedDuration:null,comment:""}}),ed(!0)},eE=async()=>{var e,s;if(!c||!eo)return;if(!ex.overallFeedback.trim()){alert("全体的なフィードバックを入力してください。");return}let t={id:Date.now().toString(),content:"コンテの詳細な修正指摘をしました",createdAt:new Date().toISOString(),senderId:c.id,messageType:"conte_revision_request",sender:{id:c.id,role:c.role,displayName:(null==m?void 0:m.client.displayName)||"クライアント"},conteRevisionData:{id:Date.now().toString(),originalConteId:eo.conteData.id,overallFeedback:ex.overallFeedback,sceneRevisions:ex.sceneRevisions.filter(e=>e.comment.trim()),keyMessageRevisions:ex.keyMessageRevisions.filter(e=>e.comment.trim()),themeRevision:(null===(e=ex.themeRevision)||void 0===e?void 0:e.comment.trim())?ex.themeRevision:void 0,durationRevision:(null===(s=ex.durationRevision)||void 0===s?void 0:s.comment.trim())?ex.durationRevision:void 0,submittedAt:new Date().toISOString()}};p(e=>[...e,t]),ed(!1),ec(null),em({overallFeedback:"",sceneRevisions:[],keyMessageRevisions:[],themeRevision:null,durationRevision:null})},eM=(e,s,t)=>{em(a=>({...a,sceneRevisions:a.sceneRevisions.map(a=>a.sceneId===e?{...a,[s]:t}:a)}))},eL=(e,s,t)=>{em(a=>({...a,keyMessageRevisions:a.keyMessageRevisions.map(a=>a.index===e?{...a,[s]:t}:a)}))},eF=()=>{let e=[];return g.forEach(s=>{"proposal"===s.messageType&&s.proposalData&&e.push({id:s.id,type:"proposal",title:s.proposalData.title||"構成案",submittedAt:s.createdAt,data:s.proposalData,message:s}),("conte"===s.messageType||"revised_conte"===s.messageType)&&s.conteData&&e.push({id:s.id,type:"conte",title:"".concat("conte"===s.messageType?"初稿":"修正稿","コンテ"),submittedAt:s.createdAt,data:s.conteData,message:s}),("initial_video"===s.messageType||"revised_video"===s.messageType)&&s.videoData&&e.push({id:s.id,type:"video",title:"".concat("initial_video"===s.messageType?"初稿":"修正版","動画"),submittedAt:s.createdAt,data:s.videoData,message:s}),"video"===s.messageType&&s.attachments&&e.push({id:s.id,type:"video",title:"参考動画",submittedAt:s.createdAt,data:{description:s.content},message:s})}),e.sort((e,s)=>new Date(s.submittedAt).getTime()-new Date(e.submittedAt).getTime())},ez=()=>{let e=eF();switch(ep){case"proposals":return e.filter(e=>"proposal"===e.type);case"conte":return e.filter(e=>"conte"===e.type);case"videos":return e.filter(e=>"video"===e.type);default:return e}},eB=e=>{if(0===e)return"0 Bytes";let s=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,s)).toFixed(2))+" "+["Bytes","KB","MB","GB"][s]},eP=e=>new Date(e).toLocaleString("ja-JP",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),eO=e=>new Date(e).toLocaleDateString("ja-JP",{year:"numeric",month:"short",day:"numeric"}),eU=e=>new Date(e).toLocaleString("ja-JP",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),eW=e=>{let s=new Date(e),t=new Date;return Math.ceil((s.getTime()-t.getTime())/864e5)},eV=(e,s)=>{var t,a;if(!c||!m)return;u(t=>{var a;if(!t)return t;let i=null===(a=t.progress)||void 0===a?void 0:a.milestones.map(t=>t.id===e?{...t,proposedDueDate:s,proposedBy:"CLIENT"===c.role?"client":"influencer",dueDateStatus:"CLIENT"===c.role?"proposed_by_client":"proposed_by_influencer"}:t);return{...t,progress:{...t.progress,milestones:i||[]}}});let i={id:Date.now().toString(),content:"\uD83D\uDCC5 「".concat(null===(a=m.progress)||void 0===a?void 0:null===(t=a.milestones.find(s=>s.id===e))||void 0===t?void 0:t.title,"」の期日を").concat(eU(s),"に設定することを提案しました。"),createdAt:new Date().toISOString(),senderId:c.id,messageType:"text",sender:{id:c.id,role:c.role,displayName:"CLIENT"===c.role?m.client.displayName:m.matchedInfluencer.displayName}};p(e=>[...e,i]),B(null),O("")},eZ=e=>{var s,t;if(!c||!m)return;u(s=>{var t;if(!s)return s;let a=null===(t=s.progress)||void 0===t?void 0:t.milestones.map(s=>s.id===e&&s.proposedDueDate?{...s,dueDate:s.proposedDueDate,dueDateStatus:"agreed",proposedDueDate:void 0,proposedBy:void 0}:s);return{...s,progress:{...s.progress,milestones:a||[]}}});let a=null===(t=m.progress)||void 0===t?void 0:null===(s=t.milestones.find(s=>s.id===e))||void 0===s?void 0:s.title,i={id:Date.now().toString(),content:"✅ 「".concat(a,"」の期日設定に合意しました。"),createdAt:new Date().toISOString(),senderId:c.id,messageType:"text",sender:{id:c.id,role:c.role,displayName:"CLIENT"===c.role?m.client.displayName:m.matchedInfluencer.displayName}};p(e=>[...e,i])},e$=e=>{var s,t;if(!c||!m)return;u(s=>{var t;if(!s)return s;let a=null===(t=s.progress)||void 0===t?void 0:t.milestones.map(s=>s.id===e?{...s,dueDateStatus:"not_set",proposedDueDate:void 0,proposedBy:void 0}:s);return{...s,progress:{...s.progress,milestones:a||[]}}});let a=null===(t=m.progress)||void 0===t?void 0:null===(s=t.milestones.find(s=>s.id===e))||void 0===s?void 0:s.title,i={id:Date.now().toString(),content:"❌ 「".concat(a,"」の期日提案を拒否しました。再度相談して決めましょう。"),createdAt:new Date().toISOString(),senderId:c.id,messageType:"text",sender:{id:c.id,role:c.role,displayName:"CLIENT"===c.role?m.client.displayName:m.matchedInfluencer.displayName}};p(e=>[...e,i])};return v?(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600",children:"プロジェクトを読み込み中..."})]})}):(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50",children:[(0,a.jsx)("div",{className:"bg-white/80 backdrop-blur-xl border-b border-gray-200 sticky top-0 z-10",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-4 flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)(N(),{href:"/projects",className:"flex items-center space-x-2 px-4 py-2 bg-white/80 backdrop-blur-xl rounded-xl shadow-lg hover:shadow-xl transition-all text-gray-700 hover:text-blue-600",children:[(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),(0,a.jsx)("span",{className:"font-medium",children:"プロジェクトに戻る"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"プロジェクトチャット"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:null==m?void 0:m.title})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("span",{className:"text-gray-700",children:null==c?void 0:c.email}),(0,a.jsx)(N(),{href:"/dashboard",className:"px-4 py-2 text-gray-600 hover:text-blue-600 transition-colors",children:"ダッシュボード"})]})]})}),(0,a.jsxs)("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[D&&(0,a.jsx)(l.E.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-xl mb-6",children:D}),m&&(0,a.jsx)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},className:"bg-white/80 backdrop-blur-xl border border-gray-200 rounded-3xl p-6 shadow-xl mb-6",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:m.title}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[(0,a.jsxs)("span",{children:["企業: ",m.client.companyName]}),(0,a.jsx)("span",{children:"•"}),(0,a.jsxs)("span",{children:["インフルエンサー: ",m.matchedInfluencer.displayName]})]})]})}),(0,a.jsx)("div",{className:"flex justify-end mb-3",children:(0,a.jsxs)("button",{onClick:()=>eg(!0),className:"px-4 py-2 bg-indigo-500 text-white rounded-lg font-medium hover:bg-indigo-600 transition-colors text-sm flex items-center space-x-2",children:[(0,a.jsx)("span",{children:"\uD83D\uDCC1"}),(0,a.jsx)("span",{children:"提出物一覧"}),(0,a.jsx)("span",{className:"bg-indigo-700 text-white text-xs px-2 py-0.5 rounded-full",children:eF().length})]})}),(0,a.jsxs)("div",{className:"border-t border-gray-100 pt-4",children:[(null==c?void 0:c.role)==="INFLUENCER"&&(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700 min-w-[100px]",children:"基本提出:"}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,a.jsx)("button",{onClick:()=>k(!0),className:"px-3 py-1.5 bg-blue-500 text-white text-sm rounded-lg font-medium hover:bg-blue-600 transition-colors",children:"\uD83D\uDCDD 構成案提出"}),(0,a.jsx)("button",{onClick:()=>{Z("initial"),W(!0)},className:"px-3 py-1.5 bg-purple-500 text-white text-sm rounded-lg font-medium hover:bg-purple-600 transition-colors",children:"\uD83D\uDCCB コンテ提出"}),(0,a.jsx)("button",{onClick:()=>{et("initial"),ee(!0)},className:"px-3 py-1.5 bg-green-500 text-white text-sm rounded-lg font-medium hover:bg-green-600 transition-colors",children:"\uD83C\uDFAC 動画提出"}),(0,a.jsx)("button",{onClick:()=>_(!0),className:"px-3 py-1.5 bg-gray-500 text-white text-sm rounded-lg font-medium hover:bg-gray-600 transition-colors",children:"\uD83C\uDFA5 参考動画"})]})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700 min-w-[100px]",children:"修正版提出:"}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,a.jsx)("button",{onClick:()=>{Z("revised"),W(!0)},className:"px-3 py-1.5 bg-purple-100 text-purple-700 text-sm rounded-lg font-medium hover:bg-purple-200 transition-colors",children:"\uD83D\uDCCB 修正稿コンテ"}),(0,a.jsx)("button",{onClick:()=>{et("revised"),ee(!0)},className:"px-3 py-1.5 bg-green-100 text-green-700 text-sm rounded-lg font-medium hover:bg-green-200 transition-colors",children:"\uD83C\uDFAC 修正版動画"})]})]})]}),(null==c?void 0:c.role)==="CLIENT"&&(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700 min-w-[100px]",children:"修正依頼:"}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,a.jsx)("button",{onClick:()=>{Z("revised");let e={id:Date.now().toString(),content:"コンテの修正をお願いします。",createdAt:new Date().toISOString(),senderId:c.id,messageType:"text",sender:{id:c.id,role:c.role,displayName:(null==m?void 0:m.client.displayName)||"クライアント"}};p(s=>[...s,e])},className:"px-3 py-1.5 bg-orange-500 text-white text-sm rounded-lg font-medium hover:bg-orange-600 transition-colors",children:"\uD83D\uDCDD コンテ修正依頼"}),(0,a.jsx)("button",{onClick:()=>{let e={id:Date.now().toString(),content:"動画の修正をお願いします。",createdAt:new Date().toISOString(),senderId:c.id,messageType:"text",sender:{id:c.id,role:c.role,displayName:(null==m?void 0:m.client.displayName)||"クライアント"}};p(s=>[...s,e])},className:"px-3 py-1.5 bg-red-500 text-white text-sm rounded-lg font-medium hover:bg-red-600 transition-colors",children:"\uD83C\uDFAC 動画修正依頼"})]})]})]})]})}),(null==m?void 0:m.progress)&&(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[(0,a.jsxs)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.1},className:"bg-white/80 backdrop-blur-xl border border-gray-200 rounded-2xl p-6 shadow-xl",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("h3",{className:"text-lg font-bold text-gray-900 flex items-center",children:[(0,a.jsx)("span",{className:"mr-2",children:"\uD83D\uDCCA"}),"プロジェクト進捗"]}),(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:[m.progress.overallProgress,"% 完了"]})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("div",{className:"flex items-center justify-between mb-2",children:(0,a.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:["現在のフェーズ: ",m.progress.currentPhase]})}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-gradient-to-r from-blue-500 to-green-500 h-2 rounded-full transition-all duration-300",style:{width:"".concat(m.progress.overallProgress,"%")}})})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("h4",{className:"text-sm font-semibold text-gray-700",children:"ワークフロー進捗"}),(0,a.jsx)("div",{className:"grid grid-cols-5 gap-2 mb-4",children:m.progress.milestones.slice(0,5).map((e,s)=>(0,a.jsxs)("div",{className:"text-center relative group",children:[(0,a.jsx)("div",{className:"w-6 h-6 rounded-full mx-auto mb-1 flex items-center justify-center text-xs font-bold ".concat("completed"===e.status?"bg-green-500 text-white":"in_progress"===e.status?"bg-blue-500 text-white":"bg-gray-300 text-gray-600"),children:"completed"===e.status?"✓":s+1}),(0,a.jsx)("div",{className:"text-xs ".concat("completed"===e.status?"text-green-700 font-medium":"in_progress"===e.status?"text-blue-700 font-medium":"text-gray-600"),children:e.title}),e.dueDate&&(0,a.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:eO(e.dueDate)}),"proposed_by_client"===e.dueDateStatus&&(0,a.jsx)("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-orange-400 rounded-full",title:"企業から期日提案中",children:(0,a.jsx)("span",{className:"text-xs text-white",children:"\uD83C\uDFE2"})}),"proposed_by_influencer"===e.dueDateStatus&&(0,a.jsx)("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-purple-400 rounded-full",title:"インフルエンサーから期日提案中",children:(0,a.jsx)("span",{className:"text-xs text-white",children:"\uD83D\uDCFA"})})]},e.id))}),(0,a.jsx)("div",{className:"grid grid-cols-5 gap-2 mb-4",children:m.progress.milestones.slice(5,10).map((e,s)=>(0,a.jsxs)("div",{className:"text-center relative group",children:[(0,a.jsx)("div",{className:"w-6 h-6 rounded-full mx-auto mb-1 flex items-center justify-center text-xs font-bold ".concat("completed"===e.status?"bg-green-500 text-white":"in_progress"===e.status?"bg-blue-500 text-white":"bg-gray-300 text-gray-600"),children:"completed"===e.status?"✓":s+6}),(0,a.jsx)("div",{className:"text-xs ".concat("completed"===e.status?"text-green-700 font-medium":"in_progress"===e.status?"text-blue-700 font-medium":"text-gray-600"),children:e.title}),e.dueDate&&(0,a.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:eO(e.dueDate)}),"proposed_by_client"===e.dueDateStatus&&(0,a.jsx)("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-orange-400 rounded-full",title:"企業から期日提案中",children:(0,a.jsx)("span",{className:"text-xs text-white",children:"\uD83C\uDFE2"})}),"proposed_by_influencer"===e.dueDateStatus&&(0,a.jsx)("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-purple-400 rounded-full",title:"インフルエンサーから期日提案中",children:(0,a.jsx)("span",{className:"text-xs text-white",children:"\uD83D\uDCFA"})})]},e.id))}),(0,a.jsx)("div",{className:"grid grid-cols-5 gap-2",children:m.progress.milestones.slice(10).map((e,s)=>(0,a.jsxs)("div",{className:"text-center relative group",children:[(0,a.jsx)("div",{className:"w-6 h-6 rounded-full mx-auto mb-1 flex items-center justify-center text-xs font-bold ".concat("completed"===e.status?"bg-green-500 text-white":"in_progress"===e.status?"bg-blue-500 text-white":"bg-gray-300 text-gray-600"),children:"completed"===e.status?"✓":s+11}),(0,a.jsx)("div",{className:"text-xs ".concat("completed"===e.status?"text-green-700 font-medium":"in_progress"===e.status?"text-blue-700 font-medium":"text-gray-600"),children:e.title}),e.dueDate&&(0,a.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:eO(e.dueDate)}),"proposed_by_client"===e.dueDateStatus&&(0,a.jsx)("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-orange-400 rounded-full",title:"企業から期日提案中",children:(0,a.jsx)("span",{className:"text-xs text-white",children:"\uD83C\uDFE2"})}),"proposed_by_influencer"===e.dueDateStatus&&(0,a.jsx)("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-purple-400 rounded-full",title:"インフルエンサーから期日提案中",children:(0,a.jsx)("span",{className:"text-xs text-white",children:"\uD83D\uDCFA"})})]},e.id))}),(0,a.jsxs)("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg border border-blue-200",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-4 h-4 bg-blue-500 rounded-full flex items-center justify-center",children:(0,a.jsx)("div",{className:"w-2 h-2 bg-white rounded-full animate-pulse"})}),(0,a.jsxs)("div",{className:"text-sm font-medium text-blue-800",children:["現在進行中: ",null===(e=m.progress.milestones.find(e=>"in_progress"===e.status))||void 0===e?void 0:e.title]})]}),(0,a.jsxs)("div",{className:"text-xs text-blue-600 mt-1",children:[m.progress.milestones.findIndex(e=>"in_progress"===e.status)+1," / ",m.progress.milestones.length," ステップ"]})]})]})]}),(0,a.jsxs)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2},className:"bg-white/80 backdrop-blur-xl border border-gray-200 rounded-2xl p-6 shadow-xl",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("h3",{className:"text-lg font-bold text-gray-900 flex items-center",children:[(0,a.jsx)("span",{className:"mr-2",children:"\uD83C\uDFAF"}),"ネクストアクション"]}),(0,a.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-semibold ".concat((e=>{switch(e){case"high":return"bg-red-100 text-red-800";case"medium":return"bg-yellow-100 text-yellow-800";case"low":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}})(m.progress.nextAction.priority)),children:"high"===m.progress.nextAction.priority?"高優先度":"medium"===m.progress.nextAction.priority?"中優先度":"低優先度"})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-bold text-gray-900 mb-2",children:m.progress.nextAction.title}),(0,a.jsx)("p",{className:"text-sm text-gray-700 mb-3",children:m.progress.nextAction.description})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:"期日"}),(0,a.jsxs)("div",{className:"text-sm font-medium ".concat(0>eW(m.progress.nextAction.dueDate)?"text-red-600":2>=eW(m.progress.nextAction.dueDate)?"text-orange-600":"text-gray-900"),children:[eO(m.progress.nextAction.dueDate),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:0>eW(m.progress.nextAction.dueDate)?"".concat(Math.abs(eW(m.progress.nextAction.dueDate)),"日遅延"):0===eW(m.progress.nextAction.dueDate)?"今日が期日":"あと".concat(eW(m.progress.nextAction.dueDate),"日")})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:"担当者"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold text-white ".concat("client"===m.progress.nextAction.assignee?"bg-blue-500":"bg-purple-500"),children:"client"===m.progress.nextAction.assignee?m.client.displayName.charAt(0):m.matchedInfluencer.displayName.charAt(0)}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"client"===m.progress.nextAction.assignee?m.client.displayName:m.matchedInfluencer.displayName}),m.progress.nextAction.assignee===(null==c?void 0:null===(s=c.role)||void 0===s?void 0:s.toLowerCase())&&(0,a.jsx)("span",{className:"px-2 py-1 bg-yellow-100 text-yellow-800 text-xs rounded-full font-medium",children:"あなた"})]})]})]}),(0,a.jsx)("div",{className:"pt-2",children:(0,a.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-semibold ".concat((e=>{switch(e){case"completed":return"bg-green-100 text-green-800";case"in_progress":return"bg-blue-100 text-blue-800";case"pending":default:return"bg-gray-100 text-gray-800";case"overdue":return"bg-red-100 text-red-800"}})(m.progress.nextAction.status)),children:"pending"===m.progress.nextAction.status?"未着手":"in_progress"===m.progress.nextAction.status?"進行中":"completed"===m.progress.nextAction.status?"完了":"overdue"===m.progress.nextAction.status?"期限超過":m.progress.nextAction.status})})]})]})]}),(0,a.jsxs)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.1},className:"bg-white/80 backdrop-blur-xl border border-gray-200 rounded-3xl shadow-xl overflow-hidden",children:[(0,a.jsxs)("div",{className:"h-96 overflow-y-auto p-6 space-y-4",children:[g.map(e=>(0,a.jsx)(l.E.div,{initial:{opacity:0,x:e.senderId===(null==c?void 0:c.id)?20:-20},animate:{opacity:1,x:0},className:"flex ".concat(e.senderId===(null==c?void 0:c.id)?"justify-end":"justify-start"),children:(0,a.jsxs)("div",{className:"max-w-xs lg:max-w-md px-4 py-3 rounded-2xl ".concat(e.senderId===(null==c?void 0:c.id)?"bg-blue-500 text-white":"bg-gray-100 text-gray-900"),children:[(0,a.jsx)("div",{className:"text-xs mb-1 opacity-75",children:e.sender.displayName}),"text"===e.messageType&&(0,a.jsx)("p",{className:"text-sm",children:e.content}),"proposal"===e.messageType&&e.proposalData&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("p",{className:"text-sm font-semibold",children:["\uD83D\uDCDD ",e.content]}),(0,a.jsxs)("div",{className:"text-xs space-y-1 bg-black/10 rounded p-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"タイトル:"})," ",e.proposalData.title]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"コンセプト:"})," ",e.proposalData.concept]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"構成:"})," ",e.proposalData.structure]})]})]}),"file"===e.messageType&&e.attachments&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("p",{className:"text-sm font-semibold",children:["\uD83D\uDCCE ",e.content]}),e.attachments.map(e=>(0,a.jsxs)("div",{className:"text-xs bg-black/10 rounded p-2",children:[(0,a.jsx)("div",{className:"font-medium",children:e.fileName}),(0,a.jsx)("div",{className:"opacity-75",children:eB(e.fileSize)})]},e.id))]}),"video"===e.messageType&&e.attachments&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("p",{className:"text-sm font-semibold",children:["\uD83C\uDFAC ",e.content]}),e.attachments.map(e=>(0,a.jsx)("div",{className:"text-xs bg-black/10 rounded p-2",children:e.fileType.startsWith("video/")?(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("video",{controls:!0,className:"w-full max-w-xs rounded",src:e.fileUrl,children:"お使いのブラウザは動画再生に対応していません。"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium",children:e.fileName}),(0,a.jsx)("div",{className:"opacity-75",children:eB(e.fileSize)})]})]}):(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium",children:e.fileName}),(0,a.jsx)("div",{className:"opacity-75",children:eB(e.fileSize)})]})},e.id))]}),("conte"===e.messageType||"revised_conte"===e.messageType)&&e.conteData&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("p",{className:"text-sm font-semibold",children:["\uD83D\uDCCB ","conte"===e.messageType?"初稿":"修正稿","コンテを提出しました"]}),(0,a.jsxs)("div",{className:"text-xs space-y-2 bg-purple-50 rounded p-3",children:["original"===e.conteData.format?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"テーマ:"})," ",e.conteData.overallTheme]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"目標時間:"})," ",e.conteData.targetDuration,"秒"]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"シーン数:"})," ",e.conteData.scenes.length,"シーン"]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"キーメッセージ:"}),(0,a.jsx)("ul",{className:"list-disc list-inside ml-2 mt-1",children:e.conteData.keyMessages.map((e,s)=>(0,a.jsx)("li",{children:e},s))})]})]}):(0,a.jsx)("div",{children:(0,a.jsx)("strong",{children:"ドキュメント形式で提出"})}),e.attachments&&e.attachments.map(e=>(0,a.jsxs)("div",{className:"flex items-center space-x-2 bg-white rounded p-2",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-purple-100 rounded flex items-center justify-center",children:"\uD83D\uDCC4"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium text-xs",children:e.fileName}),(0,a.jsx)("div",{className:"opacity-75 text-xs",children:eB(e.fileSize)})]})]},e.id))]}),(null==c?void 0:c.role)==="CLIENT"&&"original"===e.conteData.format&&e.senderId!==c.id&&(0,a.jsx)("div",{className:"mt-3 pt-2 border-t border-purple-200",children:(0,a.jsx)("button",{onClick:()=>e_(e),className:"px-3 py-1.5 bg-orange-500 text-white text-xs rounded-lg font-medium hover:bg-orange-600 transition-colors",children:"\uD83D\uDD0D 詳細な修正指摘"})})]}),("initial_video"===e.messageType||"revised_video"===e.messageType)&&e.videoData&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("p",{className:"text-sm font-semibold",children:["\uD83C\uDFAC ","initial_video"===e.messageType?"初稿動画":"修正版動画","を提出しました"]}),(0,a.jsxs)("div",{className:"text-xs space-y-2 bg-green-50 rounded p-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"タイプ:"})," ","initial"===e.videoData.type?"初稿":"修正版"]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"提出日:"})," ",eU(e.videoData.submittedAt)]}),e.videoData.description&&(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"説明:"})," ",e.videoData.description]}),e.attachments&&e.attachments.map(e=>(0,a.jsxs)("div",{className:"flex items-center space-x-2 bg-white rounded p-2",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-green-100 rounded flex items-center justify-center",children:"\uD83C\uDFAC"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium text-xs",children:e.fileName}),(0,a.jsx)("div",{className:"opacity-75 text-xs",children:eB(e.fileSize)})]})]},e.id))]})]}),"conte_revision_request"===e.messageType&&e.conteRevisionData&&(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("p",{className:"text-sm font-semibold text-orange-700",children:"\uD83D\uDD0D コンテの詳細な修正指摘"}),(0,a.jsxs)("div",{className:"text-xs space-y-3 bg-orange-50 rounded p-4 border border-orange-200",children:[(0,a.jsxs)("div",{className:"bg-white rounded p-3",children:[(0,a.jsx)("div",{className:"font-semibold text-orange-800 mb-2",children:"\uD83D\uDCCB 全体的なフィードバック"}),(0,a.jsx)("div",{className:"text-gray-700",children:e.conteRevisionData.overallFeedback})]}),e.conteRevisionData.themeRevision&&(0,a.jsxs)("div",{className:"bg-white rounded p-3",children:[(0,a.jsx)("div",{className:"font-semibold text-orange-800 mb-2",children:"\uD83C\uDFAF テーマについて"}),(0,a.jsxs)("div",{className:"text-xs text-gray-600 mb-1",children:["現在: ",e.conteRevisionData.themeRevision.currentTheme]}),e.conteRevisionData.themeRevision.suggestedTheme&&(0,a.jsxs)("div",{className:"text-xs text-green-600 mb-1",children:["提案: ",e.conteRevisionData.themeRevision.suggestedTheme]}),(0,a.jsx)("div",{className:"text-gray-700",children:e.conteRevisionData.themeRevision.comment})]}),e.conteRevisionData.durationRevision&&(0,a.jsxs)("div",{className:"bg-white rounded p-3",children:[(0,a.jsx)("div",{className:"font-semibold text-orange-800 mb-2",children:"⏱️ 時間について"}),(0,a.jsxs)("div",{className:"text-xs text-gray-600 mb-1",children:["現在: ",e.conteRevisionData.durationRevision.currentDuration,"秒"]}),e.conteRevisionData.durationRevision.suggestedDuration&&(0,a.jsxs)("div",{className:"text-xs text-green-600 mb-1",children:["提案: ",e.conteRevisionData.durationRevision.suggestedDuration,"秒"]}),(0,a.jsx)("div",{className:"text-gray-700",children:e.conteRevisionData.durationRevision.comment})]}),e.conteRevisionData.sceneRevisions.length>0&&(0,a.jsxs)("div",{className:"bg-white rounded p-3",children:[(0,a.jsx)("div",{className:"font-semibold text-orange-800 mb-3",children:"\uD83C\uDFAC シーン別修正点"}),(0,a.jsx)("div",{className:"space-y-2",children:e.conteRevisionData.sceneRevisions.map((e,s)=>(0,a.jsxs)("div",{className:"border-l-4 border-orange-300 pl-3 py-1",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,a.jsxs)("span",{className:"text-xs font-medium text-orange-700",children:["シーン ",e.sceneNumber]}),(0,a.jsx)("span",{className:"text-xs px-2 py-0.5 rounded ".concat("high"===e.priority?"bg-red-100 text-red-700":"medium"===e.priority?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-700"),children:"high"===e.priority?"高":"medium"===e.priority?"中":"低"})]}),e.suggestedValue&&(0,a.jsxs)("div",{className:"text-xs text-green-600 mb-1",children:["提案: ",e.suggestedValue]}),(0,a.jsx)("div",{className:"text-xs text-gray-700",children:e.comment})]},s))})]}),e.conteRevisionData.keyMessageRevisions.length>0&&(0,a.jsxs)("div",{className:"bg-white rounded p-3",children:[(0,a.jsx)("div",{className:"font-semibold text-orange-800 mb-3",children:"\uD83D\uDCAC キーメッセージ修正"}),(0,a.jsx)("div",{className:"space-y-2",children:e.conteRevisionData.keyMessageRevisions.map((e,s)=>(0,a.jsxs)("div",{className:"border-l-4 border-blue-300 pl-3 py-1",children:[(0,a.jsxs)("div",{className:"text-xs font-medium text-blue-700 mb-1",children:["メッセージ ",e.index+1]}),(0,a.jsxs)("div",{className:"text-xs text-gray-600 mb-1",children:["現在: ",e.currentMessage]}),e.suggestedMessage&&(0,a.jsxs)("div",{className:"text-xs text-green-600 mb-1",children:["提案: ",e.suggestedMessage]}),(0,a.jsx)("div",{className:"text-xs text-gray-700",children:e.comment})]},s))})]})]})]}),(0,a.jsx)("div",{className:"text-xs mt-2 opacity-75",children:eP(e.createdAt)})]})},e.id)),(0,a.jsx)("div",{ref:ey})]}),(0,a.jsx)("div",{className:"border-t border-gray-200 p-4",children:(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("input",{type:"text",value:h,onChange:e=>b(e.target.value),onKeyPress:e=>"Enter"===e.key&&eS(),placeholder:"メッセージを入力...",className:"flex-1 px-4 py-2 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,a.jsx)("button",{onClick:eS,disabled:!h.trim(),className:"px-6 py-2 bg-blue-500 text-white rounded-xl font-semibold hover:bg-blue-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"送信"})]})})]}),(null==m?void 0:m.progress)&&(0,a.jsxs)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2},className:"mt-6 bg-white/80 backdrop-blur-xl border border-gray-200 rounded-3xl p-6 shadow-xl",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("h3",{className:"text-lg font-bold text-gray-900 flex items-center",children:[(0,a.jsx)("span",{className:"mr-2",children:"\uD83D\uDCC5"}),"期日管理"]}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"双方の合意で期日を設定"})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:m.progress.milestones.filter(e=>"completed"!==e.status).slice(0,9).map(e=>(0,a.jsxs)("div",{className:"border border-gray-200 rounded-xl p-4 space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h4",{className:"font-semibold text-gray-900 text-sm",children:e.title}),(0,a.jsx)("div",{className:"w-3 h-3 rounded-full ".concat("in_progress"===e.status?"bg-blue-500":"completed"===e.status?"bg-green-500":"bg-gray-300")})]}),"agreed"===e.dueDateStatus&&e.dueDate&&(0,a.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:[(0,a.jsx)("div",{className:"flex items-center space-x-2",children:(0,a.jsx)("span",{className:"text-green-600 font-medium text-sm",children:"✅ 合意済み"})}),(0,a.jsxs)("div",{className:"text-sm text-gray-700 mt-1",children:["期日: ",eU(e.dueDate)]}),(0,a.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:0>eW(e.dueDate)?"".concat(Math.abs(eW(e.dueDate)),"日過ぎています"):0===eW(e.dueDate)?"今日が期日です":"あと".concat(eW(e.dueDate),"日")})]}),("proposed_by_client"===e.dueDateStatus||"proposed_by_influencer"===e.dueDateStatus)&&e.proposedDueDate&&(0,a.jsxs)("div",{className:"border rounded-lg p-3 ".concat("proposed_by_client"===e.dueDateStatus?"bg-orange-50 border-orange-200":"bg-purple-50 border-purple-200"),children:[(0,a.jsx)("div",{className:"flex items-center justify-between mb-2",children:(0,a.jsx)("span",{className:"font-medium text-sm ".concat("proposed_by_client"===e.dueDateStatus?"text-orange-700":"text-purple-700"),children:"proposed_by_client"===e.dueDateStatus?"\uD83C\uDFE2 企業からの提案":"\uD83D\uDCFA インフルエンサーからの提案"})}),(0,a.jsxs)("div",{className:"text-sm text-gray-700 mb-3",children:["提案期日: ",eU(e.proposedDueDate)]}),("proposed_by_client"===e.dueDateStatus&&(null==c?void 0:c.role)==="INFLUENCER"||"proposed_by_influencer"===e.dueDateStatus&&(null==c?void 0:c.role)==="CLIENT")&&(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("button",{onClick:()=>eZ(e.id),className:"flex-1 px-3 py-2 bg-green-500 text-white text-sm rounded-lg font-medium hover:bg-green-600 transition-colors",children:"✅ 合意"}),(0,a.jsx)("button",{onClick:()=>e$(e.id),className:"flex-1 px-3 py-2 bg-gray-500 text-white text-sm rounded-lg font-medium hover:bg-gray-600 transition-colors",children:"❌ 拒否"})]}),("proposed_by_client"===e.dueDateStatus&&(null==c?void 0:c.role)==="CLIENT"||"proposed_by_influencer"===e.dueDateStatus&&(null==c?void 0:c.role)==="INFLUENCER")&&(0,a.jsx)("div",{className:"text-sm text-gray-600 text-center bg-gray-50 rounded p-2",children:"相手の回答を待っています..."})]}),"not_set"===e.dueDateStatus&&(0,a.jsx)("div",{className:"space-y-3",children:z===e.id?(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("input",{type:"datetime-local",value:P,onChange:e=>O(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",min:new Date().toISOString().slice(0,16)}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("button",{onClick:()=>eV(e.id,P),disabled:!P,className:"flex-1 px-3 py-2 bg-blue-500 text-white text-sm rounded-lg font-medium hover:bg-blue-600 transition-colors disabled:opacity-50",children:"提案する"}),(0,a.jsx)("button",{onClick:()=>{B(null),O("")},className:"px-3 py-2 bg-gray-500 text-white text-sm rounded-lg font-medium hover:bg-gray-600 transition-colors",children:"キャンセル"})]})]}):(0,a.jsx)("button",{onClick:()=>B(e.id),className:"w-full px-3 py-2 bg-blue-50 border-2 border-dashed border-blue-300 text-blue-600 text-sm rounded-lg font-medium hover:bg-blue-100 transition-colors",children:"+ 期日を提案する"})})]},e.id))}),(0,a.jsx)("div",{className:"mt-6 p-4 bg-blue-50 rounded-xl border border-blue-200",children:(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)("div",{className:"text-blue-600 mt-0.5",children:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-sm font-semibold text-blue-800 mb-1",children:"期日設定の流れ"}),(0,a.jsxs)("div",{className:"text-sm text-blue-700 space-y-1",children:[(0,a.jsx)("p",{children:"・ 企業またはインフルエンサーのどちらかが期日を提案"}),(0,a.jsx)("p",{children:"・ 相手が合意または拒否で回答"}),(0,a.jsx)("p",{children:"・ 合意された期日が正式に設定されます"})]})]})]})})]})]}),(0,a.jsx)(y,{children:C&&(0,a.jsx)(l.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:(0,a.jsxs)(l.E.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-2xl p-6 w-full max-w-2xl max-h-[80vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:"構成案提出"}),(0,a.jsx)("button",{onClick:()=>k(!1),className:"text-gray-500 hover:text-gray-700",children:(0,a.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-700 mb-3",children:"提出方法を選択してください"}),(0,a.jsxs)("div",{className:"flex space-x-4",children:[(0,a.jsx)("button",{onClick:()=>A("format"),className:"px-4 py-2 rounded-xl font-semibold transition-all ".concat("format"===S?"bg-blue-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"\uD83D\uDCCB 指定フォーマット"}),(0,a.jsx)("button",{onClick:()=>A("upload"),className:"px-4 py-2 rounded-xl font-semibold transition-all ".concat("upload"===S?"bg-blue-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"\uD83D\uDCCE ファイルアップロード"})]})]}),"format"===S?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"構成案タイトル *"}),(0,a.jsx)("input",{type:"text",value:eN.title,onChange:e=>eD({...eN,title:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"例: 新商品PR動画構成案"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"コンセプト *"}),(0,a.jsx)("textarea",{value:eN.concept,onChange:e=>eD({...eN,concept:e.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"動画のコンセプトや狙いを記載してください"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"構成・シナリオ *"}),(0,a.jsx)("textarea",{value:eN.structure,onChange:e=>eD({...eN,structure:e.target.value}),rows:5,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"動画の構成やシナリオを時系列で記載してください"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"成果物"}),(0,a.jsx)("textarea",{value:eN.deliverables,onChange:e=>eD({...eN,deliverables:e.target.value}),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"提供する動画の仕様や追加成果物"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"スケジュール"}),(0,a.jsx)("textarea",{value:eN.timeline,onChange:e=>eD({...eN,timeline:e.target.value}),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"制作スケジュールを記載してください"})]})]}):(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ファイルを選択"}),(0,a.jsx)("input",{type:"file",onChange:e=>{let s=e.target.files;s&&R(Array.from(s))},multiple:!0,accept:".doc,.docx,.pdf,.ppt,.pptx",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"対応ファイル: Word(.doc, .docx), PDF, PowerPoint(.ppt, .pptx)"})]}),T.length>0&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"選択されたファイル:"}),T.map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium",children:e.name}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:eB(e.size)})]}),(0,a.jsx)("button",{onClick:()=>R(e=>e.filter((e,t)=>t!==s)),className:"text-red-500 hover:text-red-700",children:"削除"})]},s))]})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,a.jsx)("button",{onClick:()=>k(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"キャンセル"}),(0,a.jsx)("button",{onClick:eA,className:"px-6 py-2 bg-blue-500 text-white rounded-xl font-semibold hover:bg-blue-600 transition-colors",children:"提出する"})]})]})})}),(0,a.jsx)(y,{children:U&&(0,a.jsx)(l.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)(l.E.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"bg-white rounded-2xl p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("h3",{className:"text-xl font-bold text-gray-900",children:["initial"===V?"初稿":"修正稿","コンテ提出"]}),(0,a.jsx)("button",{onClick:()=>W(!1),className:"text-gray-500 hover:text-gray-700",children:(0,a.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"コンテフォーマット"}),(0,a.jsxs)("div",{className:"flex space-x-4",children:[(0,a.jsxs)("label",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"radio",value:"original",checked:"original"===$,onChange:e=>X(e.target.value),className:"mr-2"}),(0,a.jsx)("span",{children:"ツール独自フォーマット"})]}),(0,a.jsxs)("label",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"radio",value:"document",checked:"document"===$,onChange:e=>X(e.target.value),className:"mr-2"}),(0,a.jsx)("span",{children:"ドキュメントアップロード"})]})]})]}),"original"===$&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"全体テーマ"}),(0,a.jsx)("input",{type:"text",value:K.overallTheme,onChange:e=>G(s=>({...s,overallTheme:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"動画の全体的なテーマを入力"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"目標時間（秒）"}),(0,a.jsx)("input",{type:"number",value:K.targetDuration,onChange:e=>G(s=>({...s,targetDuration:parseInt(e.target.value)||60})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",min:"15",max:"300"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"キーメッセージ"}),K.keyMessages.map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,a.jsx)("input",{type:"text",value:e,onChange:e=>{let t=[...K.keyMessages];t[s]=e.target.value,G(e=>({...e,keyMessages:t}))},className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"キーメッセージ ".concat(s+1)}),K.keyMessages.length>1&&(0,a.jsx)("button",{onClick:()=>{let e=K.keyMessages.filter((e,t)=>t!==s);G(s=>({...s,keyMessages:e}))},className:"px-2 py-1 text-red-500 hover:bg-red-50 rounded",children:"削除"})]},s)),(0,a.jsx)("button",{onClick:()=>G(e=>({...e,keyMessages:[...e.keyMessages,""]})),className:"px-3 py-1 text-blue-500 hover:bg-blue-50 rounded",children:"+ メッセージ追加"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"シーン構成"}),K.scenes.map((e,s)=>(0,a.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsxs)("h4",{className:"font-medium",children:["シーン ",e.sceneNumber]}),K.scenes.length>1&&(0,a.jsx)("button",{onClick:()=>{let s=K.scenes.filter(s=>s.id!==e.id);G(e=>({...e,scenes:s}))},className:"text-red-500 hover:bg-red-50 px-2 py-1 rounded",children:"削除"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-gray-600 mb-1",children:"内容説明"}),(0,a.jsx)("textarea",{value:e.description,onChange:s=>{let t=K.scenes.map(t=>t.id===e.id?{...t,description:s.target.value}:t);G(e=>({...e,scenes:t}))},className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500",rows:2,placeholder:"シーンの内容を説明"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-gray-600 mb-1",children:"時間（秒）"}),(0,a.jsx)("input",{type:"number",value:e.duration,onChange:s=>{let t=K.scenes.map(t=>t.id===e.id?{...t,duration:parseInt(s.target.value)||0}:t);G(e=>({...e,scenes:t}))},className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500",min:"1",max:"60"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-gray-600 mb-1",children:"カメラアングル"}),(0,a.jsxs)("select",{value:e.cameraAngle,onChange:s=>{let t=K.scenes.map(t=>t.id===e.id?{...t,cameraAngle:s.target.value}:t);G(e=>({...e,scenes:t}))},className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"フロント",children:"フロント"}),(0,a.jsx)("option",{value:"サイド",children:"サイド"}),(0,a.jsx)("option",{value:"アップ",children:"アップ"}),(0,a.jsx)("option",{value:"引き",children:"引き"}),(0,a.jsx)("option",{value:"俯瞰",children:"俯瞰"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-gray-600 mb-1",children:"備考"}),(0,a.jsx)("input",{type:"text",value:e.notes,onChange:s=>{let t=K.scenes.map(t=>t.id===e.id?{...t,notes:s.target.value}:t);G(e=>({...e,scenes:t}))},className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"特記事項など"})]})]})]},e.id)),(0,a.jsx)("button",{onClick:()=>{let e=K.scenes.length+1;G(s=>({...s,scenes:[...s.scenes,{id:Date.now().toString(),sceneNumber:e,description:"",duration:30,cameraAngle:"フロント",notes:""}]}))},className:"w-full py-2 border-2 border-dashed border-gray-300 rounded-lg text-gray-500 hover:border-blue-300 hover:text-blue-500 transition-colors",children:"+ シーン追加"})]})]}),"document"===$&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"コンテファイル"}),(0,a.jsx)("input",{type:"file",onChange:e=>{let s=e.target.files;s&&q(Array.from(s))},multiple:!0,accept:".pdf,.doc,.docx,.ppt,.pptx,.xlsx,.xls,.png,.jpg,.jpeg",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"PDF, Word, PowerPoint, Excel, 画像ファイルに対応"})]}),J.length>0&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"選択されたファイル:"}),J.map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center justify-between bg-gray-50 rounded-lg p-3",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"text-sm text-gray-900",children:e.name}),(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:["(",eB(e.size),")"]})]}),(0,a.jsx)("button",{onClick:()=>q(e=>e.filter((e,t)=>t!==s)),className:"text-red-500 hover:bg-red-50 px-2 py-1 rounded",children:"削除"})]},s))]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"説明・補足"}),(0,a.jsx)("textarea",{value:H,onChange:e=>Q(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"コンテの説明や補足事項を入力してください"})]})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,a.jsx)("button",{onClick:()=>W(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"キャンセル"}),(0,a.jsx)("button",{onClick:eR,className:"px-6 py-2 bg-purple-500 text-white rounded-xl font-semibold hover:bg-purple-600 transition-colors",children:"提出する"})]})]})})}),(0,a.jsx)(y,{children:I&&(0,a.jsx)(l.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:(0,a.jsxs)(l.E.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-2xl p-6 w-full max-w-xl max-h-[80vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:"動画提出"}),(0,a.jsx)("button",{onClick:()=>_(!1),className:"text-gray-500 hover:text-gray-700",children:(0,a.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"動画ファイルを選択 *"}),(0,a.jsx)("input",{type:"file",onChange:e=>{let s=e.target.files;s&&M(Array.from(s))},multiple:!0,accept:"video/*",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"対応ファイル: MP4, MOV, AVI, WMV など"})]}),E.length>0&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"選択された動画:"}),E.map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center",children:"\uD83C\uDFAC"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium",children:e.name}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:eB(e.size)})]})]}),(0,a.jsx)("button",{onClick:()=>M(e=>e.filter((e,t)=>t!==s)),className:"text-red-500 hover:text-red-700",children:"削除"})]},s))]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"コメント"}),(0,a.jsx)("textarea",{value:L,onChange:e=>F(e.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"動画についてのコメントや説明があれば記載してください"})]})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,a.jsx)("button",{onClick:()=>_(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"キャンセル"}),(0,a.jsx)("button",{onClick:eT,className:"px-6 py-2 bg-green-500 text-white rounded-xl font-semibold hover:bg-green-600 transition-colors",children:"提出する"})]})]})})}),(0,a.jsx)(y,{children:Y&&(0,a.jsx)(l.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)(l.E.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"bg-white rounded-2xl p-6 max-w-xl w-full max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("h3",{className:"text-xl font-bold text-gray-900",children:["initial"===es?"初稿":"修正","動画提出"]}),(0,a.jsx)("button",{onClick:()=>ee(!1),className:"text-gray-500 hover:text-gray-700",children:(0,a.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"動画タイプ"}),(0,a.jsxs)("div",{className:"flex space-x-4",children:[(0,a.jsxs)("label",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"radio",value:"initial",checked:"initial"===es,onChange:e=>et(e.target.value),className:"mr-2"}),(0,a.jsx)("span",{children:"初稿動画"})]}),(0,a.jsxs)("label",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"radio",value:"revised",checked:"revised"===es,onChange:e=>et(e.target.value),className:"mr-2"}),(0,a.jsx)("span",{children:"修正版動画"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"動画ファイル *"}),(0,a.jsx)("input",{type:"file",onChange:e=>{let s=e.target.files;s&&ei(Array.from(s))},multiple:!0,accept:"video/*",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"対応形式: MP4, MOV, AVI, WMV, MKV など"})]}),ea.length>0&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"選択された動画:"}),ea.map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center justify-between bg-gray-50 rounded-lg p-3",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center",children:"\uD83C\uDFAC"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:eB(e.size)})]})]}),(0,a.jsx)("button",{onClick:()=>ei(e=>e.filter((e,t)=>t!==s)),className:"text-red-500 hover:bg-red-50 px-2 py-1 rounded",children:"削除"})]},s))]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"説明・補足"}),(0,a.jsx)("textarea",{value:el,onChange:e=>er(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",rows:3,placeholder:"".concat("initial"===es?"初稿":"修正版","動画の説明や補足事項を入力してください")})]})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,a.jsx)("button",{onClick:()=>ee(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"キャンセル"}),(0,a.jsx)("button",{onClick:eI,className:"px-6 py-2 bg-green-500 text-white rounded-xl font-semibold hover:bg-green-600 transition-colors",disabled:0===ea.length,children:"提出する"})]})]})})}),(0,a.jsx)(y,{children:en&&eo&&(0,a.jsx)(l.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)(l.E.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"bg-white rounded-2xl p-6 max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:"コンテの詳細な修正指摘"}),(0,a.jsx)("button",{onClick:()=>ed(!1),className:"text-gray-500 hover:text-gray-700",children:(0,a.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"全体的なフィードバック *"}),(0,a.jsx)("textarea",{value:ex.overallFeedback,onChange:e=>em(s=>({...s,overallFeedback:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500",rows:3,placeholder:"コンテ全体に対するフィードバックを記入してください"})]}),(0,a.jsxs)("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[(0,a.jsx)("h4",{className:"font-semibold text-gray-800 mb-3",children:"\uD83C\uDFAF テーマについて"}),(0,a.jsxs)("div",{className:"mb-2",children:[(0,a.jsx)("label",{className:"block text-xs text-gray-600 mb-1",children:"現在のテーマ"}),(0,a.jsx)("div",{className:"px-3 py-2 bg-white border rounded text-sm",children:eo.conteData.overallTheme})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-gray-600 mb-1",children:"提案テーマ（任意）"}),(0,a.jsx)("input",{type:"text",value:(null===(t=ex.themeRevision)||void 0===t?void 0:t.suggestedTheme)||"",onChange:e=>em(s=>({...s,themeRevision:{...s.themeRevision,suggestedTheme:e.target.value}})),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-orange-500",placeholder:"新しいテーマの提案"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-gray-600 mb-1",children:"コメント"}),(0,a.jsx)("textarea",{value:(null===(r=ex.themeRevision)||void 0===r?void 0:r.comment)||"",onChange:e=>em(s=>({...s,themeRevision:{...s.themeRevision,comment:e.target.value}})),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-orange-500",rows:2,placeholder:"テーマについてのコメント"})]})]})]}),(0,a.jsxs)("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[(0,a.jsx)("h4",{className:"font-semibold text-gray-800 mb-3",children:"⏱️ 時間について"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-gray-600 mb-1",children:"現在の目標時間"}),(0,a.jsxs)("div",{className:"px-3 py-2 bg-white border rounded text-sm",children:[eo.conteData.targetDuration,"秒"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-gray-600 mb-1",children:"提案時間（任意）"}),(0,a.jsx)("input",{type:"number",value:(null===(n=ex.durationRevision)||void 0===n?void 0:n.suggestedDuration)||"",onChange:e=>em(s=>({...s,durationRevision:{...s.durationRevision,suggestedDuration:parseInt(e.target.value)||null}})),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-orange-500",placeholder:"秒",min:"15",max:"600"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-gray-600 mb-1",children:"コメント"}),(0,a.jsx)("textarea",{value:(null===(d=ex.durationRevision)||void 0===d?void 0:d.comment)||"",onChange:e=>em(s=>({...s,durationRevision:{...s.durationRevision,comment:e.target.value}})),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-orange-500",rows:2,placeholder:"時間についてのコメント"})]})]})]}),(0,a.jsxs)("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[(0,a.jsx)("h4",{className:"font-semibold text-gray-800 mb-3",children:"\uD83C\uDFAC シーン別修正点"}),(0,a.jsx)("div",{className:"space-y-4",children:ex.sceneRevisions.map((e,s)=>(0,a.jsxs)("div",{className:"bg-white rounded p-3 border",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsxs)("h5",{className:"font-medium text-sm",children:["シーン ",e.sceneNumber]}),(0,a.jsxs)("select",{value:e.priority,onChange:s=>eM(e.sceneId,"priority",s.target.value),className:"text-xs border border-gray-300 rounded px-2 py-1",children:[(0,a.jsx)("option",{value:"low",children:"優先度: 低"}),(0,a.jsx)("option",{value:"medium",children:"優先度: 中"}),(0,a.jsx)("option",{value:"high",children:"優先度: 高"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-gray-600 mb-1",children:"現在の内容"}),(0,a.jsx)("div",{className:"px-2 py-1 bg-gray-50 border rounded text-xs",children:e.currentValue})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-gray-600 mb-1",children:"提案内容（任意）"}),(0,a.jsx)("textarea",{value:e.suggestedValue,onChange:s=>eM(e.sceneId,"suggestedValue",s.target.value),className:"w-full px-2 py-1 text-xs border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-orange-500",rows:2,placeholder:"新しい内容の提案"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-gray-600 mb-1",children:"修正コメント"}),(0,a.jsx)("textarea",{value:e.comment,onChange:s=>eM(e.sceneId,"comment",s.target.value),className:"w-full px-2 py-1 text-xs border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-orange-500",rows:2,placeholder:"このシーンの修正点"})]})]})]},e.sceneId))})]}),(0,a.jsxs)("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[(0,a.jsx)("h4",{className:"font-semibold text-gray-800 mb-3",children:"\uD83D\uDCAC キーメッセージ修正"}),(0,a.jsx)("div",{className:"space-y-3",children:ex.keyMessageRevisions.map((e,s)=>(0,a.jsxs)("div",{className:"bg-white rounded p-3 border",children:[(0,a.jsxs)("div",{className:"font-medium text-sm mb-2",children:["メッセージ ",e.index+1]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-gray-600 mb-1",children:"現在のメッセージ"}),(0,a.jsx)("div",{className:"px-2 py-1 bg-gray-50 border rounded text-xs",children:e.currentMessage})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-gray-600 mb-1",children:"提案メッセージ（任意）"}),(0,a.jsx)("input",{type:"text",value:e.suggestedMessage,onChange:s=>eL(e.index,"suggestedMessage",s.target.value),className:"w-full px-2 py-1 text-xs border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-orange-500",placeholder:"新しいメッセージの提案"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-gray-600 mb-1",children:"修正コメント"}),(0,a.jsx)("textarea",{value:e.comment,onChange:s=>eL(e.index,"comment",s.target.value),className:"w-full px-2 py-1 text-xs border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-orange-500",rows:2,placeholder:"このメッセージの修正点"})]})]})]},e.index))})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200",children:[(0,a.jsx)("button",{onClick:()=>ed(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"キャンセル"}),(0,a.jsx)("button",{onClick:eE,className:"px-6 py-2 bg-orange-500 text-white rounded-xl font-semibold hover:bg-orange-600 transition-colors",children:"修正指摘を送信"})]})]})})}),(0,a.jsx)(y,{children:eu&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 z-50",onClick:()=>eg(!1)}),(0,a.jsxs)(l.E.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"tween",duration:.3},className:"fixed top-0 right-0 h-full w-full md:w-96 bg-white shadow-2xl z-50 overflow-y-auto",children:[(0,a.jsxs)("div",{className:"p-4 border-b border-gray-200 sticky top-0 bg-white",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("h3",{className:"text-lg font-bold text-gray-900 flex items-center",children:[(0,a.jsx)("span",{className:"mr-2",children:"\uD83D\uDCC1"}),"提出物一覧"]}),(0,a.jsx)("button",{onClick:()=>eg(!1),className:"text-gray-500 hover:text-gray-700 p-1",children:(0,a.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,a.jsxs)("div",{className:"mt-4 flex space-x-2",children:[(0,a.jsx)("button",{onClick:()=>eh("all"),className:"px-3 py-1 text-xs rounded-full font-medium ".concat("all"===ep?"bg-indigo-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"すべて"}),(0,a.jsx)("button",{onClick:()=>eh("proposals"),className:"px-3 py-1 text-xs rounded-full font-medium ".concat("proposals"===ep?"bg-blue-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"構成案"}),(0,a.jsx)("button",{onClick:()=>eh("conte"),className:"px-3 py-1 text-xs rounded-full font-medium ".concat("conte"===ep?"bg-purple-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"コンテ"}),(0,a.jsx)("button",{onClick:()=>eh("videos"),className:"px-3 py-1 text-xs rounded-full font-medium ".concat("videos"===ep?"bg-green-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"動画"})]})]}),(0,a.jsx)("div",{className:"p-4",children:0===ez().length?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("div",{className:"text-4xl mb-2",children:"\uD83D\uDCED"}),(0,a.jsx)("p",{className:"text-gray-500 text-sm",children:"all"===ep?"提出物がありません":"フィルターに該当する提出物がありません"})]}):(0,a.jsx)("div",{className:"space-y-3",children:ez().map(e=>(0,a.jsxs)("div",{className:"border border-gray-200 rounded-lg p-3 hover:border-indigo-300 hover:bg-indigo-50 cursor-pointer transition-all",onClick:()=>ev(e),children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"text-lg",children:"proposal"===e.type?"\uD83D\uDCDD":"conte"===e.type?"\uD83D\uDCCB":"\uD83C\uDFAC"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-sm text-gray-900",children:e.title}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:eP(e.submittedAt)})]})]}),(0,a.jsx)("div",{className:"text-right",children:(0,a.jsx)("span",{className:"text-xs px-2 py-1 rounded ".concat("proposal"===e.type?"bg-blue-100 text-blue-700":"conte"===e.type?"bg-purple-100 text-purple-700":"bg-green-100 text-green-700"),children:"proposal"===e.type?"構成案":"conte"===e.type?"コンテ":"動画"})})]}),(0,a.jsxs)("div",{className:"text-xs text-gray-600",children:["proposal"===e.type&&e.data.concept&&(0,a.jsx)("p",{className:"truncate",children:e.data.concept}),"conte"===e.type&&e.data.overallTheme&&(0,a.jsxs)("p",{className:"truncate",children:["テーマ: ",e.data.overallTheme]}),"video"===e.type&&e.data.description&&(0,a.jsx)("p",{className:"truncate",children:e.data.description})]}),e.message.attachments&&(0,a.jsxs)("div",{className:"mt-2 text-xs text-gray-500",children:["\uD83D\uDCCE ",e.message.attachments.length,"個のファイル"]})]},e.id))})})]})]})}),(0,a.jsx)(y,{children:eb&&(0,a.jsx)(l.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-60 p-4",children:(0,a.jsxs)(l.E.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"bg-white rounded-2xl p-6 max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("span",{className:"text-2xl",children:"proposal"===eb.type?"\uD83D\uDCDD":"conte"===eb.type?"\uD83D\uDCCB":"\uD83C\uDFAC"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:eb.title}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:eP(eb.submittedAt)})]})]}),(0,a.jsx)("button",{onClick:()=>ev(null),className:"text-gray-500 hover:text-gray-700",children:(0,a.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,a.jsxs)("div",{className:"space-y-4",children:["proposal"===eb.type&&eb.data&&(0,a.jsx)("div",{className:"space-y-3",children:(0,a.jsxs)("div",{className:"bg-blue-50 rounded p-4",children:[(0,a.jsx)("h4",{className:"font-semibold text-blue-800 mb-2",children:"\uD83D\uDCCB 構成案詳細"}),(0,a.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"タイトル:"})," ",eb.data.title]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"コンセプト:"})," ",eb.data.concept]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"構成:"})," ",eb.data.structure]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"成果物:"})," ",eb.data.deliverables]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"タイムライン:"})," ",eb.data.timeline]})]})]})}),"conte"===eb.type&&eb.data&&(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"bg-purple-50 rounded p-4",children:[(0,a.jsx)("h4",{className:"font-semibold text-purple-800 mb-2",children:"\uD83D\uDCCB コンテ詳細"}),"original"===eb.data.format?(0,a.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"テーマ:"})," ",eb.data.overallTheme]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"目標時間:"})," ",eb.data.targetDuration,"秒"]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"シーン数:"})," ",(null===(o=eb.data.scenes)||void 0===o?void 0:o.length)||0,"シーン"]}),eb.data.keyMessages&&(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"キーメッセージ:"}),(0,a.jsx)("ul",{className:"list-disc list-inside ml-2 mt-1",children:eb.data.keyMessages.map((e,s)=>(0,a.jsx)("li",{children:e},s))})]})]}):(0,a.jsx)("div",{className:"text-sm",children:(0,a.jsx)("strong",{children:"ドキュメント形式で提出"})})]}),"original"===eb.data.format&&eb.data.scenes&&(0,a.jsxs)("div",{className:"bg-white border rounded p-4",children:[(0,a.jsx)("h4",{className:"font-semibold text-gray-800 mb-3",children:"\uD83C\uDFAC シーン構成"}),(0,a.jsx)("div",{className:"space-y-3",children:eb.data.scenes.map((e,s)=>(0,a.jsxs)("div",{className:"border border-gray-200 rounded p-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsxs)("h5",{className:"font-medium text-sm",children:["シーン ",e.sceneNumber]}),(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:[e.duration,"秒 • ",e.cameraAngle]})]}),(0,a.jsx)("p",{className:"text-sm text-gray-700",children:e.description}),e.notes&&(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["備考: ",e.notes]})]},e.id))})]})]}),"video"===eb.type&&eb.data&&(0,a.jsx)("div",{className:"space-y-3",children:(0,a.jsxs)("div",{className:"bg-green-50 rounded p-4",children:[(0,a.jsx)("h4",{className:"font-semibold text-green-800 mb-2",children:"\uD83C\uDFAC 動画詳細"}),(0,a.jsxs)("div",{className:"space-y-2 text-sm",children:[eb.data.type&&(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"タイプ:"})," ","initial"===eb.data.type?"初稿":"修正版"]}),eb.data.description&&(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"説明:"})," ",eb.data.description]}),eb.data.submittedAt&&(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"提出日:"})," ",eP(eb.data.submittedAt)]})]})]})}),eb.message.attachments&&(0,a.jsxs)("div",{className:"bg-gray-50 rounded p-4",children:[(0,a.jsx)("h4",{className:"font-semibold text-gray-800 mb-3",children:"\uD83D\uDCCE 添付ファイル"}),(0,a.jsx)("div",{className:"space-y-2",children:eb.message.attachments.map(e=>(0,a.jsxs)("div",{className:"flex items-center space-x-3 bg-white rounded p-2",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-gray-100 rounded flex items-center justify-center",children:e.fileType.startsWith("video/")?"\uD83C\uDFAC":e.fileType.startsWith("image/")?"\uD83D\uDDBC️":"\uD83D\uDCC4"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:"font-medium text-sm",children:e.fileName}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:eB(e.fileSize)})]}),e.fileType.startsWith("video/")&&(0,a.jsx)("video",{src:e.fileUrl,controls:!0,className:"w-32 h-20 object-cover rounded"})]},e.id))})]})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200 mt-6",children:[(0,a.jsx)("button",{onClick:()=>ev(null),className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"閉じる"}),(null==c?void 0:c.role)==="CLIENT"&&"conte"===eb.type&&"original"===eb.data.format&&(0,a.jsx)("button",{onClick:()=>{e_(eb.message),ev(null),eg(!1)},className:"px-4 py-2 bg-orange-500 text-white rounded-lg font-medium hover:bg-orange-600 transition-colors",children:"\uD83D\uDD0D 修正指摘"})]})]})})})]})}},1163:function(e,s,t){e.exports=t(3079)}},function(e){e.O(0,[8083,1664,2888,9774,179],function(){return e(e.s=541)}),_N_E=e.O()}]);