(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8250],{541:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/project-chat/[projectId]",function(){return s(1104)}])},1104:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return w}});var r=s(5893),l=s(7294),a=s(8083),i=s(5364),n=s(6681),c=s(8868),o=s(240),d=s(3243),x=s(6014);class m extends l.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=t.offsetParent,s=(0,d.R)(e)&&e.offsetWidth||0,r=this.props.sizeRef.current;r.height=t.offsetHeight||0,r.width=t.offsetWidth||0,r.top=t.offsetTop,r.left=t.offsetLeft,r.right=s-r.width-r.left}return null}componentDidUpdate(){}render(){return this.props.children}}function u({children:e,isPresent:t,anchorX:s,root:a}){let i=(0,l.useId)(),n=(0,l.useRef)(null),c=(0,l.useRef)({width:0,height:0,top:0,left:0,right:0}),{nonce:o}=(0,l.useContext)(x._);return(0,l.useInsertionEffect)(()=>{let{width:e,height:r,top:l,left:d,right:x}=c.current;if(t||!n.current||!e||!r)return;let m="left"===s?`left: ${d}`:`right: ${x}`;n.current.dataset.motionPopId=i;let u=document.createElement("style");o&&(u.nonce=o);let p=a??document.head;return p.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${e}px !important;
            height: ${r}px !important;
            ${m}px !important;
            top: ${l}px !important;
          }
        `),()=>{p.removeChild(u),p.contains(u)&&p.removeChild(u)}},[t]),(0,r.jsx)(m,{isPresent:t,childRef:n,sizeRef:c,children:l.cloneElement(e,{ref:n})})}let p=({children:e,initial:t,isPresent:s,onExitComplete:a,custom:i,presenceAffectsLayout:c,mode:d,anchorX:x,root:m})=>{let p=(0,n.h)(h),g=(0,l.useId)(),f=!0,y=(0,l.useMemo)(()=>(f=!1,{id:g,initial:t,isPresent:s,custom:i,onExitComplete:e=>{for(let t of(p.set(e,!0),p.values()))if(!t)return;a&&a()},register:e=>(p.set(e,!1),()=>p.delete(e))}),[s,p,a]);return c&&f&&(y={...y}),(0,l.useMemo)(()=>{p.forEach((e,t)=>p.set(t,!1))},[s]),l.useEffect(()=>{s||p.size||!a||a()},[s]),"popLayout"===d&&(e=(0,r.jsx)(u,{isPresent:s,anchorX:x,root:m,children:e})),(0,r.jsx)(o.O.Provider,{value:y,children:e})};function h(){return new Map}var g=s(5947);let f=e=>e.key||"";function y(e){let t=[];return l.Children.forEach(e,e=>{(0,l.isValidElement)(e)&&t.push(e)}),t}let b=({children:e,custom:t,initial:s=!0,onExitComplete:a,presenceAffectsLayout:o=!0,mode:d="sync",propagate:x=!1,anchorX:m="left",root:u})=>{let[h,b]=(0,g.oO)(x),j=(0,l.useMemo)(()=>y(e),[e]),N=x&&!h?[]:j.map(f),v=(0,l.useRef)(!0),w=(0,l.useRef)(j),C=(0,n.h)(()=>new Map),[D,k]=(0,l.useState)(j),[A,E]=(0,l.useState)(j);(0,c.L)(()=>{v.current=!1,w.current=j;for(let e=0;e<A.length;e++){let t=f(A[e]);N.includes(t)?C.delete(t):!0!==C.get(t)&&C.set(t,!1)}},[A,N.length,N.join("-")]);let S=[];if(j!==D){let e=[...j];for(let t=0;t<A.length;t++){let s=A[t],r=f(s);N.includes(r)||(e.splice(t,0,s),S.push(s))}return"wait"===d&&S.length&&(e=S),E(y(e)),k(j),null}let{forceRender:I}=(0,l.useContext)(i.p);return(0,r.jsx)(r.Fragment,{children:A.map(e=>{let l=f(e),i=(!x||!!h)&&(j===A||N.includes(l));return(0,r.jsx)(p,{isPresent:i,initial:(!v.current||!!s)&&void 0,custom:t,presenceAffectsLayout:o,mode:d,root:u,onExitComplete:i?void 0:()=>{if(!C.has(l))return;C.set(l,!0);let e=!0;C.forEach(t=>{t||(e=!1)}),e&&(I?.(),E(w.current),x&&b?.(),a&&a())},anchorX:m,children:e},l)})})};var j=s(1163),N=s(1664),v=s.n(N),w=()=>{var e;let[t,s]=(0,l.useState)(null),[i,n]=(0,l.useState)(null),[c,o]=(0,l.useState)([]),[d,x]=(0,l.useState)(""),[m,u]=(0,l.useState)(!0),[p,h]=(0,l.useState)(""),[g,f]=(0,l.useState)(!1),[y,N]=(0,l.useState)("format"),[w,C]=(0,l.useState)([]),[D,k]=(0,l.useState)(!1),[A,E]=(0,l.useState)([]),[S,I]=(0,l.useState)(""),T=(0,l.useRef)(null),L=(0,j.useRouter)(),{projectId:P}=L.query,[R,M]=(0,l.useState)({title:"",concept:"",structure:"",deliverables:"",timeline:""});(0,l.useEffect)(()=>{{let e=localStorage.getItem("user"),t=localStorage.getItem("token");if(!e||!t){L.push("/login");return}s(JSON.parse(e)),P&&(_(),z())}},[L,P]);let _=async()=>{try{u(!0),n({id:P,title:"美容コスメ PR キャンペーン",status:"IN_PROGRESS",client:{id:"client-1",displayName:"田中太郎",companyName:"株式会社ビューティコスメ"},matchedInfluencer:{id:"influencer-1",displayName:"美容系インフルエンサー 田中美咲"},progress:{currentPhase:"構成案レビュー",overallProgress:65,milestones:[{id:"1",title:"プロジェクト開始",status:"completed",completedAt:"2024-01-15T09:00:00Z"},{id:"2",title:"初回打ち合わせ",status:"completed",completedAt:"2024-01-16T14:00:00Z"},{id:"3",title:"構成案提出",status:"completed",completedAt:"2024-01-18T16:30:00Z"},{id:"4",title:"構成案レビュー",status:"in_progress"},{id:"5",title:"動画制作",status:"pending"},{id:"6",title:"最終確認・納品",status:"pending"}],nextAction:{id:"action-1",title:"構成案の修正対応",description:"フィードバックを受けて構成案を修正し、再提出してください",dueDate:"2024-01-25T23:59:59Z",assignee:"influencer",priority:"high",status:"in_progress"}}})}catch(e){console.error("Error fetching project:",e),h("プロジェクト情報の取得に失敗しました。")}finally{u(!1)}},z=async()=>{try{o([{id:"1",content:"こんにちは！このプロジェクトでよろしくお願いします。",createdAt:"2024-01-15T10:00:00Z",senderId:"client-1",messageType:"text",sender:{id:"client-1",role:"CLIENT",displayName:"田中太郎（株式会社ビューティコスメ）"}},{id:"2",content:"こちらこそよろしくお願いします！さっそく構成案を作成させていただきます。",createdAt:"2024-01-15T10:30:00Z",senderId:"influencer-1",messageType:"text",sender:{id:"influencer-1",role:"INFLUENCER",displayName:"田中美咲"}}])}catch(e){console.error("Error fetching messages:",e)}},O=()=>{var e;null===(e=T.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})};(0,l.useEffect)(()=>{O()},[c]);let F=async()=>{if(!d.trim()||!t||!i)return;let e={id:Date.now().toString(),content:d,createdAt:new Date().toISOString(),senderId:t.id,messageType:"text",sender:{id:t.id,role:t.role,displayName:"CLIENT"===t.role?i.client.displayName:i.matchedInfluencer.displayName}};o(t=>[...t,e]),x("")},B=async()=>{if(t&&i){if("format"===y){if(!R.title||!R.concept||!R.structure){alert("必須項目を入力してください。");return}let e={id:Date.now().toString(),content:"構成案を提出しました",createdAt:new Date().toISOString(),senderId:t.id,messageType:"proposal",sender:{id:t.id,role:t.role,displayName:"CLIENT"===t.role?i.client.displayName:i.matchedInfluencer.displayName},proposalData:{id:Date.now().toString(),...R,status:"submitted"}};o(t=>[...t,e]),M({title:"",concept:"",structure:"",deliverables:"",timeline:""})}else{if(0===w.length){alert("アップロードするファイルを選択してください。");return}let e={id:Date.now().toString(),content:"ファイルを送信しました",createdAt:new Date().toISOString(),senderId:t.id,messageType:"file",sender:{id:t.id,role:t.role,displayName:"CLIENT"===t.role?i.client.displayName:i.matchedInfluencer.displayName},attachments:w.map((e,t)=>({id:"".concat(Date.now(),"-").concat(t),fileName:e.name,fileType:e.type,fileUrl:URL.createObjectURL(e),fileSize:e.size}))};o(t=>[...t,e]),C([])}f(!1)}},U=async()=>{if(!t||!i)return;if(0===A.length){alert("アップロードする動画ファイルを選択してください。");return}let e={id:Date.now().toString(),content:S||"動画を提出しました",createdAt:new Date().toISOString(),senderId:t.id,messageType:"video",sender:{id:t.id,role:t.role,displayName:"CLIENT"===t.role?i.client.displayName:i.matchedInfluencer.displayName},attachments:A.map((e,t)=>({id:"".concat(Date.now(),"-").concat(t),fileName:e.name,fileType:e.type,fileUrl:URL.createObjectURL(e),fileSize:e.size}))};o(t=>[...t,e]),E([]),I(""),k(!1)},W=e=>{if(0===e)return"0 Bytes";let t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]},$=e=>new Date(e).toLocaleString("ja-JP",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),Z=e=>new Date(e).toLocaleString("ja-JP",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),V=e=>{let t=new Date(e),s=new Date;return Math.ceil((t.getTime()-s.getTime())/864e5)};return m?(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-gray-600",children:"プロジェクトを読み込み中..."})]})}):(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50",children:[(0,r.jsx)("div",{className:"bg-white/80 backdrop-blur-xl border-b border-gray-200 sticky top-0 z-10",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-4 flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)(v(),{href:"/projects",className:"flex items-center space-x-2 px-4 py-2 bg-white/80 backdrop-blur-xl rounded-xl shadow-lg hover:shadow-xl transition-all text-gray-700 hover:text-blue-600",children:[(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),(0,r.jsx)("span",{className:"font-medium",children:"プロジェクトに戻る"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"プロジェクトチャット"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:null==i?void 0:i.title})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("span",{className:"text-gray-700",children:null==t?void 0:t.email}),(0,r.jsx)(v(),{href:"/dashboard",className:"px-4 py-2 text-gray-600 hover:text-blue-600 transition-colors",children:"ダッシュボード"})]})]})}),(0,r.jsxs)("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[p&&(0,r.jsx)(a.E.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-xl mb-6",children:p}),i&&(0,r.jsx)(a.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},className:"bg-white/80 backdrop-blur-xl border border-gray-200 rounded-3xl p-6 shadow-xl mb-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:i.title}),(0,r.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[(0,r.jsxs)("span",{children:["企業: ",i.client.companyName]}),(0,r.jsx)("span",{children:"•"}),(0,r.jsxs)("span",{children:["インフルエンサー: ",i.matchedInfluencer.displayName]})]})]}),(0,r.jsx)("div",{className:"flex space-x-2",children:(null==t?void 0:t.role)==="INFLUENCER"&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("button",{onClick:()=>f(!0),className:"px-4 py-2 bg-blue-500 text-white rounded-xl font-semibold hover:bg-blue-600 transition-colors",children:"\uD83D\uDCDD 構成案提出"}),(0,r.jsx)("button",{onClick:()=>k(!0),className:"px-4 py-2 bg-green-500 text-white rounded-xl font-semibold hover:bg-green-600 transition-colors",children:"\uD83C\uDFAC 動画提出"})]})})]})}),(null==i?void 0:i.progress)&&(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[(0,r.jsxs)(a.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.1},className:"bg-white/80 backdrop-blur-xl border border-gray-200 rounded-2xl p-6 shadow-xl",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsxs)("h3",{className:"text-lg font-bold text-gray-900 flex items-center",children:[(0,r.jsx)("span",{className:"mr-2",children:"\uD83D\uDCCA"}),"プロジェクト進捗"]}),(0,r.jsxs)("div",{className:"text-sm text-gray-600",children:[i.progress.overallProgress,"% 完了"]})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("div",{className:"flex items-center justify-between mb-2",children:(0,r.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:["現在のフェーズ: ",i.progress.currentPhase]})}),(0,r.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,r.jsx)("div",{className:"bg-gradient-to-r from-blue-500 to-green-500 h-2 rounded-full transition-all duration-300",style:{width:"".concat(i.progress.overallProgress,"%")}})})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:"マイルストーン"}),i.progress.milestones.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"w-4 h-4 rounded-full flex-shrink-0 ".concat("completed"===e.status?"bg-green-500":"in_progress"===e.status?"bg-blue-500":"bg-gray-300"),children:"completed"===e.status&&(0,r.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("div",{className:"text-sm ".concat("completed"===e.status?"text-green-700 font-medium":"in_progress"===e.status?"text-blue-700 font-medium":"text-gray-600"),children:e.title}),e.completedAt&&(0,r.jsxs)("div",{className:"text-xs text-gray-500",children:["完了: ",Z(e.completedAt)]})]})]},e.id))]})]}),(0,r.jsxs)(a.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2},className:"bg-white/80 backdrop-blur-xl border border-gray-200 rounded-2xl p-6 shadow-xl",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsxs)("h3",{className:"text-lg font-bold text-gray-900 flex items-center",children:[(0,r.jsx)("span",{className:"mr-2",children:"\uD83C\uDFAF"}),"ネクストアクション"]}),(0,r.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-semibold ".concat((e=>{switch(e){case"high":return"bg-red-100 text-red-800";case"medium":return"bg-yellow-100 text-yellow-800";case"low":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}})(i.progress.nextAction.priority)),children:"high"===i.progress.nextAction.priority?"高優先度":"medium"===i.progress.nextAction.priority?"中優先度":"低優先度"})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-bold text-gray-900 mb-2",children:i.progress.nextAction.title}),(0,r.jsx)("p",{className:"text-sm text-gray-700 mb-3",children:i.progress.nextAction.description})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:"期日"}),(0,r.jsxs)("div",{className:"text-sm font-medium ".concat(0>V(i.progress.nextAction.dueDate)?"text-red-600":2>=V(i.progress.nextAction.dueDate)?"text-orange-600":"text-gray-900"),children:[new Date(i.progress.nextAction.dueDate).toLocaleDateString("ja-JP",{year:"numeric",month:"short",day:"numeric"}),(0,r.jsx)("div",{className:"text-xs text-gray-500",children:0>V(i.progress.nextAction.dueDate)?"".concat(Math.abs(V(i.progress.nextAction.dueDate)),"日遅延"):0===V(i.progress.nextAction.dueDate)?"今日が期日":"あと".concat(V(i.progress.nextAction.dueDate),"日")})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:"担当者"}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("div",{className:"w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold text-white ".concat("client"===i.progress.nextAction.assignee?"bg-blue-500":"bg-purple-500"),children:"client"===i.progress.nextAction.assignee?i.client.displayName.charAt(0):i.matchedInfluencer.displayName.charAt(0)}),(0,r.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"client"===i.progress.nextAction.assignee?i.client.displayName:i.matchedInfluencer.displayName}),i.progress.nextAction.assignee===(null==t?void 0:null===(e=t.role)||void 0===e?void 0:e.toLowerCase())&&(0,r.jsx)("span",{className:"px-2 py-1 bg-yellow-100 text-yellow-800 text-xs rounded-full font-medium",children:"あなた"})]})]})]}),(0,r.jsx)("div",{className:"pt-2",children:(0,r.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-semibold ".concat((e=>{switch(e){case"completed":return"bg-green-100 text-green-800";case"in_progress":return"bg-blue-100 text-blue-800";case"pending":default:return"bg-gray-100 text-gray-800";case"overdue":return"bg-red-100 text-red-800"}})(i.progress.nextAction.status)),children:"pending"===i.progress.nextAction.status?"未着手":"in_progress"===i.progress.nextAction.status?"進行中":"completed"===i.progress.nextAction.status?"完了":"overdue"===i.progress.nextAction.status?"期限超過":i.progress.nextAction.status})})]})]})]}),(0,r.jsxs)(a.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.1},className:"bg-white/80 backdrop-blur-xl border border-gray-200 rounded-3xl shadow-xl overflow-hidden",children:[(0,r.jsxs)("div",{className:"h-96 overflow-y-auto p-6 space-y-4",children:[c.map(e=>(0,r.jsx)(a.E.div,{initial:{opacity:0,x:e.senderId===(null==t?void 0:t.id)?20:-20},animate:{opacity:1,x:0},className:"flex ".concat(e.senderId===(null==t?void 0:t.id)?"justify-end":"justify-start"),children:(0,r.jsxs)("div",{className:"max-w-xs lg:max-w-md px-4 py-3 rounded-2xl ".concat(e.senderId===(null==t?void 0:t.id)?"bg-blue-500 text-white":"bg-gray-100 text-gray-900"),children:[(0,r.jsx)("div",{className:"text-xs mb-1 opacity-75",children:e.sender.displayName}),"text"===e.messageType&&(0,r.jsx)("p",{className:"text-sm",children:e.content}),"proposal"===e.messageType&&e.proposalData&&(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("p",{className:"text-sm font-semibold",children:["\uD83D\uDCDD ",e.content]}),(0,r.jsxs)("div",{className:"text-xs space-y-1 bg-black/10 rounded p-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{children:"タイトル:"})," ",e.proposalData.title]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{children:"コンセプト:"})," ",e.proposalData.concept]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{children:"構成:"})," ",e.proposalData.structure]})]})]}),"file"===e.messageType&&e.attachments&&(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("p",{className:"text-sm font-semibold",children:["\uD83D\uDCCE ",e.content]}),e.attachments.map(e=>(0,r.jsxs)("div",{className:"text-xs bg-black/10 rounded p-2",children:[(0,r.jsx)("div",{className:"font-medium",children:e.fileName}),(0,r.jsx)("div",{className:"opacity-75",children:W(e.fileSize)})]},e.id))]}),"video"===e.messageType&&e.attachments&&(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("p",{className:"text-sm font-semibold",children:["\uD83C\uDFAC ",e.content]}),e.attachments.map(e=>(0,r.jsx)("div",{className:"text-xs bg-black/10 rounded p-2",children:e.fileType.startsWith("video/")?(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("video",{controls:!0,className:"w-full max-w-xs rounded",src:e.fileUrl,children:"お使いのブラウザは動画再生に対応していません。"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-medium",children:e.fileName}),(0,r.jsx)("div",{className:"opacity-75",children:W(e.fileSize)})]})]}):(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-medium",children:e.fileName}),(0,r.jsx)("div",{className:"opacity-75",children:W(e.fileSize)})]})},e.id))]}),(0,r.jsx)("div",{className:"text-xs mt-2 opacity-75",children:$(e.createdAt)})]})},e.id)),(0,r.jsx)("div",{ref:T})]}),(0,r.jsx)("div",{className:"border-t border-gray-200 p-4",children:(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)("input",{type:"text",value:d,onChange:e=>x(e.target.value),onKeyPress:e=>"Enter"===e.key&&F(),placeholder:"メッセージを入力...",className:"flex-1 px-4 py-2 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,r.jsx)("button",{onClick:F,disabled:!d.trim(),className:"px-6 py-2 bg-blue-500 text-white rounded-xl font-semibold hover:bg-blue-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"送信"})]})})]})]}),(0,r.jsx)(b,{children:g&&(0,r.jsx)(a.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:(0,r.jsxs)(a.E.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-2xl p-6 w-full max-w-2xl max-h-[80vh] overflow-y-auto",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:"構成案提出"}),(0,r.jsx)("button",{onClick:()=>f(!1),className:"text-gray-500 hover:text-gray-700",children:(0,r.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-700 mb-3",children:"提出方法を選択してください"}),(0,r.jsxs)("div",{className:"flex space-x-4",children:[(0,r.jsx)("button",{onClick:()=>N("format"),className:"px-4 py-2 rounded-xl font-semibold transition-all ".concat("format"===y?"bg-blue-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"\uD83D\uDCCB 指定フォーマット"}),(0,r.jsx)("button",{onClick:()=>N("upload"),className:"px-4 py-2 rounded-xl font-semibold transition-all ".concat("upload"===y?"bg-blue-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"\uD83D\uDCCE ファイルアップロード"})]})]}),"format"===y?(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"構成案タイトル *"}),(0,r.jsx)("input",{type:"text",value:R.title,onChange:e=>M({...R,title:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"例: 新商品PR動画構成案"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"コンセプト *"}),(0,r.jsx)("textarea",{value:R.concept,onChange:e=>M({...R,concept:e.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"動画のコンセプトや狙いを記載してください"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"構成・シナリオ *"}),(0,r.jsx)("textarea",{value:R.structure,onChange:e=>M({...R,structure:e.target.value}),rows:5,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"動画の構成やシナリオを時系列で記載してください"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"成果物"}),(0,r.jsx)("textarea",{value:R.deliverables,onChange:e=>M({...R,deliverables:e.target.value}),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"提供する動画の仕様や追加成果物"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"スケジュール"}),(0,r.jsx)("textarea",{value:R.timeline,onChange:e=>M({...R,timeline:e.target.value}),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"制作スケジュールを記載してください"})]})]}):(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ファイルを選択"}),(0,r.jsx)("input",{type:"file",onChange:e=>{let t=e.target.files;t&&C(Array.from(t))},multiple:!0,accept:".doc,.docx,.pdf,.ppt,.pptx",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"対応ファイル: Word(.doc, .docx), PDF, PowerPoint(.ppt, .pptx)"})]}),w.length>0&&(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"選択されたファイル:"}),w.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded-lg",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-sm font-medium",children:e.name}),(0,r.jsx)("div",{className:"text-xs text-gray-500",children:W(e.size)})]}),(0,r.jsx)("button",{onClick:()=>C(e=>e.filter((e,s)=>s!==t)),className:"text-red-500 hover:text-red-700",children:"削除"})]},t))]})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,r.jsx)("button",{onClick:()=>f(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"キャンセル"}),(0,r.jsx)("button",{onClick:B,className:"px-6 py-2 bg-blue-500 text-white rounded-xl font-semibold hover:bg-blue-600 transition-colors",children:"提出する"})]})]})})}),(0,r.jsx)(b,{children:D&&(0,r.jsx)(a.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:(0,r.jsxs)(a.E.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-2xl p-6 w-full max-w-xl max-h-[80vh] overflow-y-auto",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:"動画提出"}),(0,r.jsx)("button",{onClick:()=>k(!1),className:"text-gray-500 hover:text-gray-700",children:(0,r.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"動画ファイルを選択 *"}),(0,r.jsx)("input",{type:"file",onChange:e=>{let t=e.target.files;t&&E(Array.from(t))},multiple:!0,accept:"video/*",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"対応ファイル: MP4, MOV, AVI, WMV など"})]}),A.length>0&&(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"選択された動画:"}),A.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center",children:"\uD83C\uDFAC"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-sm font-medium",children:e.name}),(0,r.jsx)("div",{className:"text-xs text-gray-500",children:W(e.size)})]})]}),(0,r.jsx)("button",{onClick:()=>E(e=>e.filter((e,s)=>s!==t)),className:"text-red-500 hover:text-red-700",children:"削除"})]},t))]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"コメント"}),(0,r.jsx)("textarea",{value:S,onChange:e=>I(e.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"動画についてのコメントや説明があれば記載してください"})]})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,r.jsx)("button",{onClick:()=>k(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"キャンセル"}),(0,r.jsx)("button",{onClick:U,className:"px-6 py-2 bg-green-500 text-white rounded-xl font-semibold hover:bg-green-600 transition-colors",children:"提出する"})]})]})})})]})}},1163:function(e,t,s){e.exports=s(3079)}},function(e){e.O(0,[8083,1664,2888,9774,179],function(){return e(e.s=541)}),_N_E=e.O()}]);