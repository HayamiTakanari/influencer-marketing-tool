(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5961],{7585:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/achievements",function(){return s(8281)}])},8281:function(e,t,s){"use strict";s.r(t);var r=s(5893),a=s(7294),i=s(5841),n=s(1163),l=s(6635);t.default=()=>{var e,t;let[s,o]=(0,a.useState)([]),[c,d]=(0,a.useState)(null),[u,m]=(0,a.useState)(!0),[p,x]=(0,a.useState)(""),[b,g]=(0,a.useState)(!1),[h,f]=(0,a.useState)(null),v=(0,n.useRouter)(),[y,j]=(0,a.useState)({projectName:"",brandName:"",purpose:"SALES",platform:"INSTAGRAM",description:"",metrics:{views:0,likes:0,shares:0,comments:0,conversions:0,reach:0,impressions:0},budget:0,duration:"",imageUrl:"",link:""}),N={SALES:"売上目的",LEAD_GEN:"集客目的",AWARENESS:"認知拡大目的",BRAND_IMAGE:"ブランドイメージ向上",ENGAGEMENT:"エンゲージメント向上"},w={INSTAGRAM:"Instagram",YOUTUBE:"YouTube",TIKTOK:"TikTok",TWITTER:"Twitter"};(0,a.useEffect)(()=>{let e=localStorage.getItem("user");if(!e){v.push("/login");return}if("INFLUENCER"!==JSON.parse(e).role){v.push("/dashboard");return}k()},[v]);let k=async()=>{try{m(!0);let[e,t]=await Promise.all([(0,l.mT)(),(0,l.UZ)()]);o(e.achievements||[]),d(t)}catch(e){console.error("Error fetching achievements:",e),x("実績データの取得に失敗しました。")}finally{m(!1)}},E=async e=>{e.preventDefault();try{let e={...y,metrics:Object.fromEntries(Object.entries(y.metrics).filter(e=>{let[t,s]=e;return s>0})),budget:y.budget>0?y.budget:void 0,duration:y.duration||void 0,imageUrl:y.imageUrl||void 0,link:y.link||void 0};h?await (0,l.u$)(h.id,e):await (0,l.Zx)(e),g(!1),f(null),T(),k()}catch(e){console.error("Error saving achievement:",e),x("実績の保存に失敗しました。")}},S=e=>{var t,s,r,a,i,n,l;f(e),j({projectName:e.projectName,brandName:e.brandName,purpose:e.purpose,platform:e.platform,description:e.description||"",metrics:{views:(null===(t=e.metrics)||void 0===t?void 0:t.views)||0,likes:(null===(s=e.metrics)||void 0===s?void 0:s.likes)||0,shares:(null===(r=e.metrics)||void 0===r?void 0:r.shares)||0,comments:(null===(a=e.metrics)||void 0===a?void 0:a.comments)||0,conversions:(null===(i=e.metrics)||void 0===i?void 0:i.conversions)||0,reach:(null===(n=e.metrics)||void 0===n?void 0:n.reach)||0,impressions:(null===(l=e.metrics)||void 0===l?void 0:l.impressions)||0},budget:e.budget||0,duration:e.duration||"",imageUrl:e.imageUrl||"",link:e.link||""}),g(!0)},C=async e=>{if(confirm("この実績を削除しますか？"))try{await (0,l.OY)(e),k()}catch(e){console.error("Error deleting achievement:",e),x("実績の削除に失敗しました。")}},T=()=>{j({projectName:"",brandName:"",purpose:"SALES",platform:"INSTAGRAM",description:"",metrics:{views:0,likes:0,shares:0,comments:0,conversions:0,reach:0,impressions:0},budget:0,duration:"",imageUrl:"",link:""})};return u?(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-gray-600",children:"読み込み中..."})]})}):(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50",children:[(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)("button",{onClick:()=>v.push("/dashboard"),className:"flex items-center space-x-2 px-4 py-2 bg-white/80 backdrop-blur-xl rounded-xl shadow-lg hover:shadow-xl transition-all text-gray-700 hover:text-blue-600",children:[(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),(0,r.jsx)("span",{className:"font-medium",children:"ダッシュボードに戻る"})]}),(0,r.jsx)(i.E.h1,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"実績管理"})]}),(0,r.jsx)(i.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{T(),g(!0)},className:"bg-gradient-to-r from-blue-500 to-purple-500 text-white px-6 py-3 rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all",children:"新しい実績を追加"})]}),p&&(0,r.jsx)(i.E.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-xl mb-6",children:p}),c&&(0,r.jsxs)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,r.jsxs)("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl p-6 shadow-lg",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"総実績数"}),(0,r.jsx)("p",{className:"text-3xl font-bold text-blue-600",children:c.total})]}),(0,r.jsxs)("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl p-6 shadow-lg",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"目的別実績"}),(0,r.jsx)("div",{className:"space-y-1",children:null===(e=c.byPurpose)||void 0===e?void 0:e.map(e=>(0,r.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,r.jsx)("span",{children:N[e.purpose]}),(0,r.jsx)("span",{className:"font-semibold",children:e._count.purpose})]},e.purpose))})]}),(0,r.jsxs)("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl p-6 shadow-lg",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"プラットフォーム別"}),(0,r.jsx)("div",{className:"space-y-1",children:null===(t=c.byPlatform)||void 0===t?void 0:t.map(e=>(0,r.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,r.jsx)("span",{children:w[e.platform]}),(0,r.jsx)("span",{className:"font-semibold",children:e._count.platform})]},e.platform))})]})]}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map((e,t)=>(0,r.jsxs)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*t},className:"bg-white/80 backdrop-blur-xl rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-xl font-bold text-gray-800 mb-1",children:e.projectName}),(0,r.jsx)("p",{className:"text-gray-600",children:e.brandName})]}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)("button",{onClick:()=>S(e),className:"text-blue-600 hover:text-blue-800 transition-colors",children:"✏️"}),(0,r.jsx)("button",{onClick:()=>C(e.id),className:"text-red-600 hover:text-red-800 transition-colors",children:"\uD83D\uDDD1️"})]})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,r.jsx)("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-medium",children:N[e.purpose]}),(0,r.jsx)("span",{className:"px-3 py-1 bg-purple-100 text-purple-800 rounded-full text-sm font-medium",children:w[e.platform]})]}),e.description&&(0,r.jsx)("p",{className:"text-gray-600 text-sm mb-3 line-clamp-2",children:e.description}),e.metrics&&Object.keys(e.metrics).length>0&&(0,r.jsx)("div",{className:"grid grid-cols-2 gap-2 mb-3",children:Object.entries(e.metrics).map(e=>{let[t,s]=e;return(0,r.jsxs)("div",{className:"text-xs",children:[(0,r.jsxs)("span",{className:"text-gray-500 capitalize",children:[t,":"]}),(0,r.jsx)("span",{className:"font-semibold ml-1",children:null==s?void 0:s.toLocaleString()})]},t)})}),e.budget&&(0,r.jsxs)("p",{className:"text-sm text-gray-600 mb-2",children:["予算: \xa5",e.budget.toLocaleString()]}),e.duration&&(0,r.jsxs)("p",{className:"text-sm text-gray-600 mb-2",children:["期間: ",e.duration]}),e.link&&(0,r.jsx)("a",{href:e.link,target:"_blank",rel:"noopener noreferrer",className:"inline-block text-blue-600 hover:text-blue-800 text-sm underline",children:"詳細を見る"})]},e.id))}),0===s.length&&(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("p",{className:"text-gray-600 text-lg",children:"まだ実績が登録されていません。"}),(0,r.jsx)("p",{className:"text-gray-500 mt-2",children:"「新しい実績を追加」ボタンから実績を登録してください。"})]})]}),b&&(0,r.jsx)(i.E.div,{initial:{opacity:0},animate:{opacity:1},className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:(0,r.jsxs)(i.E.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"bg-white rounded-3xl p-8 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:h?"実績を編集":"新しい実績を追加"}),(0,r.jsx)("button",{onClick:()=>{g(!1),f(null),T()},className:"text-gray-500 hover:text-gray-700 text-2xl",children:"✕"})]}),(0,r.jsxs)("form",{onSubmit:E,className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"プロジェクト名 *"}),(0,r.jsx)("input",{type:"text",value:y.projectName,onChange:e=>j({...y,projectName:e.target.value}),required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"サマーキャンペーン2024"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ブランド名 *"}),(0,r.jsx)("input",{type:"text",value:y.brandName,onChange:e=>j({...y,brandName:e.target.value}),required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"株式会社サンプル"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"目的 *"}),(0,r.jsx)("select",{value:y.purpose,onChange:e=>j({...y,purpose:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:Object.entries(N).map(e=>{let[t,s]=e;return(0,r.jsx)("option",{value:t,children:s},t)})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"プラットフォーム *"}),(0,r.jsx)("select",{value:y.platform,onChange:e=>j({...y,platform:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:Object.entries(w).map(e=>{let[t,s]=e;return(0,r.jsx)("option",{value:t,children:s},t)})})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"説明"}),(0,r.jsx)("textarea",{value:y.description,onChange:e=>j({...y,description:e.target.value}),rows:3,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"プロジェクトの詳細説明..."})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"成果指標"}),(0,r.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Object.entries(y.metrics).map(e=>{let[t,s]=e;return(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs text-gray-600 mb-1 capitalize",children:t}),(0,r.jsx)("input",{type:"number",value:s,onChange:e=>j({...y,metrics:{...y.metrics,[t]:parseInt(e.target.value)||0}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0"})]},t)})})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"予算（円）"}),(0,r.jsx)("input",{type:"number",value:y.budget,onChange:e=>j({...y,budget:parseInt(e.target.value)||0}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"100000"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"実施期間"}),(0,r.jsx)("input",{type:"text",value:y.duration,onChange:e=>j({...y,duration:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"2024年7月1日〜7月31日"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"画像URL"}),(0,r.jsx)("input",{type:"url",value:y.imageUrl,onChange:e=>j({...y,imageUrl:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"https://example.com/image.jpg"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"参考URL"}),(0,r.jsx)("input",{type:"url",value:y.link,onChange:e=>j({...y,link:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"https://example.com/project"})]})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,r.jsx)("button",{type:"button",onClick:()=>{g(!1),f(null),T()},className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition-colors",children:"キャンセル"}),(0,r.jsx)("button",{type:"submit",className:"px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-xl hover:shadow-lg transition-all",children:h?"更新":"追加"})]})]})]})})]})}},6635:function(e,t,s){"use strict";s.d(t,{NY:function(){return y},OY:function(){return d},Ol:function(){return p},UZ:function(){return o},VZ:function(){return h},Zx:function(){return n},a7:function(){return b},aP:function(){return f},e7:function(){return x},eW:function(){return u},mT:function(){return l},r9:function(){return m},sV:function(){return g},t$:function(){return v},u$:function(){return c}});var r=s(7066);let a="http://localhost:10000/api";console.log("API_BASE_URL:",a);let i=r.Z.create({baseURL:a,headers:{"Content-Type":"application/json"},timeout:1e4});i.interceptors.request.use(e=>{var t;let s=localStorage.getItem("token");return s&&(e.headers.Authorization="Bearer ".concat(s)),console.log("API Request:",null===(t=e.method)||void 0===t?void 0:t.toUpperCase(),e.url,e.data),e}),i.interceptors.response.use(e=>(console.log("API Response Success:",e.status,e.data),e),e=>{var t,s,r,a,i,n;return console.error("API Response Error:",{status:null===(t=e.response)||void 0===t?void 0:t.status,statusText:null===(s=e.response)||void 0===s?void 0:s.statusText,data:null===(r=e.response)||void 0===r?void 0:r.data,config:{method:null===(a=e.config)||void 0===a?void 0:a.method,url:null===(i=e.config)||void 0===i?void 0:i.url,data:null===(n=e.config)||void 0===n?void 0:n.data}}),Promise.reject(e)});let n=async e=>(await i.post("/achievements",e)).data,l=async()=>(await i.get("/achievements/my-achievements")).data,o=async()=>(await i.get("/achievements/stats")).data,c=async(e,t)=>(await i.put("/achievements/".concat(e),t)).data,d=async e=>(await i.delete("/achievements/".concat(e))).data,u=async e=>(await i.post("/service-pricing/bulk",e)).data,m=async()=>(await i.get("/service-pricing/my-pricing")).data,p=async()=>(await i.get("/service-pricing/validate")).data,x=async(e,t)=>(await i.put("/service-pricing/".concat(e),t)).data,b=async e=>(await i.delete("/service-pricing/".concat(e))).data,g=async e=>window.location.hostname.includes("vercel.app")?(console.log("Using mock data for bulk inquiry creation"),await new Promise(e=>setTimeout(e,1e3)),{message:"問い合わせを送信しました",inquiry:{id:"mock-inquiry-"+Date.now(),title:e.title,description:e.description,budget:e.budget,requiredServices:e.requiredServices,createdAt:new Date().toISOString()},responseCount:e.targetInfluencers.length}):(await i.post("/bulk-inquiries",e)).data,h=async()=>window.location.hostname.includes("vercel.app")?(console.log("Using mock data for bulk inquiries"),{inquiries:[{id:"mock-inquiry-1",title:"テスト問い合わせ1",description:"これはテスト用の問い合わせです",budget:1e5,requiredServices:["PHOTOGRAPHY","POSTING"],createdAt:new Date().toISOString(),responses:[]}]}):(await i.get("/bulk-inquiries/my-inquiries")).data,f=async()=>(await i.get("/bulk-inquiries/my-responses")).data,v=async()=>window.location.hostname.includes("vercel.app")?(console.log("Using mock data for inquiry stats"),{totalInquiries:5,totalResponses:12,responseStats:[{status:"PENDING",_count:{status:8}},{status:"ACCEPTED",_count:{status:3}},{status:"DECLINED",_count:{status:1}}]}):(await i.get("/bulk-inquiries/stats")).data,y=async(e,t)=>(await i.put("/bulk-inquiries/response/".concat(e),t)).data},1163:function(e,t,s){e.exports=s(3079)}},function(e){e.O(0,[5841,7066,2888,9774,179],function(){return e(e.s=7585)}),_N_E=e.O()}]);