(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[459],{3236:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return s(1123)}])},1123:function(e,t,s){"use strict";s.r(t);var l=s(5893),r=s(7294),a=s(5841),i=s(1664),o=s.n(i),n=s(1163);t.default=()=>{let[e,t]=(0,r.useState)(""),[i,c]=(0,r.useState)(""),[d,u]=(0,r.useState)(!1),[m,p]=(0,r.useState)(""),x=(0,n.useRouter)(),h=async t=>{if(t.preventDefault(),u(!0),p(""),!e||!i){p("メールアドレスとパスワードを入力してください。"),u(!1);return}if(i.length<6){p("パスワードは6文字以上で入力してください。"),u(!1);return}try{let{login:t}=await Promise.all([s.e(66),s.e(184)]).then(s.bind(s,2184)),l=await t(e,i);localStorage.setItem("token",l.token),localStorage.setItem("user",JSON.stringify(l.user)),x.push("/dashboard")}catch(e){var l,r,a,o,n;console.error("Login error:",e),(null===(l=e.response)||void 0===l?void 0:l.status)===401?p("メールアドレスまたはパスワードが間違っています。"):(null===(a=e.response)||void 0===a?void 0:null===(r=a.data)||void 0===r?void 0:r.error)?p(e.response.data.error):(null===(n=e.response)||void 0===n?void 0:null===(o=n.data)||void 0===o?void 0:o.details)?p(e.response.data.details.map(e=>e.message).join("、")):p("ログインに失敗しました。もう一度お試しください。")}finally{u(!1)}},b=e=>{"influencer"===e?t("influencer@test.com"):t("company@test.com"),c("test123")},g=async()=>{try{console.log("Testing direct API call...");let e=await fetch("http://localhost:5002/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:"company@test.com",password:"test123"})}),t=await e.json();console.log("Direct API response:",t),alert("Direct API test successful! Check console for details.")}catch(e){console.error("Direct API test failed:",e),alert("Direct API test failed! Check console for details.")}};return(0,l.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 flex items-center justify-center px-4",children:(0,l.jsxs)("div",{className:"max-w-md w-full",children:[(0,l.jsxs)(a.E.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8},className:"bg-white/80 backdrop-blur-xl border border-gray-200 rounded-3xl p-8 shadow-xl",children:[(0,l.jsxs)("div",{className:"text-center mb-8",children:[(0,l.jsx)(a.E.div,{initial:{scale:0},animate:{scale:1},transition:{duration:.5,delay:.2},className:"w-16 h-16 bg-gradient-to-r from-blue-500 to-purple-500 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg",children:(0,l.jsx)("span",{className:"text-white font-bold text-xl",children:"IM"})}),(0,l.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"ログイン"}),(0,l.jsx)("p",{className:"text-gray-600",children:"アカウントにログインしてください"})]}),m&&(0,l.jsx)(a.E.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-xl mb-6",children:m}),(0,l.jsxs)("form",{onSubmit:h,className:"space-y-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"メールアドレス"}),(0,l.jsx)("input",{type:"email",id:"email",value:e,onChange:e=>t(e.target.value),required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"example@email.com"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"パスワード"}),(0,l.jsx)("input",{type:"password",id:"password",value:i,onChange:e=>c(e.target.value),required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"パスワードを入力"})]}),(0,l.jsx)(a.E.button,{whileHover:{scale:1.02},whileTap:{scale:.98},type:"submit",disabled:d,className:"w-full bg-gradient-to-r from-blue-500 to-purple-500 text-white py-4 rounded-xl font-bold text-lg shadow-lg hover:shadow-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:d?"ログイン中...":"ログイン"})]}),(0,l.jsxs)("div",{className:"mt-8 pt-6 border-t border-gray-200",children:[(0,l.jsx)("p",{className:"text-sm text-gray-600 text-center mb-4",children:"テスト用アカウント"}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,l.jsx)(a.E.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>b("influencer"),className:"px-4 py-2 bg-purple-100 text-purple-700 rounded-lg text-sm font-medium hover:bg-purple-200 transition-colors",children:"\uD83D\uDC51 インフルエンサー"}),(0,l.jsx)(a.E.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>b("client"),className:"px-4 py-2 bg-blue-100 text-blue-700 rounded-lg text-sm font-medium hover:bg-blue-200 transition-colors",children:"\uD83C\uDFE2 企業"})]}),(0,l.jsx)("div",{className:"mt-4",children:(0,l.jsx)(a.E.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:g,className:"w-full px-4 py-2 bg-yellow-100 text-yellow-700 rounded-lg text-sm font-medium hover:bg-yellow-200 transition-colors",children:"\uD83D\uDD27 API接続テスト"})})]}),(0,l.jsxs)("div",{className:"mt-8 text-center space-y-4",children:[(0,l.jsxs)("p",{className:"text-gray-600",children:["アカウントをお持ちでない方は"," ",(0,l.jsx)(o(),{href:"/register",className:"text-blue-600 hover:underline font-semibold",children:"こちらから登録"})]}),(0,l.jsx)(o(),{href:"/",className:"text-gray-500 hover:text-gray-700 text-sm",children:"← トップページに戻る"})]})]}),(0,l.jsxs)(a.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.4},className:"mt-8 bg-gray-50/80 backdrop-blur-xl border border-gray-200 rounded-2xl p-6",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"利用可能なテストアカウント"}),(0,l.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,l.jsxs)("div",{className:"bg-purple-50 p-3 rounded-lg",children:[(0,l.jsx)("p",{className:"font-medium text-purple-900",children:"\uD83D\uDC51 インフルエンサー"}),(0,l.jsx)("p",{className:"text-purple-700",children:"influencer@test.com / test123"})]}),(0,l.jsxs)("div",{className:"bg-blue-50 p-3 rounded-lg",children:[(0,l.jsx)("p",{className:"font-medium text-blue-900",children:"\uD83C\uDFE2 企業"}),(0,l.jsx)("p",{className:"text-blue-700",children:"company@test.com / test123"})]})]})]})]})})}},1163:function(e,t,s){e.exports=s(3079)}},function(e){e.O(0,[841,664,888,774,179],function(){return e(e.s=3236)}),_N_E=e.O()}]);