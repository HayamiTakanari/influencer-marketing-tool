(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[92],{1974:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/projects/[id]",function(){return s(4947)}])},4947:function(e,t,s){"use strict";s.r(t),s.d(t,{__N_SSP:function(){return o}});var a=s(5893),l=s(7294),r=s(5841),i=s(1163),c=s(1664),n=s.n(c),o=!0;t.default=e=>{let{projectId:t}=e,[c,o]=(0,l.useState)(null),[d,x]=(0,l.useState)(null),[m,g]=(0,l.useState)(!0),[h,p]=(0,l.useState)(""),[u,b]=(0,l.useState)("overview"),j=(0,i.useRouter)(),{id:f}=j.query;(0,l.useEffect)(()=>{let e=f||t;console.log("Project Detail - useEffect triggered, id:",e,"projectId:",t);let s=localStorage.getItem("user"),a=localStorage.getItem("token");if(console.log("Project Detail - userData:",s),console.log("Project Detail - token:",a),s&&a){let t=JSON.parse(s);if(console.log("Project Detail - User data:",t),o(t),"CLIENT"!==t.role&&"COMPANY"!==t.role){console.log("Access denied - User role:",t.role),j.push("/dashboard");return}console.log("Access granted - User role:",t.role),e?(console.log("Fetching project details for id:",e),y(e)):console.log("No project id available yet")}else console.log("No user data or token - redirecting to login"),j.push("/login")},[f,t,j]);let y=async e=>{try{let a=e||f||t;console.log("Calling getProjectById with id:",a);let{getProjectById:l}=await Promise.all([s.e(66),s.e(184)]).then(s.bind(s,2184)),r=await l(a);console.log("Project details received:",r),x(r)}catch(s){console.error("Error fetching project details:",s),console.log("Using fallback mock data"),x({id:e||f||t||"1",title:"新商品コスメのPRキャンペーン",description:"新発売のファンデーションを使用した投稿をお願いします。自然な仕上がりが特徴の商品で、20-30代の女性をターゲットにしています。",category:"美容・化粧品",budget:3e5,status:"PENDING",targetPlatforms:["INSTAGRAM","TIKTOK"],targetPrefecture:"東京都",targetCity:"渋谷区、新宿区",targetGender:"FEMALE",targetAgeMin:20,targetAgeMax:35,targetFollowerMin:1e4,targetFollowerMax:1e5,startDate:"2024-02-01",endDate:"2024-02-28",deliverables:"Instagram投稿2回、ストーリー投稿3回、TikTok動画1本",requirements:"ナチュラルメイクでの使用感を重視、#新商品コスメ #ナチュラルメイク のハッシュタグ必須",additionalInfo:"商品サンプル提供、撮影用メイク道具一式貸出可能",createdAt:"2024-01-15",applications:[{id:"app1",influencer:{id:"inf1",displayName:"田中美咲",bio:"美容・ファッション系インフルエンサー。20代女性向けコンテンツ発信中。",categories:["美容","ファッション"],prefecture:"東京都",priceMin:5e4,priceMax:2e5,socialAccounts:[{platform:"INSTAGRAM",followerCount:35e3,engagementRate:3.5},{platform:"YOUTUBE",followerCount:15e3,engagementRate:2.8}]},message:"この商品にとても興味があります。ナチュラルメイクが得意で、同世代の女性に向けた発信を心がけています。",proposedPrice:15e4,appliedAt:"2024-01-16",isAccepted:!1},{id:"app2",influencer:{id:"inf2",displayName:"鈴木さやか",bio:"ライフスタイル系クリエイター。料理、旅行、美容など幅広く発信。",categories:["ライフスタイル","美容","料理"],prefecture:"大阪府",priceMin:8e4,priceMax:3e5,socialAccounts:[{platform:"INSTAGRAM",followerCount:6e4,engagementRate:4.2},{platform:"TIKTOK",followerCount:29e3,engagementRate:5.1}]},message:"ナチュラルメイクの動画コンテンツを得意としています。TikTokでのメイクアップ動画は特に反響が良いです。",proposedPrice:2e5,appliedAt:"2024-01-17",isAccepted:!1}]}),p("プロジェクト詳細の取得に失敗しました。")}finally{g(!1)}},N=async e=>{try{console.log("Accepting application:",e),alert("応募を承諾しました！"),await y()}catch(e){console.error("Error accepting application:",e),alert("応募承諾に失敗しました。")}},v=async e=>{if(confirm("この応募を却下しますか？"))try{console.log("Rejecting application:",e),alert("応募を却下しました。"),await y()}catch(e){console.error("Error rejecting application:",e),alert("応募却下に失敗しました。")}},w=e=>{switch(e){case"PENDING":return{label:"募集中",color:"bg-yellow-100 text-yellow-800"};case"MATCHED":return{label:"マッチング済み",color:"bg-blue-100 text-blue-800"};case"IN_PROGRESS":return{label:"進行中",color:"bg-green-100 text-green-800"};case"COMPLETED":return{label:"完了",color:"bg-purple-100 text-purple-800"};case"CANCELLED":return{label:"キャンセル",color:"bg-red-100 text-red-800"};default:return{label:"不明",color:"bg-gray-100 text-gray-800"}}},D=e=>new Intl.NumberFormat("ja-JP",{style:"currency",currency:"JPY",minimumFractionDigits:0}).format(e),E=e=>new Date(e).toLocaleDateString("ja-JP",{year:"numeric",month:"long",day:"numeric"}),C=e=>{switch(e.toLowerCase()){case"instagram":return"\uD83D\uDCF8";case"youtube":return"\uD83C\uDFA5";case"tiktok":return"\uD83C\uDFB5";case"twitter":return"\uD83D\uDC26";default:return"\uD83D\uDCF1"}},k=e=>e>=1e4?(e/1e4).toFixed(1)+"万":e.toLocaleString();return m?(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600",children:"読み込み中..."})]})}):h||!d?(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-6xl mb-4",children:"❌"}),(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"エラーが発生しました"}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:h||"プロジェクトが見つかりませんでした。"}),(0,a.jsx)(n(),{href:"/projects",className:"text-blue-600 hover:underline",children:"プロジェクト一覧に戻る"})]})}):(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50",children:[(0,a.jsx)("div",{className:"bg-white/80 backdrop-blur-xl border-b border-gray-200 sticky top-0 z-10",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-4 flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)(n(),{href:"/projects",className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-500 rounded-xl flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-white font-bold",children:"←"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"プロジェクト詳細"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:d.title})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("span",{className:"px-3 py-1 rounded-full text-sm font-medium ".concat(w(d.status).color),children:w(d.status).label}),(0,a.jsx)(n(),{href:"/projects",className:"px-4 py-2 text-gray-600 hover:text-blue-600 transition-colors",children:"一覧に戻る"})]})]})}),(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[(0,a.jsxs)(r.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},className:"bg-white/80 backdrop-blur-xl border border-gray-200 rounded-3xl p-8 shadow-xl mb-8",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h2",{className:"text-3xl font-bold text-gray-900",children:d.title}),(0,a.jsx)("div",{className:"text-2xl font-bold text-green-600",children:D(d.budget)})]}),(0,a.jsx)("p",{className:"text-gray-700 mb-6",children:d.description}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-3 mb-6",children:["IN_PROGRESS"===d.status&&(0,a.jsx)(n(),{href:"/payments/".concat(d.id),children:(0,a.jsx)(r.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"px-6 py-3 bg-gradient-to-r from-green-500 to-blue-500 text-white rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all",children:"\uD83D\uDCB3 支払いを行う"})}),(0,a.jsx)(n(),{href:"/chat",children:(0,a.jsx)(r.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"px-6 py-3 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all",children:"\uD83D\uDCAC チャット"})}),(0,a.jsx)(n(),{href:"/payments/history",children:(0,a.jsx)(r.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"px-6 py-3 bg-gray-200 text-gray-700 rounded-xl font-semibold hover:bg-gray-300 transition-colors",children:"\uD83D\uDCCA 支払い履歴"})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-lg font-bold text-gray-900",children:d.category}),(0,a.jsx)("div",{className:"text-gray-600 text-sm",children:"カテゴリー"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-lg font-bold text-gray-900",children:E(d.startDate)}),(0,a.jsx)("div",{className:"text-gray-600 text-sm",children:"開始日"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-lg font-bold text-gray-900",children:E(d.endDate)}),(0,a.jsx)("div",{className:"text-gray-600 text-sm",children:"終了日"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"text-lg font-bold text-gray-900",children:[d.applications.length,"件"]}),(0,a.jsx)("div",{className:"text-gray-600 text-sm",children:"応募数"})]})]}),(0,a.jsx)("div",{className:"flex space-x-2 mb-4",children:d.targetPlatforms.map(e=>(0,a.jsxs)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800",children:[C(e)," ",e]},e))})]}),(0,a.jsx)(r.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2},className:"bg-white/80 backdrop-blur-xl border border-gray-200 rounded-3xl p-2 shadow-xl mb-8",children:(0,a.jsx)("div",{className:"flex space-x-2",children:[{key:"overview",label:"詳細情報",icon:"\uD83D\uDCCB"},{key:"applications",label:"応募一覧",icon:"\uD83D\uDCDD"}].map(e=>(0,a.jsxs)(r.E.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>b(e.key),className:"flex-1 px-6 py-3 rounded-2xl font-semibold transition-all ".concat(u===e.key?"bg-gradient-to-r from-blue-500 to-purple-500 text-white shadow-lg":"text-gray-600 hover:bg-gray-100"),children:[(0,a.jsx)("span",{className:"mr-2",children:e.icon}),e.label]},e.key))})}),"overview"===u&&(0,a.jsxs)(r.E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5},className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white/80 backdrop-blur-xl border border-gray-200 rounded-3xl p-8 shadow-xl",children:[(0,a.jsx)("h3",{className:"text-2xl font-bold text-gray-900 mb-6",children:"ターゲット設定"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-semibold text-gray-900 mb-2",children:"地域"}),(0,a.jsx)("p",{className:"text-gray-600",children:d.targetPrefecture}),d.targetCity&&(0,a.jsx)("p",{className:"text-gray-500 text-sm",children:d.targetCity})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-semibold text-gray-900 mb-2",children:"性別"}),(0,a.jsx)("p",{className:"text-gray-600",children:"MALE"===d.targetGender?"男性":"FEMALE"===d.targetGender?"女性":"OTHER"===d.targetGender?"その他":"指定なし"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-semibold text-gray-900 mb-2",children:"年齢層"}),(0,a.jsx)("p",{className:"text-gray-600",children:d.targetAgeMin>0&&d.targetAgeMax>0?"".concat(d.targetAgeMin,"-").concat(d.targetAgeMax,"歳"):"指定なし"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-semibold text-gray-900 mb-2",children:"フォロワー数"}),(0,a.jsx)("p",{className:"text-gray-600",children:d.targetFollowerMin>0&&d.targetFollowerMax>0?"".concat(k(d.targetFollowerMin)," - ").concat(k(d.targetFollowerMax)):"指定なし"})]})]})]}),(0,a.jsxs)("div",{className:"bg-white/80 backdrop-blur-xl border border-gray-200 rounded-3xl p-8 shadow-xl",children:[(0,a.jsx)("h3",{className:"text-2xl font-bold text-gray-900 mb-6",children:"要件詳細"}),(0,a.jsxs)("div",{className:"space-y-6",children:[d.deliverables&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-semibold text-gray-900 mb-2",children:"成果物・納品物"}),(0,a.jsx)("p",{className:"text-gray-700",children:d.deliverables})]}),d.requirements&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-semibold text-gray-900 mb-2",children:"要求事項"}),(0,a.jsx)("p",{className:"text-gray-700",children:d.requirements})]}),d.additionalInfo&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-semibold text-gray-900 mb-2",children:"その他の情報"}),(0,a.jsx)("p",{className:"text-gray-700",children:d.additionalInfo})]})]})]})]}),"applications"===u&&(0,a.jsxs)(r.E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5},className:"bg-white/80 backdrop-blur-xl border border-gray-200 rounded-3xl p-8 shadow-xl",children:[(0,a.jsx)("h3",{className:"text-2xl font-bold text-gray-900 mb-6",children:"応募一覧"}),0===d.applications.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("div",{className:"text-6xl mb-4",children:"\uD83D\uDCED"}),(0,a.jsx)("h4",{className:"text-xl font-bold text-gray-900 mb-2",children:"まだ応募がありません"}),(0,a.jsx)("p",{className:"text-gray-600",children:"インフルエンサーからの応募をお待ちください。"})]}):(0,a.jsx)("div",{className:"space-y-6",children:d.applications.map((e,t)=>(0,a.jsxs)(r.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1*t},className:"bg-gray-50 rounded-2xl p-6",children:[(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-white font-bold",children:e.influencer.displayName.charAt(0)})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-lg font-bold text-gray-900",children:e.influencer.displayName}),(0,a.jsx)("p",{className:"text-gray-600",children:e.influencer.prefecture})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 mt-4 lg:mt-0",children:[(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("div",{className:"text-lg font-bold text-green-600",children:D(e.proposedPrice)}),(0,a.jsx)("div",{className:"text-gray-500 text-sm",children:"提案料金"})]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)(r.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>N(e.id),className:"px-4 py-2 bg-green-500 text-white rounded-lg font-semibold hover:bg-green-600 transition-colors",children:"承諾"}),(0,a.jsx)(r.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>v(e.id),className:"px-4 py-2 bg-red-500 text-white rounded-lg font-semibold hover:bg-red-600 transition-colors",children:"却下"})]})]})]}),(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsx)("p",{className:"text-gray-700",children:e.influencer.bio})}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2 mb-4",children:e.influencer.categories.map(e=>(0,a.jsx)("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-medium",children:e},e))}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("h5",{className:"font-semibold text-gray-900 mb-2",children:"メッセージ"}),(0,a.jsx)("p",{className:"text-gray-700 bg-white p-3 rounded-lg",children:e.message})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("div",{className:"flex space-x-4",children:e.influencer.socialAccounts.map(e=>(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:[C(e.platform)," ",k(e.followerCount)]}),(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:[e.engagementRate,"%"]})]},e.platform))}),(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:["応募日: ",E(e.appliedAt)]})]})]},e.id))})]})]})]})}},1163:function(e,t,s){e.exports=s(3079)}},function(e){e.O(0,[841,664,888,774,179],function(){return e(e.s=1974)}),_N_E=e.O()}]);