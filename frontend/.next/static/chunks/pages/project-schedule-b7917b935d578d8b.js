(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3906],{9493:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/project-schedule",function(){return s(8996)}])},8996:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return p}});var a=s(5893),l=s(7294),i=s(8083),r=s(1163),n=s(2184),c=s(1833),d=s(6006),o=s(898),x=s(5661),m=s(7835),h=s(3304),g=e=>{let{tasks:t,viewMode:s="Day",onTaskClick:i,onDateChange:r,onProgressChange:n,readOnly:g=!1}=e,[u,p]=(0,l.useState)(s),[b,j]=(0,l.useState)(null),{dateRange:y,dayWidth:N}=(0,l.useMemo)(()=>{if(0===t.length){let e=new Date;return e.setHours(0,0,0,0),{dateRange:(0,c.D)({start:e,end:(0,d.E)(e,30)}),dayWidth:40}}let e=t.flatMap(e=>[new Date(e.start),new Date(e.end)]);e.map(e=>e.getTime());let s=new Date(Math.max(...e.map(e=>e.getTime()))),a=new Date;a.setHours(0,0,0,0);let l=(0,d.E)(new Date(Math.max(s.getTime(),(0,d.E)(a,30).getTime())),7),i=[],r=30;if("Day"===u)i=(0,c.D)({start:a,end:l}),r=50;else if("Week"===u){i=[];let e=a;for(;e<=l;)i.push(new Date(e)),e=(0,d.E)(e,7);r=80}else{let e=[],t=(0,o.N)(a);for(a.getDate()>1&&(e.push(a),t=(0,o.N)((0,d.E)((0,x.V)(a),1)));t<=(0,x.V)(l);)e.push(t),t=(0,o.N)((0,d.E)((0,x.V)(t),1));i=e,r=120}return{dateRange:i,dayWidth:r}},[t,u]),v=e=>{if(0===y.length)return{left:0,width:0};let t=new Date(e.start),s=new Date(e.end),a=y[0],l=0,i=0;if("Day"===u)l=(0,m.j)(t,a)*N,i=Math.max((0,m.j)(s,t)*N,N/2);else if("Week"===u)l=Math.floor((0,m.j)(t,a)/7)*N,i=Math.max(Math.ceil((0,m.j)(s,t)/7)*N,N/2);else{let e=y.findIndex(e=>t>=e&&t<(0,d.E)((0,x.V)(e),1)),a=y.findIndex(e=>s>=e&&s<(0,d.E)((0,x.V)(e),1));l=(e>=0?e:0)*N,i=Math.max(((a>=0?a:y.length-1)-(e>=0?e:0)+1)*N,N/2)}return{left:Math.max(0,l),width:Math.max(i,20)}},f=e=>{switch(e){case"completed":return"bg-green-500";case"in_progress":return"bg-yellow-500";case"pending":return"bg-gray-500";default:return"bg-blue-500"}},w=(e,t)=>{let s=new Date(e),a=new Date(t);return"".concat((0,h.WU)(s,"yyyy/MM/dd")," - ").concat((0,h.WU)(a,"yyyy/MM/dd"))},D=e=>{let t=new Date;t.setHours(0,0,0,0);let s=new Date(e);return s.setHours(0,0,0,0),s.getTime()===t.getTime()},E=e=>{let t=e.getDay();return 0===t||6===t},I=e=>D(e)?"bg-blue-100 text-blue-800 border-blue-400":E(e)?"bg-red-50 text-red-700 border-red-200":"text-gray-600",C=y.length*N;return(0,a.jsxs)("div",{className:"gantt-container bg-white rounded-lg border overflow-hidden",children:[(0,a.jsx)("div",{className:"p-4 border-b bg-gray-50 flex space-x-2 flex-wrap",children:["Day","Week","Month"].map(e=>(0,a.jsx)("button",{onClick:()=>p(e),className:"px-3 py-1 rounded-lg text-sm font-medium transition-all ".concat(u===e?"bg-blue-600 text-white shadow-md":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:"Day"===e?"日":"Week"===e?"週":"月"},e))}),0===t.length?(0,a.jsxs)("div",{className:"p-8 text-center text-gray-500",children:[(0,a.jsx)("div",{className:"text-gray-400 mb-4",children:(0,a.jsx)("svg",{className:"w-16 h-16 mx-auto",fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zm0 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V8zm0 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1v-2z",clipRule:"evenodd"})})}),(0,a.jsx)("p",{children:"表示するタスクがありません"})]}):(0,a.jsxs)("div",{className:"overflow-auto",style:{maxHeight:"600px"},children:[(0,a.jsx)("div",{className:"sticky top-0 bg-gray-100 border-b z-10",children:(0,a.jsxs)("div",{className:"flex",style:{minWidth:"".concat(Math.max(C,800),"px")},children:[(0,a.jsx)("div",{className:"w-64 p-2 border-r bg-gray-200 font-semibold text-sm",children:"タスク名"}),(0,a.jsx)("div",{className:"flex-1 relative",children:y.map((e,t)=>(0,a.jsx)("div",{className:"absolute top-0 bottom-0 border-r border-gray-300 p-2 text-xs font-medium ".concat(I(e)),style:{left:t*N,width:N,minHeight:"40px"},children:(0,a.jsxs)("div",{className:"flex flex-col items-center",children:["Day"===u&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"font-semibold",children:(0,h.WU)(e,"M/d")}),(0,a.jsx)("div",{className:"text-xs",children:(0,h.WU)(e,"E")}),D(e)&&(0,a.jsx)("div",{className:"text-xs text-blue-600",children:"今日"}),E(e)&&!D(e)&&(0,a.jsx)("div",{className:"text-xs text-red-600",children:0===e.getDay()?"日":"土"})]}),"Week"===u&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"font-semibold",children:(0,h.WU)(e,"M/d")}),(0,a.jsx)("div",{className:"text-xs",children:"週"}),D(e)&&(0,a.jsx)("div",{className:"text-xs text-blue-600",children:"今日"})]}),"Month"===u&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"font-semibold",children:(0,h.WU)(e,"yyyy/M")}),D(e)&&(0,a.jsx)("div",{className:"text-xs text-blue-600",children:"今月"})]})]})},t))})]})}),(0,a.jsx)("div",{children:t.map((e,t)=>{let s=v(e),l=f(e.custom_class);return(0,a.jsxs)("div",{className:"flex border-b hover:bg-gray-50 ".concat(t%2==0?"bg-white":"bg-gray-25"),style:{minWidth:"".concat(Math.max(C,800),"px")},children:[(0,a.jsxs)("div",{className:"w-64 p-3 border-r bg-white sticky left-0 z-5",children:[(0,a.jsx)("div",{className:"font-medium text-sm text-gray-800 truncate",title:e.name,children:e.name}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:[e.projectTitle&&(0,a.jsxs)("div",{className:"text-blue-600 font-medium mb-1 truncate",children:["\uD83D\uDCC1 ",e.projectTitle]}),w(e.start,e.end)]})]}),(0,a.jsxs)("div",{className:"flex-1 relative",style:{height:"60px"},children:[y.map((e,t)=>(0,a.jsx)("div",{className:"absolute top-0 bottom-0 border-r ".concat(D(e)?"border-blue-400 bg-blue-50 border-r-2":E(e)?"border-red-200 bg-red-25":"border-gray-200"),style:{left:t*N,width:D(e)?2:1}},t)),(0,a.jsxs)("div",{className:"absolute top-2 bottom-2 ".concat(l," rounded shadow-sm cursor-pointer hover:shadow-md transition-all ").concat(b===e.id?"ring-2 ring-blue-400":""),style:{left:"".concat(s.left,"px"),width:"".concat(s.width,"px"),minWidth:"20px"},onClick:()=>null==i?void 0:i(e),onMouseEnter:()=>j(e.id),onMouseLeave:()=>j(null),title:"".concat(e.name,"\n").concat(w(e.start,e.end),"\n進捗: ").concat(e.progress,"%"),children:[e.progress>0&&(0,a.jsx)("div",{className:"h-full bg-white bg-opacity-30 rounded-l",style:{width:"".concat(Math.min(e.progress,100),"%")}}),s.width>80&&(0,a.jsx)("div",{className:"absolute inset-0 flex items-center px-2",children:(0,a.jsx)("span",{className:"text-white text-xs font-medium truncate",children:e.name})}),(0,a.jsxs)("div",{className:"absolute -top-5 left-1/2 transform -translate-x-1/2 text-xs text-gray-600 bg-white px-1 rounded opacity-0 hover:opacity-100 transition-opacity",children:[e.progress,"%"]})]})]})]},e.id)})})]}),(0,a.jsxs)("div",{className:"p-4 bg-gray-50 border-t",children:[(0,a.jsx)("div",{className:"text-sm text-gray-600 mb-2 font-medium",children:"進捗状況:"}),(0,a.jsxs)("div",{className:"flex space-x-4 text-xs",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)("div",{className:"w-3 h-3 bg-green-500 rounded"}),(0,a.jsx)("span",{children:"完了済み"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)("div",{className:"w-3 h-3 bg-yellow-500 rounded"}),(0,a.jsx)("span",{children:"進行中"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)("div",{className:"w-3 h-3 bg-gray-500 rounded"}),(0,a.jsx)("span",{children:"未開始"})]})]})]})]})};let u={FORMAL_REQUEST:{title:"正式依頼",description:"プロジェクトの正式依頼日",color:"bg-blue-500",icon:"\uD83D\uDCC4",isDateRange:!1},PRODUCT_RECEIPT:{title:"商品受領",description:"PR商品の受領日",color:"bg-green-500",icon:"\uD83D\uDCE6",isDateRange:!1},DRAFT_CONTE_CREATION:{title:"初稿コンテ作成",description:"初稿コンテンツの企画・作成期間",color:"bg-purple-500",icon:"✏️",isDateRange:!0},DRAFT_CONTE_SUBMIT:{title:"初稿コンテ提出",description:"初稿コンテンツの提出日",color:"bg-indigo-500",icon:"\uD83D\uDCDD",isDateRange:!1},CONTE_FEEDBACK:{title:"字コンテ戻し",description:"コンテンツに対するフィードバック期間",color:"bg-yellow-500",icon:"\uD83D\uDCAC",isDateRange:!0},CONTE_REVISION:{title:"コンテ修正",description:"コンテンツの修正・改善期間",color:"bg-orange-500",icon:"\uD83D\uDD04",isDateRange:!0},CONTE_FINALIZE:{title:"修正稿コンテFIX",description:"修正稿コンテンツの確定日",color:"bg-red-500",icon:"✅",isDateRange:!1},SHOOTING:{title:"撮影",description:"コンテンツ撮影期間",color:"bg-pink-500",icon:"\uD83C\uDFA5",isDateRange:!0},DRAFT_VIDEO_SUBMIT:{title:"初稿動画提出",description:"編集した初稿動画の提出日",color:"bg-teal-500",icon:"\uD83C\uDFAC",isDateRange:!1},VIDEO_FEEDBACK:{title:"初稿動画戻し",description:"初稿動画に対するフィードバック期間",color:"bg-cyan-500",icon:"\uD83D\uDCF9",isDateRange:!0},VIDEO_REVISION:{title:"動画修正",description:"動画の修正・再編集期間",color:"bg-emerald-500",icon:"\uD83C\uDF9E️",isDateRange:!0},VIDEO_DATA_SUBMIT:{title:"動画データ提出",description:"修正済み動画データの提出日",color:"bg-lime-500",icon:"\uD83D\uDCBE",isDateRange:!1},VIDEO_FINALIZE:{title:"動画FIX",description:"最終動画の確定日",color:"bg-amber-500",icon:"\uD83C\uDFAF",isDateRange:!1},POSTING:{title:"投稿",description:"SNS投稿実施日",color:"bg-rose-500",icon:"\uD83D\uDCF1",isDateRange:!1},INSIGHT_SUBMIT:{title:"インサイトデータ提出",description:"投稿結果・インサイトデータの提出日",color:"bg-violet-500",icon:"\uD83D\uDCCA",isDateRange:!1}};var p=()=>{var e,t,s,c;let[d,o]=(0,l.useState)("project"),[x,m]=(0,l.useState)("calendar"),[h,p]=(0,l.useState)([]),[b,j]=(0,l.useState)({}),[y,N]=(0,l.useState)(null),[v,f]=(0,l.useState)(!0),[w,D]=(0,l.useState)(""),E=(0,r.useRouter)(),[I,C]=(0,l.useState)(null);(0,l.useEffect)(()=>{let e=localStorage.getItem("user");if(!e){E.push("/login");return}let t=JSON.parse(e);if(C(t),"CLIENT"!==t.role&&"COMPANY"!==t.role){E.push("/dashboard");return}k()},[E]);let k=async()=>{try{f(!0),D(""),console.log("プロジェクトデータを取得中...");let e=await (0,n.getMyProjects)();console.log("取得されたプロジェクトデータ:",e);let t=(null==e?void 0:e.projects)||[];if(t.length>0)console.log("".concat(t.length,"件のプロジェクトを取得しました")),p(t),N(t[0].id),await T(t);else{console.log("プロジェクトが見つからないため、モックプロジェクトを生成します");let e=[{id:"mock-project-1",title:"サンプルプロジェクト 1",description:"デモ用のサンプルプロジェクトです",status:"IN_PROGRESS",createdAt:new Date().toISOString(),clientId:"mock-client-1"},{id:"mock-project-2",title:"サンプルプロジェクト 2",description:"デモ用のサンプルプロジェクトです",status:"PLANNING",createdAt:new Date().toISOString(),clientId:"mock-client-1"}];p(e),N(e[0].id),await T(e)}}catch(t){var e;console.error("Error fetching data:",t),console.error("エラーの詳細:",(null===(e=t.response)||void 0===e?void 0:e.data)||t.message),D("プロジェクトデータの取得に失敗しました。")}finally{f(!1)}},T=async e=>{let t={};for(let s of e)try{console.log("プロジェクト ".concat(s.title," のスケジュールを取得中...")),t[s.id]=R(s),console.log("プロジェクト ".concat(s.title," のモックスケジュールを生成しました"))}catch(e){console.error("Error generating schedule for project ".concat(s.id,":"),e),t[s.id]=R(s)}console.log("すべてのスケジュールデータを設定:",t),j(t)},_=async e=>{try{f(!0);let t=await (0,n.vw)(e);alert("請求書が自動生成されました！"),E.push("/invoices/".concat(t.id))}catch(e){console.error("Error generating invoice:",e),alert("請求書の生成に失敗しました。手動で作成してください。"),E.push("/invoices/create")}finally{f(!1)}},S=e=>{let t=b[e];if(!t)return!1;let s=t.phases.find(e=>"INSIGHT_SUBMIT"===e.type);return(null==s?void 0:s.status)==="completed"},O=e=>{let t=b[e];return t?Math.round(t.phases.filter(e=>"completed"===e.status).length/t.phases.length*100):0},R=e=>{let t=new Date,s=[];return["FORMAL_REQUEST","PRODUCT_RECEIPT","DRAFT_CONTE_CREATION","DRAFT_CONTE_SUBMIT","CONTE_FEEDBACK","CONTE_REVISION","CONTE_FINALIZE","SHOOTING","DRAFT_VIDEO_SUBMIT","VIDEO_FEEDBACK","VIDEO_REVISION","VIDEO_DATA_SUBMIT","VIDEO_FINALIZE","POSTING","INSIGHT_SUBMIT"].forEach((a,l)=>{let i;let r=u[a],n=new Date(t);if(n.setDate(t.getDate()+2*l),r.isDateRange){let e=new Date(n);e.setDate(n.getDate()+(l<5?1:2)),i=e.toISOString()}let c="pending";l<3?c="completed":3===l&&(c="in_progress"),s.push({id:"".concat(e.id,"-phase-").concat(l),type:a,title:r.title,description:r.description,startDate:n.toISOString(),endDate:i,status:c,isDateRange:r.isDateRange,color:r.color,icon:r.icon})}),{phases:s,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}},M=e=>{let t=Object.values(b).indexOf(e),s=["border-l-blue-500","border-l-emerald-500","border-l-purple-500","border-l-orange-500","border-l-pink-500","border-l-teal-500","border-l-indigo-500","border-l-red-500"];return s[t%s.length]},A=e=>{let t=Object.values(b).indexOf(e),s=["text-blue-600","text-emerald-600","text-purple-600","text-orange-600","text-pink-600","text-teal-600","text-indigo-600","text-red-600"];return s[t%s.length]},F=()=>{let e=[];return h.forEach(t=>{let s=b[t.id];s&&s.phases&&s.phases.forEach(s=>{e.push({...s,projectId:t.id,projectTitle:t.title})})}),e.sort((e,t)=>new Date(e.startDate).getTime()-new Date(t.startDate).getTime())},V=(e,t,s)=>{let a=new Date(e.startDate),l=new Date(e.endDate?e.endDate:a.getTime()+864e5),i=0;return"completed"===e.status?i=100:"in_progress"===e.status&&(i=50),{id:e.id,name:e.title,start:a.toISOString().split("T")[0],end:l.toISOString().split("T")[0],progress:i,custom_class:e.status,projectTitle:t}},B=()=>{let e=[];if(y&&b[y]){let t=h.find(e=>e.id===y),s=b[y];t&&s&&s.phases.forEach(s=>{let{projectTitle:a,...l}=V(s,t.title,t.id);e.push(l)})}else h.forEach(t=>{let s=b[t.id];s&&s.phases&&s.phases.forEach(s=>{e.push(V(s,t.title,t.id))})});return e.sort((e,t)=>new Date(e.start).getTime()-new Date(t.start).getTime())},L=e=>new Date(e).toLocaleDateString("ja-JP",{month:"short",day:"numeric"});return v?(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600",children:"読み込み中..."})]})}):w&&0===h.length?(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center max-w-md mx-auto p-6",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("svg",{className:"w-16 h-16 mx-auto text-red-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"データの取得に失敗しました"}),(0,a.jsxs)("p",{className:"text-gray-600 mb-4",children:["プロジェクトデータを取得できませんでした。",(0,a.jsx)("br",{}),"ネットワーク接続を確認するか、しばらく後に再試行してください。"]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("button",{onClick:k,disabled:v,className:"w-full px-6 py-3 bg-blue-600 text-white rounded-xl hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all font-medium",children:v?"取得中...":"再試行"}),(0,a.jsx)("button",{onClick:()=>E.push("/dashboard"),className:"w-full px-6 py-3 bg-gray-200 text-gray-700 rounded-xl hover:bg-gray-300 transition-all font-medium",children:"ダッシュボードに戻る"})]}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-4",children:"問題が継続する場合は、ブラウザのコンソールでエラーの詳細をご確認ください。"})]})}):(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[h.length>0&&((null===(t=h[0])||void 0===t?void 0:null===(e=t.id)||void 0===e?void 0:e.includes("mock-project"))||(null===(s=h[0])||void 0===s?void 0:s.id)==="1")&&(0,a.jsx)(i.E.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-6 p-4 bg-blue-100 border-l-4 border-blue-500 rounded-r-lg",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("svg",{className:"w-5 h-5 text-blue-500 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-blue-800 font-medium",children:"デモデータ表示中"}),(0,a.jsx)("p",{className:"text-blue-700 text-sm",children:"新しい15段階フェーズ管理機能をサンプルデータで体験できます。ガントチャートもご利用いただけます。"})]})]})}),(0,a.jsx)("div",{className:"flex justify-between items-center mb-8",children:(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("button",{onClick:()=>E.push("/dashboard"),className:"flex items-center space-x-2 px-4 py-2 bg-white/80 backdrop-blur-xl rounded-xl shadow-lg hover:shadow-xl transition-all text-gray-700 hover:text-blue-600",children:[(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),(0,a.jsx)("span",{className:"font-medium",children:"ダッシュボードに戻る"})]}),(0,a.jsx)(i.E.h1,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"プロジェクトスケジュール"})]})}),(0,a.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,a.jsxs)("div",{className:"flex space-x-4",children:[(0,a.jsx)("button",{onClick:()=>o("project"),className:"px-6 py-3 rounded-xl font-semibold transition-all ".concat("project"===d?"bg-blue-600 text-white shadow-lg":"bg-white/80 text-gray-700 hover:bg-white"),children:"プロジェクト別"}),(0,a.jsx)("button",{onClick:()=>o("overview"),className:"px-6 py-3 rounded-xl font-semibold transition-all ".concat("overview"===d?"bg-blue-600 text-white shadow-lg":"bg-white/80 text-gray-700 hover:bg-white"),children:"全体スケジュール"}),(0,a.jsx)("button",{onClick:()=>o("gantt"),className:"px-6 py-3 rounded-xl font-semibold transition-all ".concat("gantt"===d?"bg-blue-600 text-white shadow-lg":"bg-white/80 text-gray-700 hover:bg-white"),children:"\uD83D\uDCCA ガントチャート"})]}),"gantt"!==d&&(0,a.jsxs)("div",{className:"flex space-x-2 bg-white/80 rounded-xl p-1",children:[(0,a.jsx)("button",{onClick:()=>m("calendar"),className:"px-4 py-2 rounded-lg font-medium transition-all ".concat("calendar"===x?"bg-blue-600 text-white shadow-md":"text-gray-600 hover:text-gray-800"),children:"\uD83D\uDCC5 カレンダー"}),(0,a.jsx)("button",{onClick:()=>m("list"),className:"px-4 py-2 rounded-lg font-medium transition-all ".concat("list"===x?"bg-blue-600 text-white shadow-md":"text-gray-600 hover:text-gray-800"),children:"\uD83D\uDCCB リスト"})]})]}),"project"===d&&(0,a.jsxs)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:[(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-8",children:h.map(e=>{let t=O(e.id),s=S(e.id);return(0,a.jsxs)(i.E.div,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"bg-white/80 backdrop-blur-xl rounded-2xl p-6 shadow-lg transition-all ".concat(y===e.id?"ring-2 ring-blue-500":""),children:[(0,a.jsxs)("div",{onClick:()=>N(e.id),className:"cursor-pointer",children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-gray-800 mb-2",children:e.title}),(0,a.jsx)("p",{className:"text-gray-600 text-sm mb-3 line-clamp-2",children:e.description}),(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-1",children:[(0,a.jsx)("span",{className:"text-xs text-gray-600",children:"進捗"}),(0,a.jsxs)("span",{className:"text-xs font-bold text-gray-800",children:[t,"%"]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"h-2 rounded-full transition-all ".concat(s?"bg-green-500":"bg-blue-500"),style:{width:"".concat(t,"%")}})})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"px-3 py-1 rounded-full text-sm font-medium ".concat(s?"bg-green-100 text-green-800":"IN_PROGRESS"===e.status?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"),children:s?"完了":e.status}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:new Date(e.createdAt).toLocaleDateString()})]})]}),s&&(null==I?void 0:I.role)==="INFLUENCER"&&(0,a.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:(0,a.jsxs)("button",{onClick:t=>{t.stopPropagation(),_(e.id)},className:"w-full bg-gradient-to-r from-green-500 to-emerald-500 text-white px-4 py-2 rounded-lg font-semibold hover:shadow-lg transition-all flex items-center justify-center space-x-2",children:[(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),(0,a.jsx)("span",{children:"請求書を生成"})]})})]},e.id)})}),y&&b[y]&&(0,a.jsxs)("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl p-8 shadow-lg",children:[(0,a.jsxs)("h3",{className:"text-2xl font-bold text-gray-800 mb-6",children:[null===(c=h.find(e=>e.id===y))||void 0===c?void 0:c.title," のスケジュール"]}),"calendar"===x?(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:b[y].phases.map(e=>(0,a.jsxs)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"".concat(e.color," rounded-xl p-4 text-white shadow-lg"),children:[(0,a.jsxs)("div",{className:"flex items-center mb-2",children:[(0,a.jsx)("span",{className:"text-2xl mr-2",children:e.icon}),(0,a.jsx)("h4",{className:"font-bold text-lg",children:e.title})]}),(0,a.jsx)("p",{className:"text-sm opacity-90 mb-3",children:e.description}),(0,a.jsxs)("div",{className:"text-sm",children:[(0,a.jsxs)("p",{className:"font-medium",children:[L(e.startDate),e.endDate&&" - ".concat(L(e.endDate))]}),(0,a.jsx)("span",{className:"inline-block px-2 py-1 rounded-full text-xs font-medium mt-2 ".concat("completed"===e.status?"bg-green-200 text-green-800":"in_progress"===e.status?"bg-yellow-200 text-yellow-800":"bg-gray-200 text-gray-800"),children:"completed"===e.status?"完了":"in_progress"===e.status?"進行中":"待機中"})]})]},e.id))}):(0,a.jsx)("div",{className:"space-y-4",children:b[y].phases.map(e=>(0,a.jsxs)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("div",{className:"w-4 h-4 rounded-full ".concat("completed"===e.status?"bg-green-500":"in_progress"===e.status?"bg-yellow-500":"bg-gray-300")}),(0,a.jsx)("span",{className:"text-2xl",children:e.icon}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-gray-800",children:e.title}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:e.description})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("p",{className:"text-sm font-medium text-gray-800",children:[L(e.startDate),e.endDate&&" - ".concat(L(e.endDate))]}),(0,a.jsx)("span",{className:"inline-block px-2 py-1 rounded-full text-xs font-medium mt-1 ".concat("completed"===e.status?"bg-green-100 text-green-800":"in_progress"===e.status?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"),children:"completed"===e.status?"完了":"in_progress"===e.status?"進行中":"待機中"})]})]},e.id))})]})]}),"overview"===d&&(0,a.jsxs)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl p-6 shadow-lg",children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"プロジェクト凡例"}),(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:h.map(e=>{let t=b[e.id];return t?(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-4 h-4 rounded-full ".concat(M(t).replace("border-l-","bg-"))}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700 truncate",children:e.title})]},e.id):null})})]}),(0,a.jsxs)("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl p-8 shadow-lg",children:[(0,a.jsx)("h3",{className:"text-2xl font-bold text-gray-800 mb-6",children:"全プロジェクト統合スケジュール"}),"calendar"===x?(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:F().map(e=>{let t=b[e.projectId],s=M(t);return A(t),(0,a.jsxs)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"".concat(e.color," rounded-xl p-4 text-white shadow-lg border-l-8 ").concat(s),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"text-2xl mr-2",children:e.icon}),(0,a.jsx)("h4",{className:"font-bold text-lg",children:e.title})]}),(0,a.jsx)("div",{className:"bg-white/20 px-2 py-1 rounded-full",children:(0,a.jsx)("span",{className:"text-xs font-medium",children:e.projectTitle})})]}),(0,a.jsx)("p",{className:"text-sm opacity-90 mb-3",children:e.description}),(0,a.jsxs)("div",{className:"text-sm",children:[(0,a.jsxs)("p",{className:"font-medium",children:[L(e.startDate),e.endDate&&" - ".concat(L(e.endDate))]}),(0,a.jsx)("span",{className:"inline-block px-2 py-1 rounded-full text-xs font-medium mt-2 ".concat("completed"===e.status?"bg-green-200 text-green-800":"in_progress"===e.status?"bg-yellow-200 text-yellow-800":"bg-gray-200 text-gray-800"),children:"completed"===e.status?"完了":"in_progress"===e.status?"進行中":"待機中"})]})]},"".concat(e.projectId,"-").concat(e.id))})}):(0,a.jsx)("div",{className:"space-y-4",children:F().map(e=>{let t=b[e.projectId],s=M(t),l=A(t);return(0,a.jsxs)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl border-l-4 ".concat(s),children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("div",{className:"w-4 h-4 rounded-full ".concat("completed"===e.status?"bg-green-500":"in_progress"===e.status?"bg-yellow-500":"bg-gray-300")}),(0,a.jsx)("span",{className:"text-2xl",children:e.icon}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("p",{className:"font-medium text-gray-800",children:e.title}),(0,a.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(l," bg-gray-100"),children:e.projectTitle})]}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:e.description})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("p",{className:"text-sm font-medium text-gray-800",children:[L(e.startDate),e.endDate&&" - ".concat(L(e.endDate))]}),(0,a.jsx)("span",{className:"inline-block px-2 py-1 rounded-full text-xs font-medium mt-1 ".concat("completed"===e.status?"bg-green-100 text-green-800":"in_progress"===e.status?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"),children:"completed"===e.status?"完了":"in_progress"===e.status?"進行中":"待機中"})]})]},"".concat(e.projectId,"-").concat(e.id))})})]})]}),"gantt"===d&&(0,a.jsxs)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl p-6 shadow-lg",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-800",children:"ガントチャート表示"}),(0,a.jsxs)("div",{className:"flex space-x-4",children:[(0,a.jsx)("button",{onClick:()=>N(null),className:"px-4 py-2 rounded-lg font-medium transition-all ".concat(y?"bg-gray-200 text-gray-700 hover:bg-gray-300":"bg-blue-600 text-white shadow-md"),children:"全プロジェクト"}),h.map(e=>(0,a.jsx)("button",{onClick:()=>N(e.id),className:"px-4 py-2 rounded-lg font-medium transition-all truncate max-w-xs ".concat(y===e.id?"bg-blue-600 text-white shadow-md":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:e.title},e.id))]})]}),B().length>0?(0,a.jsx)(g,{tasks:B(),viewMode:"Day",onTaskClick:e=>{console.log("Task clicked:",e)},readOnly:!1}):(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("div",{className:"text-gray-400 mb-4",children:(0,a.jsx)("svg",{className:"w-16 h-16 mx-auto",fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zm0 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V8zm0 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1v-2z",clipRule:"evenodd"})})}),(0,a.jsx)("h4",{className:"text-lg font-medium text-gray-600 mb-2",children:"スケジュールデータがありません"}),(0,a.jsx)("p",{className:"text-gray-500",children:"プロジェクトスケジュールが設定されていない場合、ガントチャートを表示できません。"})]})]}),(0,a.jsxs)("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl p-6 shadow-lg",children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"ガントチャートの見方"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-4 h-4 rounded bg-green-500"}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"完了済み (100%)"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-4 h-4 rounded bg-yellow-500"}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"進行中 (50%)"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-4 h-4 rounded bg-gray-500"}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"未開始 (0%)"})]})]}),(0,a.jsxs)("div",{className:"mt-4 text-sm text-gray-600",children:[(0,a.jsx)("p",{children:"• バーをクリックするとタスクの詳細が表示されます"}),(0,a.jsx)("p",{children:"• 上部のボタンで表示期間（日・週・月）を切り替えできます"}),(0,a.jsx)("p",{children:"• プロジェクトボタンで特定のプロジェクトのみ表示することもできます"})]})]})]})]})})}}},function(e){e.O(0,[8083,7066,8194,2184,2888,9774,179],function(){return e(e.s=9493)}),_N_E=e.O()}]);