(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[961],{7585:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/achievements",function(){return s(8281)}])},8281:function(e,t,s){"use strict";s.r(t);var a=s(5893),r=s(7294),n=s(5841),i=s(1163),l=s(6635);t.default=()=>{var e,t;let[s,c]=(0,r.useState)([]),[o,d]=(0,r.useState)(null),[u,m]=(0,r.useState)(!0),[p,x]=(0,r.useState)(""),[b,g]=(0,r.useState)(!1),[h,f]=(0,r.useState)(null),y=(0,i.useRouter)(),[v,j]=(0,r.useState)({projectName:"",brandName:"",purpose:"SALES",platform:"INSTAGRAM",description:"",metrics:{views:0,likes:0,shares:0,comments:0,conversions:0,reach:0,impressions:0},budget:0,duration:"",imageUrl:"",link:""}),N={SALES:"売上目的",LEAD_GEN:"集客目的",AWARENESS:"認知拡大目的",BRAND_IMAGE:"ブランドイメージ向上",ENGAGEMENT:"エンゲージメント向上"},w={INSTAGRAM:"Instagram",YOUTUBE:"YouTube",TIKTOK:"TikTok",TWITTER:"Twitter"};(0,r.useEffect)(()=>{let e=localStorage.getItem("user");if(!e){y.push("/login");return}if("INFLUENCER"!==JSON.parse(e).role){y.push("/dashboard");return}k()},[y]);let k=async()=>{try{m(!0);let[e,t]=await Promise.all([(0,l.mT)(),(0,l.UZ)()]);c(e.achievements||[]),d(t)}catch(e){console.error("Error fetching achievements:",e),x("実績データの取得に失敗しました。")}finally{m(!1)}},E=async e=>{e.preventDefault();try{let e={...v,metrics:Object.fromEntries(Object.entries(v.metrics).filter(e=>{let[t,s]=e;return s>0})),budget:v.budget>0?v.budget:void 0,duration:v.duration||void 0,imageUrl:v.imageUrl||void 0,link:v.link||void 0};h?await (0,l.u$)(h.id,e):await (0,l.Zx)(e),g(!1),f(null),C(),k()}catch(e){console.error("Error saving achievement:",e),x("実績の保存に失敗しました。")}},S=e=>{var t,s,a,r,n,i,l;f(e),j({projectName:e.projectName,brandName:e.brandName,purpose:e.purpose,platform:e.platform,description:e.description||"",metrics:{views:(null===(t=e.metrics)||void 0===t?void 0:t.views)||0,likes:(null===(s=e.metrics)||void 0===s?void 0:s.likes)||0,shares:(null===(a=e.metrics)||void 0===a?void 0:a.shares)||0,comments:(null===(r=e.metrics)||void 0===r?void 0:r.comments)||0,conversions:(null===(n=e.metrics)||void 0===n?void 0:n.conversions)||0,reach:(null===(i=e.metrics)||void 0===i?void 0:i.reach)||0,impressions:(null===(l=e.metrics)||void 0===l?void 0:l.impressions)||0},budget:e.budget||0,duration:e.duration||"",imageUrl:e.imageUrl||"",link:e.link||""}),g(!0)},T=async e=>{if(confirm("この実績を削除しますか？"))try{await (0,l.OY)(e),k()}catch(e){console.error("Error deleting achievement:",e),x("実績の削除に失敗しました。")}},C=()=>{j({projectName:"",brandName:"",purpose:"SALES",platform:"INSTAGRAM",description:"",metrics:{views:0,likes:0,shares:0,comments:0,conversions:0,reach:0,impressions:0},budget:0,duration:"",imageUrl:"",link:""})};return u?(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600",children:"読み込み中..."})]})}):(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50",children:[(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,a.jsx)(n.E.h1,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"実績管理"}),(0,a.jsx)(n.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{C(),g(!0)},className:"bg-gradient-to-r from-blue-500 to-purple-500 text-white px-6 py-3 rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all",children:"新しい実績を追加"})]}),p&&(0,a.jsx)(n.E.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-xl mb-6",children:p}),o&&(0,a.jsxs)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,a.jsxs)("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl p-6 shadow-lg",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"総実績数"}),(0,a.jsx)("p",{className:"text-3xl font-bold text-blue-600",children:o.total})]}),(0,a.jsxs)("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl p-6 shadow-lg",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"目的別実績"}),(0,a.jsx)("div",{className:"space-y-1",children:null===(e=o.byPurpose)||void 0===e?void 0:e.map(e=>(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{children:N[e.purpose]}),(0,a.jsx)("span",{className:"font-semibold",children:e._count.purpose})]},e.purpose))})]}),(0,a.jsxs)("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl p-6 shadow-lg",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"プラットフォーム別"}),(0,a.jsx)("div",{className:"space-y-1",children:null===(t=o.byPlatform)||void 0===t?void 0:t.map(e=>(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{children:w[e.platform]}),(0,a.jsx)("span",{className:"font-semibold",children:e._count.platform})]},e.platform))})]})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map((e,t)=>(0,a.jsxs)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*t},className:"bg-white/80 backdrop-blur-xl rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-800 mb-1",children:e.projectName}),(0,a.jsx)("p",{className:"text-gray-600",children:e.brandName})]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("button",{onClick:()=>S(e),className:"text-blue-600 hover:text-blue-800 transition-colors",children:"✏️"}),(0,a.jsx)("button",{onClick:()=>T(e.id),className:"text-red-600 hover:text-red-800 transition-colors",children:"\uD83D\uDDD1️"})]})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,a.jsx)("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-medium",children:N[e.purpose]}),(0,a.jsx)("span",{className:"px-3 py-1 bg-purple-100 text-purple-800 rounded-full text-sm font-medium",children:w[e.platform]})]}),e.description&&(0,a.jsx)("p",{className:"text-gray-600 text-sm mb-3 line-clamp-2",children:e.description}),e.metrics&&Object.keys(e.metrics).length>0&&(0,a.jsx)("div",{className:"grid grid-cols-2 gap-2 mb-3",children:Object.entries(e.metrics).map(e=>{let[t,s]=e;return(0,a.jsxs)("div",{className:"text-xs",children:[(0,a.jsxs)("span",{className:"text-gray-500 capitalize",children:[t,":"]}),(0,a.jsx)("span",{className:"font-semibold ml-1",children:null==s?void 0:s.toLocaleString()})]},t)})}),e.budget&&(0,a.jsxs)("p",{className:"text-sm text-gray-600 mb-2",children:["予算: \xa5",e.budget.toLocaleString()]}),e.duration&&(0,a.jsxs)("p",{className:"text-sm text-gray-600 mb-2",children:["期間: ",e.duration]}),e.link&&(0,a.jsx)("a",{href:e.link,target:"_blank",rel:"noopener noreferrer",className:"inline-block text-blue-600 hover:text-blue-800 text-sm underline",children:"詳細を見る"})]},e.id))}),0===s.length&&(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("p",{className:"text-gray-600 text-lg",children:"まだ実績が登録されていません。"}),(0,a.jsx)("p",{className:"text-gray-500 mt-2",children:"「新しい実績を追加」ボタンから実績を登録してください。"})]})]}),b&&(0,a.jsx)(n.E.div,{initial:{opacity:0},animate:{opacity:1},className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:(0,a.jsxs)(n.E.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"bg-white rounded-3xl p-8 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:h?"実績を編集":"新しい実績を追加"}),(0,a.jsx)("button",{onClick:()=>{g(!1),f(null),C()},className:"text-gray-500 hover:text-gray-700 text-2xl",children:"✕"})]}),(0,a.jsxs)("form",{onSubmit:E,className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"プロジェクト名 *"}),(0,a.jsx)("input",{type:"text",value:v.projectName,onChange:e=>j({...v,projectName:e.target.value}),required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"サマーキャンペーン2024"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ブランド名 *"}),(0,a.jsx)("input",{type:"text",value:v.brandName,onChange:e=>j({...v,brandName:e.target.value}),required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"株式会社サンプル"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"目的 *"}),(0,a.jsx)("select",{value:v.purpose,onChange:e=>j({...v,purpose:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:Object.entries(N).map(e=>{let[t,s]=e;return(0,a.jsx)("option",{value:t,children:s},t)})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"プラットフォーム *"}),(0,a.jsx)("select",{value:v.platform,onChange:e=>j({...v,platform:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:Object.entries(w).map(e=>{let[t,s]=e;return(0,a.jsx)("option",{value:t,children:s},t)})})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"説明"}),(0,a.jsx)("textarea",{value:v.description,onChange:e=>j({...v,description:e.target.value}),rows:3,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"プロジェクトの詳細説明..."})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"成果指標"}),(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Object.entries(v.metrics).map(e=>{let[t,s]=e;return(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-gray-600 mb-1 capitalize",children:t}),(0,a.jsx)("input",{type:"number",value:s,onChange:e=>j({...v,metrics:{...v.metrics,[t]:parseInt(e.target.value)||0}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0"})]},t)})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"予算（円）"}),(0,a.jsx)("input",{type:"number",value:v.budget,onChange:e=>j({...v,budget:parseInt(e.target.value)||0}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"100000"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"実施期間"}),(0,a.jsx)("input",{type:"text",value:v.duration,onChange:e=>j({...v,duration:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"2024年7月1日〜7月31日"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"画像URL"}),(0,a.jsx)("input",{type:"url",value:v.imageUrl,onChange:e=>j({...v,imageUrl:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"https://example.com/image.jpg"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"参考URL"}),(0,a.jsx)("input",{type:"url",value:v.link,onChange:e=>j({...v,link:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"https://example.com/project"})]})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,a.jsx)("button",{type:"button",onClick:()=>{g(!1),f(null),C()},className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition-colors",children:"キャンセル"}),(0,a.jsx)("button",{type:"submit",className:"px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-xl hover:shadow-lg transition-all",children:h?"更新":"追加"})]})]})]})})]})}},6635:function(e,t,s){"use strict";s.d(t,{F6:function(){return y},NY:function(){return f},OY:function(){return c},Ol:function(){return u},UZ:function(){return i},Ul:function(){return v},VZ:function(){return b},Zx:function(){return r},a7:function(){return p},aP:function(){return g},e7:function(){return m},eW:function(){return o},mT:function(){return n},pM:function(){return j},r9:function(){return d},rd:function(){return N},sV:function(){return x},t$:function(){return h},u$:function(){return l}});let a=s(7066).Z.create({baseURL:"http://localhost:5002/api",headers:{"Content-Type":"application/json"}});a.interceptors.request.use(e=>{let t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e});let r=async e=>(await a.post("/achievements",e)).data,n=async()=>(await a.get("/achievements/my-achievements")).data,i=async()=>(await a.get("/achievements/stats")).data,l=async(e,t)=>(await a.put("/achievements/".concat(e),t)).data,c=async e=>(await a.delete("/achievements/".concat(e))).data,o=async e=>(await a.post("/service-pricing/bulk",e)).data,d=async()=>(await a.get("/service-pricing/my-pricing")).data,u=async()=>(await a.get("/service-pricing/validate")).data,m=async(e,t)=>(await a.put("/service-pricing/".concat(e),t)).data,p=async e=>(await a.delete("/service-pricing/".concat(e))).data,x=async e=>(await a.post("/bulk-inquiries",e)).data,b=async()=>(await a.get("/bulk-inquiries/my-inquiries")).data,g=async()=>(await a.get("/bulk-inquiries/my-responses")).data,h=async()=>(await a.get("/bulk-inquiries/stats")).data,f=async(e,t)=>(await a.put("/bulk-inquiries/response/".concat(e),t)).data,y=async e=>(await a.post("/schedules",e)).data,v=async e=>(await a.get("/schedules/upcoming",{params:{days:e}})).data,j=async e=>(await a.get("/schedules/project/".concat(e))).data,N=async(e,t)=>(await a.put("/schedules/milestone/".concat(e),t)).data},1163:function(e,t,s){e.exports=s(3079)}},function(e){e.O(0,[841,66,888,774,179],function(){return e(e.s=7585)}),_N_E=e.O()}]);