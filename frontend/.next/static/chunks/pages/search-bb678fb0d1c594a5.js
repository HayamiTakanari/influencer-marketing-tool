(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9603],{8266:function(e,l,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/search",function(){return a(4167)}])},4167:function(e,l,a){"use strict";a.r(l);var s=a(5893),r=a(7294),t=a(5841),n=a(1163),i=a(2184);l.default=()=>{let[e,l]=(0,r.useState)(null),[a,o]=(0,r.useState)([]),[c,d]=(0,r.useState)(!1),[u,x]=(0,r.useState)(""),[m,g]=(0,r.useState)(null),[p,h]=(0,r.useState)(null),b=(0,n.useRouter)(),[f,y]=(0,r.useState)(()=>{{let e=localStorage.getItem("searchFilters");if(e)try{let l=JSON.parse(e);return{query:l.query||"",category:l.category||"",prefecture:l.prefecture||"",platform:l.platform||"",minFollowers:l.minFollowers||"",maxFollowers:l.maxFollowers||"",minEngagement:l.minEngagement||"",maxEngagement:l.maxEngagement||"",ageMin:l.ageMin||"",ageMax:l.ageMax||"",gender:l.gender||"",priceMin:l.priceMin||"",priceMax:l.priceMax||"",sortBy:l.sortBy||"relevance",verifiedOnly:l.verifiedOnly||!1,hasMediaKit:l.hasMediaKit||!1,page:1,limit:l.limit||20,testLargeData:!1}}catch(e){console.error("Failed to parse saved filters:",e)}}return{query:"",category:"",prefecture:"",platform:"",minFollowers:"",maxFollowers:"",minEngagement:"",maxEngagement:"",ageMin:"",ageMax:"",gender:"",priceMin:"",priceMax:"",sortBy:"relevance",verifiedOnly:!1,hasMediaKit:!1,page:1,limit:20,testLargeData:!1}}),[j,v]=(0,r.useState)(0);(0,r.useEffect)(()=>{let e=localStorage.getItem("user");if(!e){b.push("/login");return}let a=JSON.parse(e);if(l(a),"CLIENT"!==a.role&&"COMPANY"!==a.role){b.push("/dashboard");return}},[b]),(0,r.useEffect)(()=>{e&&N()},[e]);let N=async()=>{console.log("Search button clicked!"),console.log("Current filters:",f);let e=Date.now();d(!0),x("");try{let l={...f,minFollowers:f.minFollowers?parseInt(f.minFollowers):void 0,maxFollowers:f.maxFollowers?parseInt(f.maxFollowers):void 0};console.log("Search params:",l);let a=await (0,i.searchInfluencers)(l),s=Date.now();console.log("Search result:",a),o(a.influencers||[]),g(a.pagination||null),h(a.performance||null),v(s-e)}catch(e){console.error("Search error:",e),x("検索に失敗しました: "+(e.message||e))}finally{d(!1)}},w=async e=>{let l={...f,page:e};y(l),console.log("Page changed to:",e);let a=Date.now();d(!0),x("");try{let e={...l,minFollowers:l.minFollowers?parseInt(l.minFollowers):void 0,maxFollowers:l.maxFollowers?parseInt(l.maxFollowers):void 0},s=await (0,i.searchInfluencers)(e),r=Date.now();o(s.influencers||[]),g(s.pagination||null),h(s.performance||null),v(r-a)}catch(e){console.error("Page change search error:",e),x("検索に失敗しました: "+(e.message||e))}finally{d(!1)}},M=(e,l)=>{let a={...f,[e]:l,page:1};y(a);{let e={query:a.query,category:a.category,prefecture:a.prefecture,platform:a.platform,minFollowers:a.minFollowers,maxFollowers:a.maxFollowers,minEngagement:a.minEngagement,maxEngagement:a.maxEngagement,ageMin:a.ageMin,ageMax:a.ageMax,gender:a.gender,priceMin:a.priceMin,priceMax:a.priceMax,sortBy:a.sortBy,verifiedOnly:a.verifiedOnly,hasMediaKit:a.hasMediaKit,limit:a.limit};localStorage.setItem("searchFilters",JSON.stringify(e))}},D=async()=>{if(!m){alert("検索を実行してからCSV抽出してください");return}d(!0);try{let e={...f,page:1,limit:m.total,minFollowers:f.minFollowers?parseInt(f.minFollowers):void 0,maxFollowers:f.maxFollowers?parseInt(f.maxFollowers):void 0},l=(await (0,i.searchInfluencers)(e)).influencers||[];if(0===l.length){alert("抽出するデータがありません");return}let a=l.map(e=>{var l;let a=l=>{var a;let s=null===(a=e.socialAccounts)||void 0===a?void 0:a.find(e=>e.platform===l);return s?[s.followerCount||0,s.engagementRate||""]:[0,""]},[s,r]=a("Instagram"),[t,n]=a("TikTok"),[i,o]=a("YouTube"),[c,d]=a("X");return[e.displayName||"",e.prefecture||"",(null===(l=e.categories)||void 0===l?void 0:l.join(";"))||"",s,r,t,n,i,o,c,d,e.priceMin||"",e.priceMax||"",(e.bio||"").replace(/"/g,'""')]}),s=["名前,都道府県,カテゴリー,Instagramフォロワー数,Instagramエンゲージメント率,TikTokフォロワー数,TikTokエンゲージメント率,YouTubeフォロワー数,YouTubeエンゲージメント率,Xフォロワー数,Xエンゲージメント率,最低料金,最高料金,プロフィール",...a.map(e=>e.map(e=>"string"==typeof e&&e.includes(",")?'"'.concat(e,'"'):e).join(","))].join("\n"),r=new Blob(["\uFEFF"+s],{type:"text/csv;charset=utf-8;"}),t=document.createElement("a"),n=URL.createObjectURL(r);t.setAttribute("href",n);let o=new Date().toISOString().slice(0,19).replace(/[T:]/g,"-");t.setAttribute("download","influencers_all_".concat(o,".csv")),t.style.visibility="hidden",document.body.appendChild(t),t.click(),document.body.removeChild(t),alert("".concat(l.length,"件のデータを抽出しました"))}catch(e){console.error("CSV抽出エラー:",e),alert("CSV抽出に失敗しました")}finally{d(!1)}};return e?(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4 mb-8",children:[(0,s.jsxs)("button",{onClick:()=>b.push("/dashboard"),className:"flex items-center space-x-2 px-4 py-2 bg-white/80 backdrop-blur-xl rounded-xl shadow-lg hover:shadow-xl transition-all text-gray-700 hover:text-blue-600",children:[(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),(0,s.jsx)("span",{className:"font-medium",children:"ダッシュボードに戻る"})]}),(0,s.jsx)(t.E.h1,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"インフルエンサー検索"})]}),(0,s.jsx)("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl p-6 shadow-lg mb-6",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"検索時間"}),(0,s.jsxs)("p",{className:"text-lg font-bold text-blue-600",children:[j.toFixed(0),"ms"]})]}),m&&(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"総件数"}),(0,s.jsx)("p",{className:"text-lg font-bold text-green-600",children:m.total.toLocaleString()})]}),p&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"サーバー応答時間"}),(0,s.jsxs)("p",{className:"text-lg font-bold text-purple-600",children:[p.responseTime,"ms"]})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"キャッシュ"}),(0,s.jsx)("p",{className:"text-lg font-bold ".concat(p.cacheHit?"text-green-600":"text-gray-600"),children:p.cacheHit?"HIT":"MISS"})]})]})]})}),(0,s.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-4 mb-6",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-bold text-yellow-800",children:"パフォーマンステストモード"}),(0,s.jsx)("p",{className:"text-sm text-yellow-700",children:f.testLargeData?"10,000件のデータでテスト中":"通常モード（50件）"})]}),(0,s.jsx)("button",{onClick:()=>{y(e=>({...e,testLargeData:!e.testLargeData,page:1}))},className:"px-4 py-2 rounded-lg font-semibold transition-colors ".concat(f.testLargeData?"bg-yellow-600 text-white":"bg-yellow-200 text-yellow-800"),children:f.testLargeData?"通常モードに切り替え":"テストモードに切り替え"})]})}),(0,s.jsxs)("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl p-6 shadow-lg mb-6",children:[(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:"\uD83D\uDD0D 基本検索"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"キーワード"}),(0,s.jsx)("input",{type:"text",value:f.query,onChange:e=>M("query",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"インフルエンサー名...",onKeyPress:e=>"Enter"===e.key&&N()})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"カテゴリ"}),(0,s.jsxs)("select",{value:f.category,onChange:e=>M("category",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,s.jsx)("option",{value:"",children:"全て"}),(0,s.jsx)("option",{value:"美容",children:"美容"}),(0,s.jsx)("option",{value:"ライフスタイル",children:"ライフスタイル"}),(0,s.jsx)("option",{value:"ファッション",children:"ファッション"}),(0,s.jsx)("option",{value:"グルメ",children:"グルメ"}),(0,s.jsx)("option",{value:"旅行",children:"旅行"}),(0,s.jsx)("option",{value:"テック",children:"テック"}),(0,s.jsx)("option",{value:"フィットネス",children:"フィットネス"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"都道府県"}),(0,s.jsxs)("select",{value:f.prefecture,onChange:e=>M("prefecture",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,s.jsx)("option",{value:"",children:"全て"}),(0,s.jsx)("option",{value:"東京都",children:"東京都"}),(0,s.jsx)("option",{value:"大阪府",children:"大阪府"}),(0,s.jsx)("option",{value:"神奈川県",children:"神奈川県"}),(0,s.jsx)("option",{value:"愛知県",children:"愛知県"}),(0,s.jsx)("option",{value:"福岡県",children:"福岡県"}),(0,s.jsx)("option",{value:"北海道",children:"北海道"}),(0,s.jsx)("option",{value:"京都府",children:"京都府"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"SNSプラットフォーム"}),(0,s.jsxs)("select",{value:f.platform,onChange:e=>M("platform",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,s.jsx)("option",{value:"",children:"全て"}),(0,s.jsx)("option",{value:"Instagram",children:"Instagram"}),(0,s.jsx)("option",{value:"TikTok",children:"TikTok"}),(0,s.jsx)("option",{value:"YouTube",children:"YouTube"}),(0,s.jsx)("option",{value:"X",children:"X (Twitter)"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"並び順"}),(0,s.jsxs)("select",{value:f.sortBy,onChange:e=>M("sortBy",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,s.jsx)("option",{value:"relevance",children:"関連度"}),(0,s.jsx)("option",{value:"followers_desc",children:"フォロワー数(多い順)"}),(0,s.jsx)("option",{value:"followers_asc",children:"フォロワー数(少ない順)"}),(0,s.jsx)("option",{value:"engagement_desc",children:"エンゲージメント率(高い順)"}),(0,s.jsx)("option",{value:"price_asc",children:"料金(安い順)"}),(0,s.jsx)("option",{value:"price_desc",children:"料金(高い順)"}),(0,s.jsx)("option",{value:"newest",children:"登録日(新しい順)"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"表示件数"}),(0,s.jsxs)("select",{value:f.limit,onChange:e=>M("limit",parseInt(e.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,s.jsx)("option",{value:10,children:"10件"}),(0,s.jsx)("option",{value:20,children:"20件"}),(0,s.jsx)("option",{value:50,children:"50件"}),(0,s.jsx)("option",{value:100,children:"100件"})]})]})]})]}),(0,s.jsxs)("div",{className:"border-t border-gray-200 pt-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:"⚙️ 高度なフィルター"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,s.jsxs)("div",{className:"lg:col-span-2",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"フォロワー数範囲"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,s.jsx)("input",{type:"number",value:f.minFollowers,onChange:e=>M("minFollowers",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"最小 (例: 1000)",onKeyPress:e=>"Enter"===e.key&&N()}),(0,s.jsx)("input",{type:"number",value:f.maxFollowers,onChange:e=>M("maxFollowers",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"最大 (例: 100000)",onKeyPress:e=>"Enter"===e.key&&N()})]})]}),(0,s.jsxs)("div",{className:"lg:col-span-2",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"エンゲージメント率(%)"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,s.jsx)("input",{type:"number",step:"0.1",value:f.minEngagement,onChange:e=>M("minEngagement",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"最小 (例: 2.0)"}),(0,s.jsx)("input",{type:"number",step:"0.1",value:f.maxEngagement,onChange:e=>M("maxEngagement",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"最大 (例: 10.0)"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"年齢範囲"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,s.jsx)("input",{type:"number",value:f.ageMin,onChange:e=>M("ageMin",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"最小"}),(0,s.jsx)("input",{type:"number",value:f.ageMax,onChange:e=>M("ageMax",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"最大"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"性別"}),(0,s.jsxs)("select",{value:f.gender,onChange:e=>M("gender",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,s.jsx)("option",{value:"",children:"指定しない"}),(0,s.jsx)("option",{value:"MALE",children:"男性"}),(0,s.jsx)("option",{value:"FEMALE",children:"女性"}),(0,s.jsx)("option",{value:"OTHER",children:"その他"})]})]}),(0,s.jsxs)("div",{className:"lg:col-span-2",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"料金範囲 (円)"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,s.jsx)("input",{type:"number",value:f.priceMin,onChange:e=>M("priceMin",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"最小 (例: 50000)"}),(0,s.jsx)("input",{type:"number",value:f.priceMax,onChange:e=>M("priceMax",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"最大 (例: 500000)"})]})]})]}),(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"特別条件"}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,s.jsxs)("label",{className:"flex items-center",children:[(0,s.jsx)("input",{type:"checkbox",checked:f.verifiedOnly,onChange:e=>M("verifiedOnly",e.target.checked),className:"mr-2 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,s.jsx)("span",{className:"text-sm text-gray-700",children:"認証済みアカウントのみ"})]}),(0,s.jsxs)("label",{className:"flex items-center",children:[(0,s.jsx)("input",{type:"checkbox",checked:f.hasMediaKit,onChange:e=>M("hasMediaKit",e.target.checked),className:"mr-2 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,s.jsx)("span",{className:"text-sm text-gray-700",children:"メディアキット保有者のみ"})]})]})]})]}),(0,s.jsxs)("div",{className:"flex justify-center space-x-4",children:[(0,s.jsx)("button",{onClick:e=>{e.preventDefault(),console.log("Button clicked!"),N()},disabled:c,className:"px-8 py-3 bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:c?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),(0,s.jsx)("span",{children:"検索中..."})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{children:"\uD83D\uDD0D"}),(0,s.jsx)("span",{children:"検索実行"})]})}),(0,s.jsx)("button",{onClick:()=>{y({query:"",category:"",prefecture:"",platform:"",minFollowers:"",maxFollowers:"",minEngagement:"",maxEngagement:"",ageMin:"",ageMax:"",gender:"",priceMin:"",priceMax:"",sortBy:"relevance",verifiedOnly:!1,hasMediaKit:!1,page:1,limit:20,testLargeData:f.testLargeData}),localStorage.removeItem("searchFilters"),N()},className:"px-6 py-3 bg-gray-500 text-white rounded-xl font-semibold hover:bg-gray-600 transition-colors",children:"\uD83D\uDD04 リセット"})]})]}),u&&(0,s.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-xl mb-6",children:u}),c&&(0,s.jsxs)("div",{className:"text-center py-8",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-gray-600",children:"検索中..."})]}),(f.query||f.category||f.prefecture||f.platform||f.minFollowers||f.maxFollowers||f.minEngagement||f.maxEngagement||f.ageMin||f.ageMax||f.gender||f.priceMin||f.priceMax||f.verifiedOnly||f.hasMediaKit)&&(0,s.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4 mb-6",children:[(0,s.jsxs)("h3",{className:"font-semibold text-blue-900 mb-3 flex items-center",children:["\uD83C\uDFAF 現在の検索条件",(0,s.jsxs)("span",{className:"ml-2 text-xs text-blue-600 bg-blue-100 px-2 py-1 rounded-full",children:[[f.query,f.category,f.prefecture,f.platform,f.minFollowers,f.maxFollowers,f.minEngagement,f.maxEngagement,f.ageMin,f.ageMax,f.gender,f.priceMin,f.priceMax,f.verifiedOnly,f.hasMediaKit].filter(Boolean).length,"個の条件"]})]}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-2",children:[f.query&&(0,s.jsxs)("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm",children:["\uD83D\uDD0D キーワード: ",f.query]}),f.category&&(0,s.jsxs)("span",{className:"px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm",children:["\uD83D\uDCC2 カテゴリ: ",f.category]}),f.prefecture&&(0,s.jsxs)("span",{className:"px-3 py-1 bg-orange-100 text-orange-800 rounded-full text-sm",children:["\uD83D\uDCCD 都道府県: ",f.prefecture]}),f.platform&&(0,s.jsxs)("span",{className:"px-3 py-1 bg-purple-100 text-purple-800 rounded-full text-sm font-semibold",children:["\uD83D\uDCF1 ",f.platform,"専門"]}),(f.minFollowers||f.maxFollowers)&&(0,s.jsxs)("span",{className:"px-3 py-1 bg-indigo-100 text-indigo-800 rounded-full text-sm",children:["\uD83D\uDC65 フォロワー: ",f.minFollowers?parseInt(f.minFollowers).toLocaleString():"0","〜",f.maxFollowers?parseInt(f.maxFollowers).toLocaleString():"∞"]}),(f.minEngagement||f.maxEngagement)&&(0,s.jsxs)("span",{className:"px-3 py-1 bg-pink-100 text-pink-800 rounded-full text-sm",children:["\uD83D\uDCC8 エンゲージ: ",f.minEngagement||"0","%〜",f.maxEngagement||"∞","%"]}),(f.ageMin||f.ageMax)&&(0,s.jsxs)("span",{className:"px-3 py-1 bg-yellow-100 text-yellow-800 rounded-full text-sm",children:["\uD83C\uDF82 年齢: ",f.ageMin||"0","〜",f.ageMax||"∞","歳"]}),f.gender&&(0,s.jsxs)("span",{className:"px-3 py-1 bg-cyan-100 text-cyan-800 rounded-full text-sm",children:["\uD83D\uDC64 性別: ","MALE"===f.gender?"男性":"FEMALE"===f.gender?"女性":"その他"]}),(f.priceMin||f.priceMax)&&(0,s.jsxs)("span",{className:"px-3 py-1 bg-emerald-100 text-emerald-800 rounded-full text-sm",children:["\uD83D\uDCB0 料金: \xa5",f.priceMin?parseInt(f.priceMin).toLocaleString():"0","〜\xa5",f.priceMax?parseInt(f.priceMax).toLocaleString():"∞"]}),f.verifiedOnly&&(0,s.jsx)("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm",children:"✅ 認証済みのみ"}),f.hasMediaKit&&(0,s.jsx)("span",{className:"px-3 py-1 bg-violet-100 text-violet-800 rounded-full text-sm",children:"\uD83D\uDCCB メディアキット保有"}),"relevance"!==f.sortBy&&(0,s.jsxs)("span",{className:"px-3 py-1 bg-gray-100 text-gray-800 rounded-full text-sm",children:["\uD83D\uDD04 並び順: ","followers_desc"===f.sortBy?"フォロワー数(多い順)":"followers_asc"===f.sortBy?"フォロワー数(少ない順)":"engagement_desc"===f.sortBy?"エンゲージメント率(高い順)":"price_asc"===f.sortBy?"料金(安い順)":"price_desc"===f.sortBy?"料金(高い順)":"newest"===f.sortBy?"登録日(新しい順)":"関連度"]})]})]}),!c&&a.length>0&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsx)("div",{className:"flex items-center gap-4",children:m&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("p",{className:"text-gray-600",children:[m.total.toLocaleString(),"件中 ",((m.page-1)*m.limit+1).toLocaleString(),"-",Math.min(m.page*m.limit,m.total).toLocaleString(),"件を表示"]}),(0,s.jsx)("span",{className:"text-gray-400",children:"|"}),(0,s.jsxs)("p",{className:"text-gray-600",children:["ページ ",m.page," / ",m.totalPages]})]})}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)("button",{onClick:()=>{if(!a||0===a.length){alert("抽出するデータがありません");return}let e=new Blob(["\uFEFF"+["名前,都道府県,カテゴリー,Instagramフォロワー数,Instagramエンゲージメント率,TikTokフォロワー数,TikTokエンゲージメント率,YouTubeフォロワー数,YouTubeエンゲージメント率,Xフォロワー数,Xエンゲージメント率,最低料金,最高料金,プロフィール",...a.map(e=>{var l;let a=l=>{var a;let s=null===(a=e.socialAccounts)||void 0===a?void 0:a.find(e=>e.platform===l);return s?[s.followerCount||0,s.engagementRate||""]:[0,""]},[s,r]=a("Instagram"),[t,n]=a("TikTok"),[i,o]=a("YouTube"),[c,d]=a("X");return[e.displayName||"",e.prefecture||"",(null===(l=e.categories)||void 0===l?void 0:l.join(";"))||"",s,r,t,n,i,o,c,d,e.priceMin||"",e.priceMax||"",(e.bio||"").replace(/"/g,'""')]}).map(e=>e.map(e=>"string"==typeof e&&e.includes(",")?'"'.concat(e,'"'):e).join(","))].join("\n")],{type:"text/csv;charset=utf-8;"}),l=document.createElement("a"),s=URL.createObjectURL(e);l.setAttribute("href",s);let r=new Date().toISOString().slice(0,19).replace(/[T:]/g,"-");l.setAttribute("download","influencers_".concat(r,".csv")),l.style.visibility="hidden",document.body.appendChild(l),l.click(),document.body.removeChild(l)},className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg font-medium hover:bg-green-700 transition-colors",children:[(0,s.jsx)("span",{children:"\uD83D\uDCCA"}),(0,s.jsx)("span",{children:"現在ページCSV抽出"})]}),(0,s.jsxs)("button",{onClick:D,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors",disabled:c,children:[(0,s.jsx)("span",{children:"\uD83D\uDCC1"}),(0,s.jsx)("span",{children:"全データCSV抽出"})]})]})]}),(0,s.jsx)("div",{className:"space-y-3 mb-8",children:a.map((e,l)=>{var a,r,n,i;return(0,s.jsx)(t.E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.03*l},className:"bg-white/90 backdrop-blur-xl rounded-lg shadow hover:shadow-md transition-all",children:(0,s.jsx)("div",{className:"p-4",children:(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-500 rounded-full flex items-center justify-center text-white font-bold text-lg flex-shrink-0 cursor-pointer hover:shadow-lg transition-all hover:scale-105",onClick:()=>b.push("/influencer/".concat(e.id)),title:"".concat(e.displayName,"の詳細を見る"),children:(null===(a=e.displayName)||void 0===a?void 0:a.charAt(0))||"U"}),(0,s.jsx)("div",{className:"flex-1 min-w-0",children:(0,s.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-1",children:[(0,s.jsx)("h3",{className:"text-lg font-bold text-gray-900 truncate",children:e.displayName}),(0,s.jsxs)("span",{className:"text-sm text-gray-500",children:["(",e.prefecture,")"]})]}),(0,s.jsx)("p",{className:"text-sm text-gray-600 line-clamp-1 mb-2",children:e.bio}),(0,s.jsxs)("div",{className:"flex items-center gap-4 text-sm",children:[(0,s.jsx)("div",{className:"flex gap-2",children:null===(r=e.categories)||void 0===r?void 0:r.map((e,l)=>(0,s.jsx)("span",{className:"px-2 py-0.5 bg-blue-100 text-blue-700 rounded-full text-xs font-medium",children:e},l))}),(0,s.jsx)("div",{className:"grid grid-cols-2 gap-2 text-xs",children:["Instagram","TikTok","YouTube","X"].map(l=>{var a,r;let t=null===(a=e.socialAccounts)||void 0===a?void 0:a.find(e=>e.platform===l),n=f.platform===l;return t?(0,s.jsxs)("div",{className:"flex items-center gap-1 ".concat(n?"bg-blue-50 px-2 py-1 rounded":""),children:[(0,s.jsxs)("span",{className:"".concat(n?"text-blue-700 font-semibold":"text-gray-500"," w-16"),children:[l,n?"*":"",":"]}),(0,s.jsx)("span",{className:"font-semibold ".concat(n?"text-blue-900":"text-gray-900"),children:null===(r=t.followerCount)||void 0===r?void 0:r.toLocaleString()}),t.engagementRate&&(0,s.jsxs)("span",{className:n?"text-blue-600":"text-green-600",children:["(",t.engagementRate,"%)"]})]},l):(0,s.jsxs)("div",{className:"flex items-center gap-1 ".concat(n?"text-gray-600":"text-gray-400"),children:[(0,s.jsxs)("span",{className:"w-16 ".concat(n?"font-semibold":""),children:[l,n?"*":"",":"]}),(0,s.jsx)("span",{children:"-"})]},l)})})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4 flex-shrink-0",children:[(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("div",{className:"text-xs text-gray-500",children:"料金レンジ"}),(0,s.jsxs)("div",{className:"text-sm font-bold text-gray-900",children:["\xa5",null===(n=e.priceMin)||void 0===n?void 0:n.toLocaleString()," - \xa5",null===(i=e.priceMax)||void 0===i?void 0:i.toLocaleString()]})]}),(0,s.jsx)("button",{onClick:()=>b.push("/influencer/".concat(e.id)),className:"px-3 py-1.5 bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-md text-sm font-medium hover:shadow-md transition-all",children:"詳細"})]})]})})]})})},e.id)})}),m&&m.totalPages>1&&(0,s.jsxs)("div",{className:"flex justify-center items-center space-x-2",children:[(0,s.jsx)("button",{onClick:()=>w(m.page-1),disabled:!m.hasPrev,className:"px-4 py-2 bg-white rounded-lg border disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"前へ"}),Array.from({length:Math.min(10,m.totalPages)},(e,l)=>{let a=Math.max(1,m.page-5)+l;return a>m.totalPages?null:(0,s.jsx)("button",{onClick:()=>w(a),className:"px-4 py-2 rounded-lg border ".concat(a===m.page?"bg-blue-600 text-white":"bg-white hover:bg-gray-50"),children:a},a)}),(0,s.jsx)("button",{onClick:()=>w(m.page+1),disabled:!m.hasNext,className:"px-4 py-2 bg-white rounded-lg border disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"次へ"})]})]}),!c&&0===a.length&&(0,s.jsx)("div",{className:"text-center py-12",children:(0,s.jsx)("p",{className:"text-gray-600 text-lg",children:"検索条件に一致するインフルエンサーが見つかりませんでした。"})})]})}):null}},1163:function(e,l,a){e.exports=a(3079)}},function(e){e.O(0,[5841,7066,2184,2888,9774,179],function(){return e(e.s=8266)}),_N_E=e.O()}]);