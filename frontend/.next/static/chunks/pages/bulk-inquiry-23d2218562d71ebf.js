(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[76],{7193:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/bulk-inquiry",function(){return s(18)}])},18:function(e,t,s){"use strict";s.r(t);var a=s(5893),l=s(7294),r=s(5841),i=s(1163),n=s(6635),c=s(2184);t.default=()=>{var e;let[t,s]=(0,l.useState)("create"),[o,d]=(0,l.useState)([]),[u,x]=(0,l.useState)([]),[m,p]=(0,l.useState)(null),[g,h]=(0,l.useState)(!0),[b,y]=(0,l.useState)(""),[f,v]=(0,l.useState)(!1),[N,j]=(0,l.useState)(null),w=(0,i.useRouter)(),[E,S]=(0,l.useState)(null),[C,k]=(0,l.useState)([]),[I,P]=(0,l.useState)([]),[q,D]=(0,l.useState)([]),[A,T]=(0,l.useState)(null),[O,R]=(0,l.useState)(!0),[L,_]=(0,l.useState)(!1),[F,U]=(0,l.useState)(!1),[G,Y]=(0,l.useState)(""),[M,V]=(0,l.useState)(!1),[Z,H]=(0,l.useState)({title:"",description:"",budget:0,deadline:"",requiredServices:[]}),[X,B]=(0,l.useState)({status:"PENDING",proposedPrice:0,message:"",availableFrom:"",availableTo:""}),J={PHOTOGRAPHY:"撮影",VIDEO_EDITING:"動画編集",CONTENT_CREATION:"コンテンツ制作",POSTING:"投稿",STORY_CREATION:"ストーリー制作",CONSULTATION:"コンサルティング",LIVE_STREAMING:"ライブ配信",EVENT_APPEARANCE:"イベント出演"},K={PENDING:"返答待ち",ACCEPTED:"承諾",DECLINED:"辞退",EXPIRED:"期限切れ"},$={PENDING:"bg-yellow-100 text-yellow-800",ACCEPTED:"bg-green-100 text-green-800",DECLINED:"bg-red-100 text-red-800",EXPIRED:"bg-gray-100 text-gray-800"};(0,l.useEffect)(()=>{let e=localStorage.getItem("user");if(!e){w.push("/login");return}let t=JSON.parse(e);if(S(t),"CLIENT"===t.role||"COMPANY"===t.role)s("create");else if("INFLUENCER"===t.role)s("received");else{w.push("/dashboard");return}z(),("CLIENT"===t.role||"COMPANY"===t.role)&&W()},[w]);let z=async()=>{try{h(!0);let e=JSON.parse(localStorage.getItem("user")||"{}");if("CLIENT"===e.role||"COMPANY"===e.role){let[e,t]=await Promise.all([(0,n.VZ)(),(0,n.t$)()]);d(e.inquiries||[]),p(t)}else if("INFLUENCER"===e.role){let e=await (0,n.aP)();x(e.responses||[])}}catch(e){console.error("Error fetching data:",e),y("データの取得に失敗しました。")}finally{h(!1)}},W=async()=>{try{let e=await (0,c.searchInfluencers)({});k(e.influencers||[])}catch(e){console.error("Error fetching influencers:",e)}},Q=async()=>{if(!Z.title||!Z.description){y("タイトルと説明を入力してからAIレコメンドを実行してください。");return}try{_(!0),y("");let e=await (0,c.ij)({title:Z.title,description:Z.description,requiredServices:Z.requiredServices,budget:Z.budget>0?Z.budget:void 0});D(e.influencers||[]),T(e.analysis||null);let t=e.influencers.filter(e=>e.aiScore>=80).map(e=>e.id);P(t)}catch(e){console.error("Error getting AI recommendations:",e),y("AIレコメンドの取得に失敗しました。")}finally{_(!1)}},ee=async e=>{if(e.preventDefault(),console.log("Form submitted - Debug info:"),console.log("Selected influencers:",I),console.log("Inquiry form:",Z),console.log("Required services:",Z.requiredServices),console.log("API Base URL:","http://localhost:10000/api"),!Z.title.trim()){y("タイトルを入力してください。");return}if(!Z.description.trim()){y("説明を入力してください。");return}if(0===Z.requiredServices.length){y("必要なサービスを選択してください。");return}if(0===I.length){y("問い合わせ対象のインフルエンサーを選択してください。");return}try{y(""),Y(""),U(!0),console.log("Sending inquiry...");let e={...Z,targetInfluencers:I,budget:Z.budget>0?Z.budget:void 0,deadline:Z.deadline||void 0};console.log("Submit data:",e);let t=await (0,n.sV)(e);console.log("Inquiry created successfully:",t),V(!0),Y("一括送信しました！".concat(I.length,"人のインフルエンサーに問い合わせを送信しました。")),H({title:"",description:"",budget:0,deadline:"",requiredServices:[]}),P([]),D([]),T(null),setTimeout(()=>{s("sent"),Y(""),V(!1),z()},3e3)}catch(s){var t,a,l,r;console.error("Error creating inquiry:",s);let e="問い合わせの送信に失敗しました";(null===(a=s.response)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.error)?e+=": ".concat(s.response.data.error):(null===(r=s.response)||void 0===r?void 0:null===(l=r.data)||void 0===l?void 0:l.details)?e+=": ".concat(JSON.stringify(s.response.data.details)):s.message&&(e+=": ".concat(s.message)),y(e)}finally{U(!1)}},et=async e=>{if(e.preventDefault(),N)try{let e={...X,proposedPrice:X.proposedPrice>0?X.proposedPrice:void 0,availableFrom:X.availableFrom||void 0,availableTo:X.availableTo||void 0};await (0,n.NY)(N.id,e),v(!1),j(null),z()}catch(e){console.error("Error updating response:",e),y("回答の更新に失敗しました。")}},es=e=>{j(e),B({status:e.status,proposedPrice:e.proposedPrice||0,message:e.message||"",availableFrom:e.availableFrom?e.availableFrom.split("T")[0]:"",availableTo:e.availableTo?e.availableTo.split("T")[0]:""}),v(!0)},ea=e=>{P(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},el=e=>{H(t=>({...t,requiredServices:t.requiredServices.includes(e)?t.requiredServices.filter(t=>t!==e):[...t.requiredServices,e]}))};return g?(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600",children:"読み込み中..."})]})}):(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50",children:[(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[(0,a.jsx)(r.E.h1,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent mb-8",children:"一斉問い合わせ"}),b&&(0,a.jsx)(r.E.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-xl mb-6",children:b}),G&&(0,a.jsx)(r.E.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-xl mb-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"text-xl",children:"✅"}),(0,a.jsx)("span",{children:G})]}),(0,a.jsx)("button",{onClick:()=>{y(""),Y(""),V(!1),H({title:"",description:"",budget:0,deadline:"",requiredServices:[]}),P([]),D([]),T(null)},className:"px-4 py-2 bg-green-600 text-white rounded-lg text-sm font-semibold hover:bg-green-700 transition-colors",children:"新しい問い合わせを作成"})]})}),(0,a.jsxs)("div",{className:"flex space-x-4 mb-8",children:[((null==E?void 0:E.role)==="CLIENT"||(null==E?void 0:E.role)==="COMPANY")&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:()=>s("create"),className:"px-6 py-3 rounded-xl font-semibold transition-all ".concat("create"===t?"bg-blue-600 text-white shadow-lg":"bg-white/80 text-gray-700 hover:bg-white"),children:"問い合わせ作成"}),(0,a.jsx)("button",{onClick:()=>s("sent"),className:"px-6 py-3 rounded-xl font-semibold transition-all ".concat("sent"===t?"bg-blue-600 text-white shadow-lg":"bg-white/80 text-gray-700 hover:bg-white"),children:"送信済み"})]}),(null==E?void 0:E.role)==="INFLUENCER"&&(0,a.jsx)("button",{onClick:()=>s("received"),className:"px-6 py-3 rounded-xl font-semibold transition-all ".concat("received"===t?"bg-blue-600 text-white shadow-lg":"bg-white/80 text-gray-700 hover:bg-white"),children:"受信済み"})]}),"create"===t&&((null==E?void 0:E.role)==="CLIENT"||(null==E?void 0:E.role)==="COMPANY")&&(0,a.jsxs)(r.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white/80 backdrop-blur-xl rounded-2xl p-8 shadow-lg",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:"新しい問い合わせを作成"}),(0,a.jsxs)("form",{onSubmit:ee,className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"タイトル *"}),(0,a.jsx)("input",{type:"text",value:Z.title,onChange:e=>H({...Z,title:e.target.value}),required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"春の新商品プロモーション"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"予算（円）"}),(0,a.jsx)("input",{type:"number",value:Z.budget,onChange:e=>H({...Z,budget:parseInt(e.target.value)||0}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"100000"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"説明 *"}),(0,a.jsx)("textarea",{value:Z.description,onChange:e=>H({...Z,description:e.target.value}),required:!0,rows:4,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"プロジェクトの詳細説明..."})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"回答期限"}),(0,a.jsx)("input",{type:"datetime-local",value:Z.deadline,onChange:e=>H({...Z,deadline:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"必要なサービス *"}),(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:Object.entries(J).map(e=>{let[t,s]=e;return(0,a.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",checked:Z.requiredServices.includes(t),onChange:()=>el(t),className:"rounded"}),(0,a.jsx)("span",{className:"text-sm",children:s})]},t)})})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:["問い合わせ対象インフルエンサー * (",I.length,"人選択中)"]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("button",{type:"button",onClick:Q,disabled:L||!Z.title||!Z.description,className:"flex items-center space-x-2 px-4 py-2 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-lg font-semibold hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:L?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),(0,a.jsx)("span",{children:"分析中..."})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{children:"\uD83E\uDD16"}),(0,a.jsx)("span",{children:"AIレコメンド"})]})}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("button",{type:"button",onClick:()=>R(!0),className:"px-3 py-1 rounded-lg text-sm font-medium transition-all ".concat(O?"bg-blue-500 text-white":"bg-gray-200 text-gray-700"),children:"AIモード"}),(0,a.jsx)("button",{type:"button",onClick:()=>R(!1),className:"px-3 py-1 rounded-lg text-sm font-medium transition-all ".concat(O?"bg-gray-200 text-gray-700":"bg-blue-500 text-white"),children:"手動選択"})]})]})]}),A&&(0,a.jsxs)("div",{className:"mb-4 p-4 bg-gradient-to-r from-purple-50 to-pink-50 border border-purple-200 rounded-xl",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,a.jsx)("span",{className:"text-lg",children:"\uD83E\uDD16"}),(0,a.jsx)("h4",{className:"font-semibold text-purple-900",children:"AI分析結果"})]}),(0,a.jsx)("p",{className:"text-sm text-purple-800 mb-3",children:A.recommendationSummary}),A.detectedKeywords&&A.detectedKeywords.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-purple-700 mb-2",children:"検出されたキーワード:"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:A.detectedKeywords.map((e,t)=>(0,a.jsxs)("span",{className:"px-2 py-1 bg-purple-100 text-purple-800 rounded-full text-xs",children:[e.category," (",e.score,")"]},t))})]})]}),(0,a.jsxs)("div",{className:"max-h-80 overflow-y-auto border border-gray-300 rounded-xl p-4",children:[(O?q:C).map(e=>{var t,s;return(0,a.jsxs)("label",{className:"flex items-center space-x-3 py-3 cursor-pointer hover:bg-gray-50 rounded-lg px-2 border-l-4 ".concat(e.isRecommended?"border-l-green-500 bg-green-50":"border-l-transparent"),children:[(0,a.jsx)("input",{type:"checkbox",checked:I.includes(e.id),onChange:()=>ea(e.id),className:"rounded"}),(0,a.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-500 rounded-full flex items-center justify-center text-white font-bold cursor-pointer hover:shadow-md transition-all flex-shrink-0",onClick:t=>{t.preventDefault(),t.stopPropagation(),w.push("/influencer/".concat(e.id))},title:"".concat(e.displayName,"の詳細を見る"),children:(null===(t=e.displayName)||void 0===t?void 0:t.charAt(0))||"U"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,a.jsx)("p",{className:"font-medium",children:e.displayName}),e.aiScore&&(0,a.jsxs)("div",{className:"px-2 py-1 rounded-full text-xs font-semibold ".concat(e.aiScore>=90?"bg-green-100 text-green-800":e.aiScore>=80?"bg-blue-100 text-blue-800":e.aiScore>=70?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"),children:["マッチ度: ",e.aiScore,"%"]}),e.isRecommended&&(0,a.jsx)("span",{className:"px-2 py-1 bg-green-100 text-green-800 rounded-full text-xs font-semibold",children:"\uD83C\uDF1F おすすめ"})]}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:e.bio}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:[null===(s=e.categories)||void 0===s?void 0:s.join(", ")," | ",e.prefecture]}),e.matchReasons&&e.matchReasons.length>0&&(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsx)("p",{className:"text-xs font-medium text-gray-700 mb-1",children:"マッチング理由:"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-1",children:e.matchReasons.map((e,t)=>(0,a.jsx)("span",{className:"px-2 py-1 bg-blue-50 text-blue-700 rounded text-xs",children:e},t))})]}),e.socialAccounts&&e.socialAccounts.length>0&&(0,a.jsx)("div",{className:"flex space-x-3 mt-2",children:e.socialAccounts.map((e,t)=>{var s;return(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:[e.platform,": ",null===(s=e.followerCount)||void 0===s?void 0:s.toLocaleString(),"人"]},t)})})]})]},e.id)}),O&&0===q.length&&!L&&(0,a.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,a.jsx)("p",{className:"text-lg mb-2",children:"\uD83E\uDD16"}),(0,a.jsx)("p",{children:"「AIレコメンド」ボタンをクリックして、最適なインフルエンサーを見つけましょう"}),(0,a.jsx)("p",{className:"text-sm mt-1",children:"タイトルと説明を入力後にご利用ください"})]}),!O&&0===C.length&&(0,a.jsx)("div",{className:"text-center py-8 text-gray-500",children:(0,a.jsx)("p",{children:"インフルエンサーが見つかりませんでした"})})]})]}),(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsx)("button",{type:"submit",disabled:F||M,className:"px-8 py-3 rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2 ".concat(M?"bg-gradient-to-r from-green-500 to-green-600 text-white":"bg-gradient-to-r from-blue-500 to-purple-500 text-white"),children:F?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),(0,a.jsx)("span",{children:"送信中..."})]}):M?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"text-lg",children:"✅"}),(0,a.jsx)("span",{children:"送信完了"})]}):(0,a.jsx)("span",{children:"問い合わせを送信"})})})]})]}),"sent"===t&&((null==E?void 0:E.role)==="CLIENT"||(null==E?void 0:E.role)==="COMPANY")&&(0,a.jsxs)(r.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:[m&&(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl p-6 shadow-lg",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"総問い合わせ数"}),(0,a.jsx)("p",{className:"text-3xl font-bold text-blue-600",children:m.totalInquiries})]}),(0,a.jsxs)("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl p-6 shadow-lg",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"総回答数"}),(0,a.jsx)("p",{className:"text-3xl font-bold text-green-600",children:m.totalResponses})]}),(0,a.jsxs)("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl p-6 shadow-lg",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"回答状況"}),(0,a.jsx)("div",{className:"space-y-1 text-sm",children:null===(e=m.responseStats)||void 0===e?void 0:e.map(e=>(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:K[e.status]}),(0,a.jsx)("span",{className:"font-semibold",children:e._count.status})]},e.status))})]})]}),(0,a.jsx)("div",{className:"space-y-4",children:o.map(e=>(0,a.jsxs)("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl p-6 shadow-lg",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-800",children:e.title}),(0,a.jsx)("p",{className:"text-gray-600",children:e.description})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"text-sm text-gray-500",children:new Date(e.createdAt).toLocaleDateString()}),e.budget&&(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["予算: \xa5",e.budget.toLocaleString()]})]})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"必要なサービス:"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:e.requiredServices.map(e=>(0,a.jsx)("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm",children:J[e]},e))})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"text-sm font-medium text-gray-700 mb-2",children:["回答状況 (",e.responses.length,"件)"]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:e.responses.map(e=>(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-6 h-6 bg-gradient-to-br from-blue-500 to-purple-500 rounded-full flex items-center justify-center text-white font-bold text-xs cursor-pointer hover:shadow-md transition-all",onClick:()=>w.push("/influencer/".concat(e.influencer.id)),title:"".concat(e.influencer.displayName,"の詳細を見る"),children:e.influencer.displayName.charAt(0)}),(0,a.jsx)("p",{className:"font-medium text-sm",children:e.influencer.displayName})]}),(0,a.jsx)("span",{className:"px-2 py-1 rounded-full text-xs ".concat($[e.status]),children:K[e.status]})]}),e.proposedPrice&&(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["提案価格: \xa5",e.proposedPrice.toLocaleString()]}),e.message&&(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1 line-clamp-2",children:e.message})]},e.id))})]})]},e.id))}),0===o.length&&(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("p",{className:"text-gray-600 text-lg",children:"まだ問い合わせを送信していません。"}),(0,a.jsx)("p",{className:"text-gray-500 mt-2",children:"「問い合わせ作成」タブから新しい問い合わせを作成してください。"})]})]}),"received"===t&&(null==E?void 0:E.role)==="INFLUENCER"&&(0,a.jsxs)(r.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:[u.map(e=>(0,a.jsxs)("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl p-6 shadow-lg",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-800",children:e.inquiry.title}),(0,a.jsx)("p",{className:"text-gray-600",children:e.inquiry.client.companyName})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("span",{className:"px-3 py-1 rounded-full text-sm ".concat($[e.status]),children:K[e.status]}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:new Date(e.createdAt).toLocaleDateString()})]})]}),(0,a.jsx)("p",{className:"text-gray-700 mb-4",children:e.inquiry.description}),e.inquiry.budget&&(0,a.jsxs)("p",{className:"text-sm text-gray-600 mb-2",children:["予算: \xa5",e.inquiry.budget.toLocaleString()]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"必要なサービス:"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:e.inquiry.requiredServices.map(e=>(0,a.jsx)("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm",children:J[e]},e))})]}),"PENDING"===e.status&&(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsx)("button",{onClick:()=>es(e),className:"px-6 py-2 bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-xl font-semibold hover:shadow-lg transition-all",children:"回答する"})}),"PENDING"!==e.status&&(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 mt-4",children:[(0,a.jsx)("p",{className:"font-medium text-sm text-gray-700 mb-2",children:"あなたの回答:"}),e.proposedPrice&&(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["提案価格: \xa5",e.proposedPrice.toLocaleString()]}),e.message&&(0,a.jsx)("p",{className:"text-sm text-gray-700 mt-1",children:e.message})]})]},e.id)),0===u.length&&(0,a.jsx)("div",{className:"text-center py-12",children:(0,a.jsx)("p",{className:"text-gray-600 text-lg",children:"まだ問い合わせを受信していません。"})})]})]}),f&&N&&(0,a.jsx)(r.E.div,{initial:{opacity:0},animate:{opacity:1},className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:(0,a.jsxs)(r.E.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"bg-white rounded-3xl p-8 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"問い合わせに回答"}),(0,a.jsx)("button",{onClick:()=>{v(!1),j(null)},className:"text-gray-500 hover:text-gray-700 text-2xl",children:"✕"})]}),(0,a.jsxs)("div",{className:"mb-6 p-4 bg-gray-50 rounded-xl",children:[(0,a.jsx)("h3",{className:"font-bold text-lg mb-2",children:N.inquiry.title}),(0,a.jsx)("p",{className:"text-gray-600 mb-2",children:N.inquiry.description}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:N.inquiry.client.companyName})]}),(0,a.jsxs)("form",{onSubmit:et,className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"回答 *"}),(0,a.jsxs)("select",{value:X.status,onChange:e=>B({...X,status:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"PENDING",children:"検討中"}),(0,a.jsx)("option",{value:"ACCEPTED",children:"承諾"}),(0,a.jsx)("option",{value:"DECLINED",children:"辞退"})]})]}),"ACCEPTED"===X.status&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"提案価格（円）"}),(0,a.jsx)("input",{type:"number",value:X.proposedPrice,onChange:e=>B({...X,proposedPrice:parseInt(e.target.value)||0}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"100000"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"対応可能開始日"}),(0,a.jsx)("input",{type:"date",value:X.availableFrom,onChange:e=>B({...X,availableFrom:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"対応可能終了日"}),(0,a.jsx)("input",{type:"date",value:X.availableTo,onChange:e=>B({...X,availableTo:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"メッセージ"}),(0,a.jsx)("textarea",{value:X.message,onChange:e=>B({...X,message:e.target.value}),rows:4,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"詳細なメッセージ..."})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,a.jsx)("button",{type:"button",onClick:()=>{v(!1),j(null)},className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition-colors",children:"キャンセル"}),(0,a.jsx)("button",{type:"submit",className:"px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-xl hover:shadow-lg transition-all",children:"回答を送信"})]})]})]})})]})}},6635:function(e,t,s){"use strict";s.d(t,{NY:function(){return v},OY:function(){return d},Ol:function(){return m},UZ:function(){return c},VZ:function(){return b},Zx:function(){return i},a7:function(){return g},aP:function(){return y},e7:function(){return p},eW:function(){return u},mT:function(){return n},r9:function(){return x},sV:function(){return h},t$:function(){return f},u$:function(){return o}});var a=s(7066);let l="http://localhost:10000/api";console.log("API_BASE_URL:",l);let r=a.Z.create({baseURL:l,headers:{"Content-Type":"application/json"},timeout:1e4});r.interceptors.request.use(e=>{var t;let s=localStorage.getItem("token");return s&&(e.headers.Authorization="Bearer ".concat(s)),console.log("API Request:",null===(t=e.method)||void 0===t?void 0:t.toUpperCase(),e.url,e.data),e}),r.interceptors.response.use(e=>(console.log("API Response Success:",e.status,e.data),e),e=>{var t,s,a,l,r,i;return console.error("API Response Error:",{status:null===(t=e.response)||void 0===t?void 0:t.status,statusText:null===(s=e.response)||void 0===s?void 0:s.statusText,data:null===(a=e.response)||void 0===a?void 0:a.data,config:{method:null===(l=e.config)||void 0===l?void 0:l.method,url:null===(r=e.config)||void 0===r?void 0:r.url,data:null===(i=e.config)||void 0===i?void 0:i.data}}),Promise.reject(e)});let i=async e=>(await r.post("/achievements",e)).data,n=async()=>(await r.get("/achievements/my-achievements")).data,c=async()=>(await r.get("/achievements/stats")).data,o=async(e,t)=>(await r.put("/achievements/".concat(e),t)).data,d=async e=>(await r.delete("/achievements/".concat(e))).data,u=async e=>(await r.post("/service-pricing/bulk",e)).data,x=async()=>(await r.get("/service-pricing/my-pricing")).data,m=async()=>(await r.get("/service-pricing/validate")).data,p=async(e,t)=>(await r.put("/service-pricing/".concat(e),t)).data,g=async e=>(await r.delete("/service-pricing/".concat(e))).data,h=async e=>window.location.hostname.includes("vercel.app")?(console.log("Using mock data for bulk inquiry creation"),await new Promise(e=>setTimeout(e,1e3)),{message:"問い合わせを送信しました",inquiry:{id:"mock-inquiry-"+Date.now(),title:e.title,description:e.description,budget:e.budget,requiredServices:e.requiredServices,createdAt:new Date().toISOString()},responseCount:e.targetInfluencers.length}):(await r.post("/bulk-inquiries",e)).data,b=async()=>window.location.hostname.includes("vercel.app")?(console.log("Using mock data for bulk inquiries"),{inquiries:[{id:"mock-inquiry-1",title:"テスト問い合わせ1",description:"これはテスト用の問い合わせです",budget:1e5,requiredServices:["PHOTOGRAPHY","POSTING"],createdAt:new Date().toISOString(),responses:[]}]}):(await r.get("/bulk-inquiries/my-inquiries")).data,y=async()=>(await r.get("/bulk-inquiries/my-responses")).data,f=async()=>window.location.hostname.includes("vercel.app")?(console.log("Using mock data for inquiry stats"),{totalInquiries:5,totalResponses:12,responseStats:[{status:"PENDING",_count:{status:8}},{status:"ACCEPTED",_count:{status:3}},{status:"DECLINED",_count:{status:1}}]}):(await r.get("/bulk-inquiries/stats")).data,v=async(e,t)=>(await r.put("/bulk-inquiries/response/".concat(e),t)).data},1163:function(e,t,s){e.exports=s(3079)}},function(e){e.O(0,[841,66,184,888,774,179],function(){return e(e.s=7193)}),_N_E=e.O()}]);