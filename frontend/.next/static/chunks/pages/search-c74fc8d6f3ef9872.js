(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[603],{8266:function(e,a,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/search",function(){return s(4167)}])},4167:function(e,a,s){"use strict";s.r(a);var l=s(5893),r=s(7294),t=s(5841),i=s(1163),n=s(1664),c=s.n(n);a.default=()=>{let[e,a]=(0,r.useState)(null),[n,o]=(0,r.useState)([]),[d,m]=(0,r.useState)(!1),[x,u]=(0,r.useState)(""),[g,p]=(0,r.useState)({query:"",categories:[],prefecture:"",minFollowers:0,maxFollowers:1e6,minEngagementRate:0,maxEngagementRate:100,minPrice:0,maxPrice:1e6,platforms:[],isVerified:null,gender:"",minAge:18,maxAge:65}),[h,b]=(0,r.useState)(!1),[f,y]=(0,r.useState)({field:"followers",direction:"desc",label:"フォロワー数（多い順）"}),[j,N]=(0,r.useState)([]),v=(0,i.useRouter)(),w=[{field:"followers",direction:"desc",label:"フォロワー数（多い順）"},{field:"followers",direction:"asc",label:"フォロワー数（少ない順）"},{field:"engagement",direction:"desc",label:"エンゲージメント率（高い順）"},{field:"engagement",direction:"asc",label:"エンゲージメント率（低い順）"},{field:"price",direction:"asc",label:"料金（安い順）"},{field:"price",direction:"desc",label:"料金（高い順）"},{field:"name",direction:"asc",label:"名前（あいうえお順）"},{field:"recent",direction:"desc",label:"登録日（新しい順）"}];(0,r.useEffect)(()=>{let e=localStorage.getItem("user"),s=localStorage.getItem("token");if(e&&s){let s=JSON.parse(e);if(a(s),"CLIENT"!==s.role){v.push("/dashboard");return}D()}else v.push("/login")},[v]);let D=async()=>{m(!0),u("");try{let{searchInfluencers:e}=await Promise.all([s.e(66),s.e(184)]).then(s.bind(s,2184)),a={query:g.query||void 0,categories:g.categories.length>0?g.categories:void 0,prefecture:g.prefecture||void 0,minFollowers:g.minFollowers>0?g.minFollowers:void 0,maxFollowers:g.maxFollowers<1e6?g.maxFollowers:void 0,minEngagementRate:g.minEngagementRate>0?g.minEngagementRate:void 0,maxEngagementRate:g.maxEngagementRate<100?g.maxEngagementRate:void 0,minPrice:g.minPrice>0?g.minPrice:void 0,maxPrice:g.maxPrice<1e6?g.maxPrice:void 0,platforms:g.platforms.length>0?g.platforms:void 0,isVerified:null!==g.isVerified?g.isVerified:void 0},l=await e(a);o(l.influencers||[])}catch(e){console.error("Search error:",e),u("検索に失敗しました。もう一度お試しください。")}finally{m(!1)}},k=e=>{p(a=>({...a,categories:a.categories.includes(e)?a.categories.filter(a=>a!==e):[...a.categories,e]}))},C=e=>{p(a=>({...a,platforms:a.platforms.includes(e)?a.platforms.filter(a=>a!==e):[...a.platforms,e]}))},E=()=>{let e=[...n];g.platforms.length>0&&(e=e.filter(e=>e.socialAccounts.some(e=>g.platforms.includes(e.platform)))),null!==g.isVerified&&(e=e.filter(e=>e.socialAccounts.some(e=>e.isVerified===g.isVerified))),e.sort((e,a)=>{let s,l;switch(f.field){case"followers":s=Math.max(...e.socialAccounts.map(e=>e.followerCount)),l=Math.max(...a.socialAccounts.map(e=>e.followerCount));break;case"engagement":s=Math.max(...e.socialAccounts.map(e=>e.engagementRate||0)),l=Math.max(...a.socialAccounts.map(e=>e.engagementRate||0));break;case"price":s=e.priceMin||0,l=a.priceMin||0;break;case"name":s=e.displayName,l=a.displayName;break;case"recent":s=new Date().getTime(),l=new Date().getTime();break;default:return 0}return"asc"===f.direction?s<l?-1:s>l?1:0:s>l?-1:s<l?1:0}),N(e)};(0,r.useEffect)(()=>{E()},[n,g.platforms,g.isVerified,f]);let F=e=>new Intl.NumberFormat("ja-JP",{style:"currency",currency:"JPY",minimumFractionDigits:0}).format(e),R=e=>e>=1e4?(e/1e4).toFixed(1)+"万":e.toLocaleString(),P=e=>{switch(e.toLowerCase()){case"instagram":return"\uD83D\uDCF8";case"youtube":return"\uD83C\uDFA5";case"tiktok":return"\uD83C\uDFB5";case"twitter":return"\uD83D\uDC26";default:return"\uD83D\uDCF1"}},T=e=>e.reduce((e,a)=>e+a.followerCount,0),A=e=>0===e.length?0:(e.reduce((e,a)=>e+a.engagementRate,0)/e.length).toFixed(1);return(0,l.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50",children:[(0,l.jsx)("div",{className:"bg-white/80 backdrop-blur-xl border-b border-gray-200 sticky top-0 z-10",children:(0,l.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-4 flex items-center justify-between",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,l.jsx)(c(),{href:"/dashboard",className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-500 rounded-xl flex items-center justify-center",children:(0,l.jsx)("span",{className:"text-white font-bold",children:"IM"})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"インフルエンサー検索"}),(0,l.jsx)("p",{className:"text-sm text-gray-600",children:"あなたのブランドに最適なインフルエンサーを見つけよう"})]})]}),(0,l.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,l.jsx)("span",{className:"text-gray-700",children:null==e?void 0:e.email}),(0,l.jsx)(c(),{href:"/dashboard",className:"px-4 py-2 text-gray-600 hover:text-blue-600 transition-colors",children:"ダッシュボード"})]})]})}),(0,l.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[(0,l.jsxs)(t.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},className:"bg-white/80 backdrop-blur-xl border border-gray-200 rounded-3xl p-6 shadow-xl mb-8",children:[(0,l.jsxs)("div",{className:"flex flex-col lg:flex-row gap-4",children:[(0,l.jsx)("div",{className:"flex-1",children:(0,l.jsx)("input",{type:"text",placeholder:"インフルエンサーの名前、カテゴリー、キーワードで検索...",value:g.query,onChange:e=>p({...g,query:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})}),(0,l.jsxs)("div",{className:"flex gap-3",children:[(0,l.jsx)(t.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>b(!h),className:"px-6 py-3 border-2 border-gray-300 rounded-xl font-semibold hover:bg-gray-50 transition-colors",children:"\uD83D\uDD0D フィルター"}),(0,l.jsx)(t.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:D,disabled:d,className:"px-8 py-3 bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:d?"検索中...":"検索"})]})]}),h&&(0,l.jsx)(t.E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},transition:{duration:.3},className:"mt-6 pt-6 border-t border-gray-200",children:(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"カテゴリー"}),(0,l.jsx)("div",{className:"flex flex-wrap gap-2",children:["美容","ファッション","ライフスタイル","料理","旅行","フィットネス","テクノロジー","エンタメ","ビジネス","その他"].map(e=>(0,l.jsx)("button",{onClick:()=>k(e),className:"px-3 py-1 rounded-full text-sm font-medium transition-colors ".concat(g.categories.includes(e)?"bg-blue-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:e},e))})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"都道府県"}),(0,l.jsxs)("select",{value:g.prefecture,onChange:e=>p({...g,prefecture:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,l.jsx)("option",{value:"",children:"全国"}),["北海道","青森県","岩手県","宮城県","秋田県","山形県","福島県","茨城県","栃木県","群馬県","埼玉県","千葉県","東京都","神奈川県","新潟県","富山県","石川県","福井県","山梨県","長野県","岐阜県","静岡県","愛知県","三重県","滋賀県","京都府","大阪府","兵庫県","奈良県","和歌山県","鳥取県","島根県","岡山県","広島県","山口県","徳島県","香川県","愛媛県","高知県","福岡県","佐賀県","長崎県","熊本県","大分県","宮崎県","鹿児島県","沖縄県"].map(e=>(0,l.jsx)("option",{value:e,children:e},e))]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"フォロワー数"}),(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)("input",{type:"number",placeholder:"最小",value:g.minFollowers||"",onChange:e=>p({...g,minFollowers:parseInt(e.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,l.jsx)("span",{className:"text-gray-500",children:"〜"}),(0,l.jsx)("input",{type:"number",placeholder:"最大",value:1e6===g.maxFollowers?"":g.maxFollowers,onChange:e=>p({...g,maxFollowers:parseInt(e.target.value)||1e6}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"エンゲージメント率 (%)"}),(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)("input",{type:"number",placeholder:"最小",step:"0.1",value:g.minEngagementRate||"",onChange:e=>p({...g,minEngagementRate:parseFloat(e.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,l.jsx)("span",{className:"text-gray-500",children:"〜"}),(0,l.jsx)("input",{type:"number",placeholder:"最大",step:"0.1",value:100===g.maxEngagementRate?"":g.maxEngagementRate,onChange:e=>p({...g,maxEngagementRate:parseFloat(e.target.value)||100}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"料金 (円)"}),(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)("input",{type:"number",placeholder:"最小",value:g.minPrice||"",onChange:e=>p({...g,minPrice:parseInt(e.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,l.jsx)("span",{className:"text-gray-500",children:"〜"}),(0,l.jsx)("input",{type:"number",placeholder:"最大",value:1e6===g.maxPrice?"":g.maxPrice,onChange:e=>p({...g,maxPrice:parseInt(e.target.value)||1e6}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"プラットフォーム"}),(0,l.jsx)("div",{className:"flex flex-wrap gap-2",children:[{value:"INSTAGRAM",label:"Instagram",icon:"\uD83D\uDCF8"},{value:"YOUTUBE",label:"YouTube",icon:"\uD83C\uDFA5"},{value:"TIKTOK",label:"TikTok",icon:"\uD83C\uDFB5"},{value:"TWITTER",label:"Twitter",icon:"\uD83D\uDC26"}].map(e=>(0,l.jsxs)("button",{onClick:()=>C(e.value),className:"px-3 py-2 rounded-lg text-sm font-medium transition-colors flex items-center space-x-2 ".concat(g.platforms.includes(e.value)?"bg-blue-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:[(0,l.jsx)("span",{children:e.icon}),(0,l.jsx)("span",{children:e.label})]},e.value))})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"認証バッジ"}),(0,l.jsxs)("div",{className:"flex space-x-3",children:[(0,l.jsx)("button",{onClick:()=>p({...g,isVerified:null}),className:"px-3 py-2 rounded-lg text-sm font-medium transition-colors ".concat(null===g.isVerified?"bg-blue-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:"すべて"}),(0,l.jsxs)("button",{onClick:()=>p({...g,isVerified:!0}),className:"px-3 py-2 rounded-lg text-sm font-medium transition-colors flex items-center space-x-1 ".concat(!0===g.isVerified?"bg-blue-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:[(0,l.jsx)("span",{children:"✓"}),(0,l.jsx)("span",{children:"認証済みのみ"})]}),(0,l.jsx)("button",{onClick:()=>p({...g,isVerified:!1}),className:"px-3 py-2 rounded-lg text-sm font-medium transition-colors ".concat(!1===g.isVerified?"bg-blue-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:"認証なし"})]})]}),(0,l.jsx)("div",{className:"col-span-full",children:(0,l.jsx)(t.E.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{p({query:"",categories:[],prefecture:"",minFollowers:0,maxFollowers:1e6,minEngagementRate:0,maxEngagementRate:100,minPrice:0,maxPrice:1e6,platforms:[],isVerified:null,gender:"",minAge:18,maxAge:65})},className:"w-full px-4 py-2 border-2 border-gray-300 rounded-xl font-semibold hover:bg-gray-50 transition-colors",children:"\uD83D\uDDD1️ フィルターをクリア"})})]})})]}),x&&(0,l.jsx)(t.E.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-xl mb-6",children:x}),(0,l.jsxs)(t.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"bg-white/80 backdrop-blur-xl border border-gray-200 rounded-xl p-4 mb-6 flex items-center justify-between",children:[(0,l.jsx)("div",{className:"text-gray-700",children:d?(0,l.jsx)("span",{children:"検索中..."}):(0,l.jsxs)("span",{children:[j.length,"件のインフルエンサーが見つかりました",n.length!==j.length&&(0,l.jsxs)("span",{className:"text-gray-500 ml-2",children:["（全",n.length,"件中）"]})]})}),!d&&n.length>0&&(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)("span",{className:"text-sm text-gray-600",children:"並び替え:"}),(0,l.jsx)("select",{value:w.findIndex(e=>e.field===f.field&&e.direction===f.direction),onChange:e=>{y(w[parseInt(e.target.value)])},className:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:w.map((e,a)=>(0,l.jsx)("option",{value:a,children:e.label},a))})]})]}),(0,l.jsx)("div",{className:"space-y-6",children:d?(0,l.jsxs)("div",{className:"text-center py-12",children:[(0,l.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),(0,l.jsx)("p",{className:"text-gray-600",children:"検索中..."})]}):0===j.length?(0,l.jsxs)("div",{className:"text-center py-12",children:[(0,l.jsx)("div",{className:"text-6xl mb-4",children:"\uD83D\uDD0D"}),(0,l.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"インフルエンサーが見つかりません"}),(0,l.jsx)("p",{className:"text-gray-600",children:"検索条件を変更してもう一度お試しください。"})]}):(0,l.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:j.map((e,a)=>(0,l.jsxs)(t.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1*a},className:"bg-white/80 backdrop-blur-xl border border-gray-200 rounded-3xl p-6 shadow-xl hover:shadow-2xl transition-all duration-300 cursor-pointer",onClick:()=>v.push("/influencer/".concat(e.id)),children:[(0,l.jsxs)("div",{className:"text-center mb-4",children:[(0,l.jsx)("div",{className:"w-16 h-16 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center mx-auto mb-3",children:(0,l.jsx)("span",{className:"text-white font-bold text-xl",children:e.displayName.charAt(0)})}),(0,l.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:e.displayName}),(0,l.jsx)("p",{className:"text-gray-600 text-sm",children:e.prefecture})]}),(0,l.jsx)("div",{className:"mb-4",children:(0,l.jsx)("p",{className:"text-gray-700 text-sm line-clamp-2",children:e.bio})}),(0,l.jsx)("div",{className:"flex flex-wrap gap-1 mb-4",children:e.categories.map(e=>(0,l.jsx)("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-xs font-medium",children:e},e))}),(0,l.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,l.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,l.jsx)("span",{className:"text-gray-600",children:"合計フォロワー"}),(0,l.jsx)("span",{className:"font-semibold",children:R(T(e.socialAccounts))})]}),(0,l.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,l.jsx)("span",{className:"text-gray-600",children:"平均エンゲージメント"}),(0,l.jsxs)("span",{className:"font-semibold",children:[A(e.socialAccounts),"%"]})]}),(0,l.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,l.jsx)("span",{className:"text-gray-600",children:"料金"}),(0,l.jsxs)("span",{className:"font-semibold text-green-600",children:[F(e.priceMin)," - ",F(e.priceMax)]})]})]}),(0,l.jsx)("div",{className:"flex justify-center space-x-2",children:e.socialAccounts.map(e=>(0,l.jsxs)("div",{className:"flex items-center space-x-1 px-2 py-1 bg-gray-100 rounded-lg text-xs",children:[(0,l.jsx)("span",{children:P(e.platform)}),(0,l.jsx)("span",{className:"font-medium",children:R(e.followerCount)}),e.isVerified&&(0,l.jsx)("span",{className:"text-blue-500",children:"✓"})]},e.id))})]},e.id))})})]})]})}},1163:function(e,a,s){e.exports=s(3079)}},function(e){e.O(0,[664,841,888,774,179],function(){return e(e.s=8266)}),_N_E=e.O()}]);