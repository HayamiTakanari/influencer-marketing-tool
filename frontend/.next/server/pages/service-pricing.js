(()=>{var e={};e.id=699,e.ids=[699,888,660],e.modules={3238:(e,t,s)=>{"use strict";s.a(e,async(e,r)=>{try{s.r(t),s.d(t,{config:()=>g,default:()=>x,getServerSideProps:()=>h,getStaticPaths:()=>m,getStaticProps:()=>p,reportWebVitals:()=>b,routeModule:()=>w,unstable_getServerProps:()=>j,unstable_getServerSideProps:()=>N,unstable_getStaticParams:()=>f,unstable_getStaticPaths:()=>v,unstable_getStaticProps:()=>y});var a=s(7093),i=s(5244),l=s(1323),n=s(2899),c=s.n(n),o=s(3893),d=s(6185),u=e([o,d]);[o,d]=u.then?(await u)():u;let x=(0,l.l)(d,"default"),p=(0,l.l)(d,"getStaticProps"),m=(0,l.l)(d,"getStaticPaths"),h=(0,l.l)(d,"getServerSideProps"),g=(0,l.l)(d,"config"),b=(0,l.l)(d,"reportWebVitals"),y=(0,l.l)(d,"unstable_getStaticProps"),v=(0,l.l)(d,"unstable_getStaticPaths"),f=(0,l.l)(d,"unstable_getStaticParams"),j=(0,l.l)(d,"unstable_getServerProps"),N=(0,l.l)(d,"unstable_getServerSideProps"),w=new a.PagesRouteModule({definition:{kind:i.x.PAGES,page:"/service-pricing",pathname:"/service-pricing",bundlePath:"",filename:""},components:{App:o.default,Document:c()},userland:d});r()}catch(e){r(e)}})},3893:(e,t,s)=>{"use strict";s.a(e,async(e,r)=>{try{s.r(t),s.d(t,{default:()=>u});var a=s(997);s(108);var i=s(968),l=s.n(i),n=s(6689),c=s.n(n),o=s(9752),d=e([o]);o=(d.then?(await d)():d)[0];class x extends c().Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){console.error("Error caught by boundary:",e,t)}render(){return this.state.hasError?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"エラーが発生しました"}),a.jsx("button",{onClick:()=>this.setState({hasError:!1}),className:"px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all",children:"再試行"})]})}):this.props.children}}function u({Component:e,pageProps:t}){let[s]=(0,n.useState)(()=>new o.QueryClient({defaultOptions:{queries:{staleTime:6e4,refetchOnWindowFocus:!1,retry:(e,t)=>(!t||!("status"in t)||404!==t.status)&&e<3}}}));return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(l(),{children:[a.jsx("title",{children:"インフルエンサーマーケティングツール"}),a.jsx("meta",{name:"description",content:"インフルエンサーとクライアントをつなぐマーケティングプラットフォーム"}),a.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),a.jsx("link",{rel:"icon",href:"/favicon.ico"})]}),a.jsx(x,{children:a.jsx(o.QueryClientProvider,{client:s,children:a.jsx(e,{...t})})})]})}r()}catch(e){r(e)}})},6185:(e,t,s)=>{"use strict";s.a(e,async(e,r)=>{try{s.r(t),s.d(t,{default:()=>d});var a=s(997),i=s(6689),l=s(6197),n=s(1163),c=s(3485),o=e([l,c]);[l,c]=o.then?(await o)():o;let d=()=>{let[e,t]=(0,i.useState)([]),[s,r]=(0,i.useState)(!0),[o,d]=(0,i.useState)(""),[u,x]=(0,i.useState)(null),[p,m]=(0,i.useState)(!1),[h,g]=(0,i.useState)(null),[b,y]=(0,i.useState)(!1),v=(0,n.useRouter)(),f={PHOTOGRAPHY:"撮影",VIDEO_EDITING:"動画編集",CONTENT_CREATION:"コンテンツ制作",POSTING:"投稿",STORY_CREATION:"ストーリー制作",CONSULTATION:"コンサルティング",LIVE_STREAMING:"ライブ配信",EVENT_APPEARANCE:"イベント出演"},j={per_post:"投稿あたり",per_hour:"時間あたり",per_day:"日あたり",per_project:"プロジェクトあたり"},[N,w]=(0,i.useState)(Object.keys(f).map(e=>({serviceType:e,price:0,unit:"per_post",description:"",isActive:!0}))),[S,k]=(0,i.useState)({price:0,unit:"per_post",description:"",isActive:!0});(0,i.useEffect)(()=>{let e=localStorage.getItem("user");if(!e){v.push("/login");return}let t=JSON.parse(e);if("INFLUENCER"!==t.role){v.push("/dashboard");return}P()},[v]);let P=async()=>{try{r(!0);let[e,s]=await Promise.all([(0,c.r9)(),(0,c.Ol)()]);t(e.servicePricings||[]),x(s)}catch(e){console.error("Error fetching service pricing:",e),d("料金データの取得に失敗しました。")}finally{r(!1)}},C=async e=>{e.preventDefault();try{let e=N.filter(e=>e.price>0);if(0===e.length){d("少なくとも1つの料金を設定してください。");return}await (0,c.eW)(e),m(!1),P()}catch(e){console.error("Error saving bulk pricing:",e),d("料金の保存に失敗しました。")}},A=e=>{g(e),k({price:e.price,unit:e.unit,description:e.description||"",isActive:e.isActive}),y(!0)},E=async e=>{if(e.preventDefault(),h)try{await (0,c.e7)(h.id,S),y(!1),g(null),P()}catch(e){console.error("Error updating service pricing:",e),d("料金の更新に失敗しました。")}},_=async e=>{if(confirm("この料金設定を削除しますか？"))try{await (0,c.a7)(e),P()}catch(e){console.error("Error deleting service pricing:",e),d("料金の削除に失敗しました。")}},T=(e,t,s)=>{let r=[...N];r[e]={...r[e],[t]:s},w(r)};return s?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"読み込み中..."})]})}):(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50",children:[(0,a.jsxs)("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("button",{onClick:()=>v.push("/dashboard"),className:"flex items-center space-x-2 px-4 py-2 bg-white/80 backdrop-blur-xl rounded-xl shadow-lg hover:shadow-xl transition-all text-gray-700 hover:text-blue-600",children:[a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),a.jsx("span",{className:"font-medium",children:"ダッシュボードに戻る"})]}),a.jsx(l.motion.h1,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"料金設定"})]}),a.jsx(l.motion.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>m(!0),className:"bg-gradient-to-r from-blue-500 to-purple-500 text-white px-6 py-3 rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all",children:"一括設定"})]}),o&&a.jsx(l.motion.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-xl mb-6",children:o}),u&&(0,a.jsxs)(l.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`p-6 rounded-xl mb-8 ${u.isValid?"bg-green-50 border border-green-200":"bg-yellow-50 border border-yellow-200"}`,children:[(0,a.jsxs)("div",{className:"flex items-center mb-4",children:[a.jsx("span",{className:"text-2xl mr-3",children:u.isValid?"✅":"⚠️"}),a.jsx("h2",{className:"text-xl font-bold",children:u.isValid?"料金設定が完了しています":"料金設定が不完全です"})]}),!u.isValid&&u.missingServices&&(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-gray-700 mb-2",children:"以下のサービスの料金設定が必要です："}),a.jsx("ul",{className:"list-disc list-inside space-y-1",children:u.missingServices.map(e=>a.jsx("li",{className:"text-red-600",children:f[e]},e))})]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map((e,t)=>(0,a.jsxs)(l.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*t},className:"bg-white/80 backdrop-blur-xl rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-1",children:f[e.serviceType]}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-blue-600",children:["\xa5",e.price.toLocaleString()]}),a.jsx("p",{className:"text-sm text-gray-600",children:j[e.unit]})]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[a.jsx("button",{onClick:()=>A(e),className:"text-blue-600 hover:text-blue-800 transition-colors",children:"✏️"}),a.jsx("button",{onClick:()=>_(e.id),className:"text-red-600 hover:text-red-800 transition-colors",children:"\uD83D\uDDD1️"})]})]}),e.description&&a.jsx("p",{className:"text-gray-600 text-sm mb-3 line-clamp-2",children:e.description}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${e.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:e.isActive?"有効":"無効"}),a.jsx("span",{className:"text-xs text-gray-500",children:new Date(e.updatedAt).toLocaleDateString()})]})]},e.id))}),0===e.length&&(0,a.jsxs)("div",{className:"text-center py-12",children:[a.jsx("p",{className:"text-gray-600 text-lg",children:"まだ料金設定がありません。"}),a.jsx("p",{className:"text-gray-500 mt-2",children:"「一括設定」ボタンから料金を設定してください。"})]})]}),p&&a.jsx(l.motion.div,{initial:{opacity:0},animate:{opacity:1},className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:(0,a.jsxs)(l.motion.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"bg-white rounded-3xl p-8 max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"料金一括設定"}),a.jsx("button",{onClick:()=>m(!1),className:"text-gray-500 hover:text-gray-700 text-2xl",children:"✕"})]}),(0,a.jsxs)("form",{onSubmit:C,className:"space-y-6",children:[a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:N.map((e,t)=>(0,a.jsxs)("div",{className:"bg-gray-50 rounded-xl p-4",children:[a.jsx("h3",{className:"font-semibold text-gray-800 mb-3",children:f[e.serviceType]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"料金（円）"}),a.jsx("input",{type:"number",value:e.price,onChange:e=>T(t,"price",parseInt(e.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"10000"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"単位"}),a.jsx("select",{value:e.unit,onChange:e=>T(t,"unit",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:Object.entries(j).map(([e,t])=>a.jsx("option",{value:e,children:t},e))})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"説明"}),a.jsx("textarea",{value:e.description,onChange:e=>T(t,"description",e.target.value),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"詳細説明..."})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:e.isActive,onChange:e=>T(t,"isActive",e.target.checked),className:"mr-2"}),a.jsx("label",{className:"text-sm text-gray-700",children:"有効"})]})]})]},e.serviceType))}),(0,a.jsxs)("div",{className:"flex justify-end space-x-4",children:[a.jsx("button",{type:"button",onClick:()=>m(!1),className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition-colors",children:"キャンセル"}),a.jsx("button",{type:"submit",className:"px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-xl hover:shadow-lg transition-all",children:"一括保存"})]})]})]})}),b&&h&&a.jsx(l.motion.div,{initial:{opacity:0},animate:{opacity:1},className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:(0,a.jsxs)(l.motion.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"bg-white rounded-3xl p-8 max-w-md w-full",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsxs)("h2",{className:"text-2xl font-bold text-gray-800",children:[f[h.serviceType],"の編集"]}),a.jsx("button",{onClick:()=>{y(!1),g(null)},className:"text-gray-500 hover:text-gray-700 text-2xl",children:"✕"})]}),(0,a.jsxs)("form",{onSubmit:E,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"料金（円）"}),a.jsx("input",{type:"number",value:S.price,onChange:e=>k({...S,price:parseInt(e.target.value)||0}),required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"10000"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"単位"}),a.jsx("select",{value:S.unit,onChange:e=>k({...S,unit:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500",children:Object.entries(j).map(([e,t])=>a.jsx("option",{value:e,children:t},e))})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"説明"}),a.jsx("textarea",{value:S.description,onChange:e=>k({...S,description:e.target.value}),rows:3,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"詳細説明..."})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:S.isActive,onChange:e=>k({...S,isActive:e.target.checked}),className:"mr-2"}),a.jsx("label",{className:"text-sm text-gray-700",children:"有効"})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-4",children:[a.jsx("button",{type:"button",onClick:()=>{y(!1),g(null)},className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition-colors",children:"キャンセル"}),a.jsx("button",{type:"submit",className:"px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-xl hover:shadow-lg transition-all",children:"更新"})]})]})]})})]})};r()}catch(e){r(e)}})},3485:(e,t,s)=>{"use strict";s.a(e,async(e,r)=>{try{s.d(t,{NY:()=>N,OY:()=>x,Ol:()=>h,UZ:()=>d,VZ:()=>v,Zx:()=>c,a7:()=>b,aP:()=>f,e7:()=>g,eW:()=>p,mT:()=>o,r9:()=>m,sV:()=>y,t$:()=>j,u$:()=>u});var a=s(9648),i=e([a]);a=(i.then?(await i)():i)[0];let l="http://localhost:10000/api";console.log("API_BASE_URL:",l);let n=a.default.create({baseURL:l,headers:{"Content-Type":"application/json"},timeout:1e4});n.interceptors.request.use(e=>{let t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),console.log("API Request:",e.method?.toUpperCase(),e.url,e.data),e}),n.interceptors.response.use(e=>(console.log("API Response Success:",e.status,e.data),e),e=>(console.error("API Response Error:",{status:e.response?.status,statusText:e.response?.statusText,data:e.response?.data,config:{method:e.config?.method,url:e.config?.url,data:e.config?.data}}),Promise.reject(e)));let c=async e=>(await n.post("/achievements",e)).data,o=async()=>(await n.get("/achievements/my-achievements")).data,d=async()=>(await n.get("/achievements/stats")).data,u=async(e,t)=>(await n.put(`/achievements/${e}`,t)).data,x=async e=>(await n.delete(`/achievements/${e}`)).data,p=async e=>(await n.post("/service-pricing/bulk",e)).data,m=async()=>(await n.get("/service-pricing/my-pricing")).data,h=async()=>(await n.get("/service-pricing/validate")).data,g=async(e,t)=>(await n.put(`/service-pricing/${e}`,t)).data,b=async e=>(await n.delete(`/service-pricing/${e}`)).data,y=async e=>(await n.post("/bulk-inquiries",e)).data,v=async()=>(await n.get("/bulk-inquiries/my-inquiries")).data,f=async()=>(await n.get("/bulk-inquiries/my-responses")).data,j=async()=>(await n.get("/bulk-inquiries/stats")).data,N=async(e,t)=>(await n.put(`/bulk-inquiries/response/${e}`,t)).data;r()}catch(e){r(e)}})},108:()=>{},2785:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},968:e=>{"use strict";e.exports=require("next/head")},6689:e=>{"use strict";e.exports=require("react")},6405:e=>{"use strict";e.exports=require("react-dom")},997:e=>{"use strict";e.exports=require("react/jsx-runtime")},2048:e=>{"use strict";e.exports=require("fs")},5315:e=>{"use strict";e.exports=require("path")},6162:e=>{"use strict";e.exports=require("stream")},1568:e=>{"use strict";e.exports=require("zlib")},9752:e=>{"use strict";e.exports=import("@tanstack/react-query")},9648:e=>{"use strict";e.exports=import("axios")},6197:e=>{"use strict";e.exports=import("framer-motion")}};var t=require("../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[899,132,163],()=>s(3238));module.exports=r})();