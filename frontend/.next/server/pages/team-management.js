(()=>{var e={};e.id=86,e.ids=[86,888,660],e.modules={708:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.r(t),r.d(t,{config:()=>p,default:()=>x,getServerSideProps:()=>b,getStaticPaths:()=>h,getStaticProps:()=>u,reportWebVitals:()=>g,routeModule:()=>N,unstable_getServerProps:()=>j,unstable_getServerSideProps:()=>v,unstable_getStaticParams:()=>w,unstable_getStaticPaths:()=>f,unstable_getStaticProps:()=>y});var a=r(7093),i=r(5244),l=r(1323),n=r(2899),o=r.n(n),d=r(3893),c=r(7368),m=e([d,c]);[d,c]=m.then?(await m)():m;let x=(0,l.l)(c,"default"),u=(0,l.l)(c,"getStaticProps"),h=(0,l.l)(c,"getStaticPaths"),b=(0,l.l)(c,"getServerSideProps"),p=(0,l.l)(c,"config"),g=(0,l.l)(c,"reportWebVitals"),y=(0,l.l)(c,"unstable_getStaticProps"),f=(0,l.l)(c,"unstable_getStaticPaths"),w=(0,l.l)(c,"unstable_getStaticParams"),j=(0,l.l)(c,"unstable_getServerProps"),v=(0,l.l)(c,"unstable_getServerSideProps"),N=new a.PagesRouteModule({definition:{kind:i.x.PAGES,page:"/team-management",pathname:"/team-management",bundlePath:"",filename:""},components:{App:d.default,Document:o()},userland:c});s()}catch(e){s(e)}})},3893:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.r(t),r.d(t,{default:()=>m});var a=r(997);r(108);var i=r(968),l=r.n(i),n=r(6689),o=r.n(n),d=r(9752),c=e([d]);d=(c.then?(await c)():c)[0];class x extends o().Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){console.error("Error caught by boundary:",e,t)}render(){return this.state.hasError?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"エラーが発生しました"}),a.jsx("button",{onClick:()=>this.setState({hasError:!1}),className:"px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all",children:"再試行"})]})}):this.props.children}}function m({Component:e,pageProps:t}){let[r]=(0,n.useState)(()=>new d.QueryClient({defaultOptions:{queries:{staleTime:6e4,refetchOnWindowFocus:!1,retry:(e,t)=>(!t||!("status"in t)||404!==t.status)&&e<3}}}));return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(l(),{children:[a.jsx("title",{children:"インフルエンサーマーケティングツール"}),a.jsx("meta",{name:"description",content:"インフルエンサーとクライアントをつなぐマーケティングプラットフォーム"}),a.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),a.jsx("link",{rel:"icon",href:"/favicon.ico"})]}),a.jsx(x,{children:a.jsx(d.QueryClientProvider,{client:r,children:a.jsx(e,{...t})})})]})}s()}catch(e){s(e)}})},7368:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.r(t),r.d(t,{default:()=>m});var a=r(997),i=r(6689),l=r(6197),n=r(1163),o=r(1664),d=r.n(o),c=e([l]);l=(c.then?(await c)():c)[0];let m=()=>{let e;let[t,s]=(0,i.useState)(null),[o,c]=(0,i.useState)(null),[m,x]=(0,i.useState)(!0),[u,h]=(0,i.useState)(""),[b,p]=(0,i.useState)(!1),[g,y]=(0,i.useState)(!1),[f,w]=(0,i.useState)(""),[j,v]=(0,i.useState)(""),[N,S]=(0,i.useState)(!1),[k,E]=(0,i.useState)(!1),[O,D]=(0,i.useState)(null),[T,C]=(0,i.useState)(!1),R=(0,n.useRouter)();(0,i.useEffect)(()=>{let e=localStorage.getItem("user"),t=localStorage.getItem("token");if(e&&t){let t=JSON.parse(e);if(s(t),"CLIENT"!==t.role&&"COMPANY"!==t.role){R.push("/dashboard");return}P()}else R.push("/login")},[R]);let P=async()=>{try{let{getMyTeam:e}=await r.e(279).then(r.bind(r,4279)),t=await e();c(t),t&&w(t.name)}catch(e){console.error("Error fetching team data:",e),e.response?.status===404||"ERR_NETWORK"===e.code||e.message?.includes("getMyTeam is not a function")?(console.log("Using fallback: No team exists or API not implemented"),c(null),h("")):h("チーム情報の取得に失敗しました。開発中の機能です。")}finally{x(!1)}},_=async e=>{if(e.preventDefault(),f.trim()){E(!0);try{let{createTeam:e}=await r.e(279).then(r.bind(r,4279)),t=await e({name:f.trim()});c(t),p(!1),w(t.name),await P()}catch(e){if(console.error("Error creating team:",e),"ERR_NETWORK"===e.code||e.message?.includes("createTeam is not a function")){let e={id:"mock-team-1",name:f.trim(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),members:[{id:"mock-member-1",isOwner:!0,joinedAt:new Date().toISOString(),user:{id:t?.id||"mock-user-1",email:t?.email||"user@example.com",role:t?.role||"CLIENT",createdAt:new Date().toISOString()}}],clients:[]};c(e),p(!1),w(e.name),h("")}else h("チームの作成に失敗しました。開発中の機能です。")}finally{E(!1)}}},q=async e=>{if(e.preventDefault(),o&&f.trim()){E(!0);try{let{updateTeam:e}=await r.e(279).then(r.bind(r,4279)),t=await e(o.id,{name:f.trim()});c(t),C(!1),await P()}catch(e){console.error("Error updating team:",e),"ERR_NETWORK"===e.code||e.message?.includes("updateTeam is not a function")?(c({...o,name:f.trim()}),C(!1),h("")):h("チーム名の更新に失敗しました。開発中の機能です。")}finally{E(!1)}}},A=async e=>{if(e.preventDefault(),o&&j.trim()){E(!0);try{let{addTeamMember:e}=await r.e(279).then(r.bind(r,4279));await e(o.id,{email:j.trim(),isOwner:N}),await P(),y(!1),v(""),S(!1),h("")}catch(e){if(console.error("Error adding member:",e),"ERR_NETWORK"===e.code||e.message?.includes("addTeamMember is not a function")){let e={id:`mock-member-${Date.now()}`,isOwner:N,joinedAt:new Date().toISOString(),user:{id:`mock-user-${Date.now()}`,email:j.trim(),role:"CLIENT",createdAt:new Date().toISOString()}};c({...o,members:[...o.members,e]}),y(!1),v(""),S(!1),h("")}else h("メンバーの追加に失敗しました。開発中の機能です。")}finally{E(!1)}}},I=async(e,t)=>{if(o&&confirm(`${t} をチームから削除しますか？`)){D(e);try{let{removeTeamMember:t}=await r.e(279).then(r.bind(r,4279));await t(o.id,e),await P(),h("")}catch(t){console.error("Error removing member:",t),"ERR_NETWORK"===t.code||t.message?.includes("removeTeamMember is not a function")?(c({...o,members:o.members.filter(t=>t.id!==e)}),h("")):h("メンバーの削除に失敗しました。開発中の機能です。")}finally{D(null)}}},H=async(e,t,s)=>{if(o&&confirm(`${s} に${t?"管理者権限を削除":"管理者権限を付与"}しますか？`)){D(e);try{let{updateMemberRole:s}=await r.e(279).then(r.bind(r,4279));await s(o.id,e,{isOwner:!t}),await P(),h("")}catch(r){if(console.error("Error updating member role:",r),"ERR_NETWORK"===r.code||r.message?.includes("updateMemberRole is not a function")){let r=o.members.map(r=>r.id===e?{...r,isOwner:!t}:r);c({...o,members:r}),h("")}else h("権限の更新に失敗しました。開発中の機能です。")}finally{D(null)}}},W=async()=>{if(o&&confirm("チームを削除しますか？この操作は取り消せません。")){E(!0);try{let{deleteTeam:e}=await r.e(279).then(r.bind(r,4279));await e(o.id),c(null),h("")}catch(e){console.error("Error deleting team:",e),"ERR_NETWORK"===e.code||e.message?.includes("deleteTeam is not a function")?(c(null),h("")):h("チームの削除に失敗しました。開発中の機能です。")}finally{E(!1)}}},M=e=>new Date(e).toLocaleDateString("ja-JP",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),K=!!t&&(e=t.id,o?.members.find(t=>t.user.id===e)?.isOwner||!1);return m?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"読み込み中..."})]})}):(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50",children:[a.jsx("div",{className:"bg-white/80 backdrop-blur-xl border-b border-gray-200 sticky top-0 z-10",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-4 flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[a.jsx(d(),{href:"/dashboard",className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-500 rounded-xl flex items-center justify-center",children:a.jsx("span",{className:"text-white font-bold",children:"IM"})}),(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"チーム管理"}),a.jsx("p",{className:"text-sm text-gray-600",children:"チームメンバーの管理と権限設定"})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[a.jsx("span",{className:"text-gray-700",children:t?.email}),a.jsx(d(),{href:"/dashboard",className:"px-4 py-2 text-gray-600 hover:text-blue-600 transition-colors",children:"ダッシュボード"})]})]})}),(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[a.jsx(l.motion.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-blue-50 border border-blue-200 text-blue-700 px-4 py-3 rounded-xl mb-6",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:"text-xl",children:"\uD83D\uDEA7"}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"font-medium",children:"開発中の機能です"}),a.jsx("p",{className:"text-sm",children:"チーム管理機能は現在開発中です。一部の機能はモックデータで動作します。"})]})]})}),u&&a.jsx(l.motion.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-xl mb-6",children:u}),o?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(l.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},className:"bg-white/80 backdrop-blur-xl border border-gray-200 rounded-3xl p-8 shadow-xl mb-8",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("div",{children:[T?(0,a.jsxs)("form",{onSubmit:q,className:"flex items-center space-x-3",children:[a.jsx("input",{type:"text",value:f,onChange:e=>w(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),a.jsx(l.motion.button,{whileHover:{scale:1.05},whileTap:{scale:.95},type:"submit",disabled:k,className:"px-3 py-1 bg-blue-500 text-white rounded-lg font-medium hover:bg-blue-600 transition-colors disabled:opacity-50",children:k?"保存中...":"保存"}),a.jsx(l.motion.button,{whileHover:{scale:1.05},whileTap:{scale:.95},type:"button",onClick:()=>{C(!1),w(o.name)},className:"px-3 py-1 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"キャンセル"})]}):(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:o.name}),K&&a.jsx(l.motion.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>C(!0),className:"px-3 py-1 text-sm border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"✏️ 編集"})]}),(0,a.jsxs)("p",{className:"text-gray-600 mt-2",children:["作成日: ",M(o.createdAt)]})]}),a.jsx("div",{className:"flex space-x-3",children:K&&(0,a.jsxs)(a.Fragment,{children:[a.jsx(l.motion.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>y(!0),className:"px-4 py-2 bg-gradient-to-r from-green-500 to-blue-500 text-white rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all",children:"+ メンバー追加"}),a.jsx(l.motion.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:W,disabled:k,className:"px-4 py-2 border-2 border-red-300 text-red-700 rounded-xl font-semibold hover:bg-red-50 transition-colors disabled:opacity-50",children:"チーム削除"})]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"bg-blue-50 rounded-xl p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-blue-600",children:o.members.length}),a.jsx("div",{className:"text-blue-800",children:"メンバー数"})]}),(0,a.jsxs)("div",{className:"bg-green-50 rounded-xl p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-green-600",children:o.members.filter(e=>e.isOwner).length}),a.jsx("div",{className:"text-green-800",children:"管理者数"})]}),(0,a.jsxs)("div",{className:"bg-purple-50 rounded-xl p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-purple-600",children:o.clients.length}),a.jsx("div",{className:"text-purple-800",children:"関連クライアント"})]})]})]}),(0,a.jsxs)(l.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2},className:"bg-white/80 backdrop-blur-xl border border-gray-200 rounded-3xl p-8 shadow-xl",children:[a.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-6",children:"チームメンバー"}),a.jsx("div",{className:"space-y-4",children:o.members.map((e,r)=>(0,a.jsxs)(l.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1*r},className:"flex items-center justify-between p-4 border border-gray-200 rounded-xl hover:shadow-lg transition-all",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-white font-bold",children:e.user.email.charAt(0).toUpperCase()})}),(0,a.jsxs)("div",{children:[a.jsx("h4",{className:"font-semibold text-gray-900",children:e.user.email}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${e.isOwner?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:e.isOwner?"\uD83D\uDC51 管理者":"\uD83D\uDC64 メンバー"}),(0,a.jsxs)("span",{className:"text-gray-500 text-sm",children:["参加: ",M(e.joinedAt)]})]})]})]}),K&&e.user.id!==t.id&&(0,a.jsxs)("div",{className:"flex space-x-2",children:[a.jsx(l.motion.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>H(e.id,e.isOwner,e.user.email),disabled:O===e.id,className:`px-3 py-1 text-sm rounded-lg font-medium transition-colors disabled:opacity-50 ${e.isOwner?"border border-yellow-300 text-yellow-700 hover:bg-yellow-50":"bg-yellow-500 text-white hover:bg-yellow-600"}`,children:O===e.id?"処理中...":e.isOwner?"管理者解除":"管理者に昇格"}),a.jsx(l.motion.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>I(e.id,e.user.email),disabled:O===e.id,className:"px-3 py-1 text-sm border border-red-300 text-red-700 rounded-lg hover:bg-red-50 transition-colors disabled:opacity-50",children:"削除"})]})]},e.id))})]})]}):(0,a.jsxs)(l.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},className:"bg-white/80 backdrop-blur-xl border border-gray-200 rounded-3xl p-8 shadow-xl text-center",children:[a.jsx("div",{className:"text-6xl mb-6",children:"\uD83D\uDC65"}),a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"チームを作成しましょう"}),a.jsx("p",{className:"text-gray-600 mb-8",children:"チームを作成して、複数のメンバーでプロジェクトを管理できます。"}),b?(0,a.jsxs)("form",{onSubmit:_,className:"max-w-md mx-auto",children:[(0,a.jsxs)("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"チーム名"}),a.jsx("input",{type:"text",value:f,onChange:e=>w(e.target.value),required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"例: マーケティングチーム"})]}),(0,a.jsxs)("div",{className:"flex space-x-3",children:[a.jsx(l.motion.button,{whileHover:{scale:1.05},whileTap:{scale:.95},type:"submit",disabled:k,className:"flex-1 bg-gradient-to-r from-blue-500 to-purple-500 text-white py-3 rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all disabled:opacity-50",children:k?"作成中...":"作成"}),a.jsx(l.motion.button,{whileHover:{scale:1.05},whileTap:{scale:.95},type:"button",onClick:()=>p(!1),className:"flex-1 border-2 border-gray-300 text-gray-700 py-3 rounded-xl font-semibold hover:bg-gray-50 transition-colors",children:"キャンセル"})]})]}):a.jsx(l.motion.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>p(!0),className:"px-8 py-3 bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all",children:"チームを作成"})]}),g&&a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:(0,a.jsxs)(l.motion.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"bg-white rounded-3xl p-8 max-w-md w-full relative",children:[a.jsx("button",{onClick:()=>{y(!1),v(""),S(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700",children:"✕"}),a.jsx("h2",{className:"text-2xl font-bold mb-6 text-center",children:"メンバーを追加"}),(0,a.jsxs)("form",{onSubmit:A,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"メールアドレス"}),a.jsx("input",{type:"email",value:j,onChange:e=>v(e.target.value),required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"member@example.com"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"checkbox",id:"isOwner",checked:N,onChange:e=>S(e.target.checked),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2"}),a.jsx("label",{htmlFor:"isOwner",className:"text-sm text-gray-700",children:"管理者権限を付与する"})]}),a.jsx(l.motion.button,{whileHover:{scale:1.02},whileTap:{scale:.98},type:"submit",disabled:k,className:"w-full bg-gradient-to-r from-blue-500 to-purple-500 text-white py-4 rounded-xl font-bold text-lg shadow-lg hover:shadow-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:k?"追加中...":"メンバーを追加"})]})]})})]})]})};s()}catch(e){s(e)}})},108:()=>{},2785:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},968:e=>{"use strict";e.exports=require("next/head")},6689:e=>{"use strict";e.exports=require("react")},6405:e=>{"use strict";e.exports=require("react-dom")},997:e=>{"use strict";e.exports=require("react/jsx-runtime")},2048:e=>{"use strict";e.exports=require("fs")},5315:e=>{"use strict";e.exports=require("path")},6162:e=>{"use strict";e.exports=require("stream")},1568:e=>{"use strict";e.exports=require("zlib")},9752:e=>{"use strict";e.exports=import("@tanstack/react-query")},9648:e=>{"use strict";e.exports=import("axios")},6197:e=>{"use strict";e.exports=import("framer-motion")}};var t=require("../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[899,132,163,664],()=>r(708));module.exports=s})();