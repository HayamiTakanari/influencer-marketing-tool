(()=>{var e={};e.id=76,e.ids=[76,888,660],e.modules={9676:(e,t,s)=>{"use strict";s.a(e,async(e,a)=>{try{s.r(t),s.d(t,{config:()=>g,default:()=>u,getServerSideProps:()=>h,getStaticPaths:()=>p,getStaticProps:()=>m,reportWebVitals:()=>b,routeModule:()=>w,unstable_getServerProps:()=>N,unstable_getServerSideProps:()=>v,unstable_getStaticParams:()=>f,unstable_getStaticPaths:()=>j,unstable_getStaticProps:()=>y});var r=s(7093),l=s(5244),i=s(1323),n=s(2899),c=s.n(n),o=s(3893),d=s(6757),x=e([o,d]);[o,d]=x.then?(await x)():x;let u=(0,i.l)(d,"default"),m=(0,i.l)(d,"getStaticProps"),p=(0,i.l)(d,"getStaticPaths"),h=(0,i.l)(d,"getServerSideProps"),g=(0,i.l)(d,"config"),b=(0,i.l)(d,"reportWebVitals"),y=(0,i.l)(d,"unstable_getStaticProps"),j=(0,i.l)(d,"unstable_getStaticPaths"),f=(0,i.l)(d,"unstable_getStaticParams"),N=(0,i.l)(d,"unstable_getServerProps"),v=(0,i.l)(d,"unstable_getServerSideProps"),w=new r.PagesRouteModule({definition:{kind:l.x.PAGES,page:"/bulk-inquiry",pathname:"/bulk-inquiry",bundlePath:"",filename:""},components:{App:o.default,Document:c()},userland:d});a()}catch(e){a(e)}})},3893:(e,t,s)=>{"use strict";s.a(e,async(e,a)=>{try{s.r(t),s.d(t,{default:()=>x});var r=s(997);s(108);var l=s(968),i=s.n(l),n=s(6689),c=s.n(n),o=s(9752),d=e([o]);o=(d.then?(await d)():d)[0];class u extends c().Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){console.error("Error caught by boundary:",e,t)}render(){return this.state.hasError?r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"エラーが発生しました"}),r.jsx("button",{onClick:()=>this.setState({hasError:!1}),className:"px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all",children:"再試行"})]})}):this.props.children}}function x({Component:e,pageProps:t}){let[s]=(0,n.useState)(()=>new o.QueryClient({defaultOptions:{queries:{staleTime:6e4,refetchOnWindowFocus:!1,retry:(e,t)=>(!t||!("status"in t)||404!==t.status)&&e<3}}}));return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(i(),{children:[r.jsx("title",{children:"インフルエンサーマーケティングツール"}),r.jsx("meta",{name:"description",content:"インフルエンサーとクライアントをつなぐマーケティングプラットフォーム"}),r.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),r.jsx("link",{rel:"icon",href:"/favicon.ico"})]}),r.jsx(u,{children:r.jsx(o.QueryClientProvider,{client:s,children:r.jsx(e,{...t})})})]})}a()}catch(e){a(e)}})},6757:(e,t,s)=>{"use strict";s.a(e,async(e,a)=>{try{s.r(t),s.d(t,{default:()=>x});var r=s(997),l=s(6689),i=s(6197),n=s(1163),c=s(3485),o=s(4279),d=e([i,c,o]);[i,c,o]=d.then?(await d)():d;let x=()=>{let[e,t]=(0,l.useState)("create"),[s,a]=(0,l.useState)([]),[d,x]=(0,l.useState)([]),[u,m]=(0,l.useState)(null),[p,h]=(0,l.useState)(!0),[g,b]=(0,l.useState)(""),[y,j]=(0,l.useState)(!1),[f,N]=(0,l.useState)(null),v=(0,n.useRouter)(),[w,S]=(0,l.useState)(null),[C,E]=(0,l.useState)([]),[P,k]=(0,l.useState)([]),[q,I]=(0,l.useState)([]),[D,A]=(0,l.useState)(null),[T,L]=(0,l.useState)(!0),[R,$]=(0,l.useState)(!1),[F,O]=(0,l.useState)(!1),[_,G]=(0,l.useState)(""),[U,Y]=(0,l.useState)(!1),[M,V]=(0,l.useState)({title:"",description:"",budget:0,deadline:"",requiredServices:[]}),[W,B]=(0,l.useState)({status:"PENDING",proposedPrice:0,message:"",availableFrom:"",availableTo:""}),Z={PHOTOGRAPHY:"撮影",VIDEO_EDITING:"動画編集",CONTENT_CREATION:"コンテンツ制作",POSTING:"投稿",STORY_CREATION:"ストーリー制作",CONSULTATION:"コンサルティング",LIVE_STREAMING:"ライブ配信",EVENT_APPEARANCE:"イベント出演"},z={PENDING:"返答待ち",ACCEPTED:"承諾",DECLINED:"辞退",EXPIRED:"期限切れ"},J={PENDING:"bg-yellow-100 text-yellow-800",ACCEPTED:"bg-green-100 text-green-800",DECLINED:"bg-red-100 text-red-800",EXPIRED:"bg-gray-100 text-gray-800"};(0,l.useEffect)(()=>{let e=localStorage.getItem("user");if(!e){v.push("/login");return}let s=JSON.parse(e);if(S(s),"CLIENT"===s.role||"COMPANY"===s.role)t("create");else if("INFLUENCER"===s.role)t("received");else{v.push("/dashboard");return}K(),("CLIENT"===s.role||"COMPANY"===s.role)&&X()},[v]);let K=async()=>{try{h(!0);let e=JSON.parse(localStorage.getItem("user")||"{}");if("CLIENT"===e.role||"COMPANY"===e.role){let[e,t]=await Promise.all([(0,c.VZ)(),(0,c.t$)()]);a(e.inquiries||[]),m(t)}else if("INFLUENCER"===e.role){let e=await (0,c.aP)();x(e.responses||[])}}catch(e){console.error("Error fetching data:",e),b("データの取得に失敗しました。")}finally{h(!1)}},X=async()=>{try{let e=await (0,o.searchInfluencers)({});E(e.influencers||[])}catch(e){console.error("Error fetching influencers:",e)}},H=async()=>{if(!M.title||!M.description){b("タイトルと説明を入力してからAIレコメンドを実行してください。");return}try{$(!0),b("");let e=await (0,o.ij)({title:M.title,description:M.description,requiredServices:M.requiredServices,budget:M.budget>0?M.budget:void 0});I(e.influencers||[]),A(e.analysis||null);let t=e.influencers.filter(e=>e.aiScore>=80).map(e=>e.id);k(t)}catch(e){console.error("Error getting AI recommendations:",e),b("AIレコメンドの取得に失敗しました。")}finally{$(!1)}},Q=async e=>{if(e.preventDefault(),console.log("Form submitted - Debug info:"),console.log("Selected influencers:",P),console.log("Inquiry form:",M),console.log("Required services:",M.requiredServices),console.log("API Base URL:","http://localhost:10000/api"),!M.title.trim()){b("タイトルを入力してください。");return}if(!M.description.trim()){b("説明を入力してください。");return}if(0===M.requiredServices.length){b("必要なサービスを選択してください。");return}if(0===P.length){b("問い合わせ対象のインフルエンサーを選択してください。");return}try{b(""),G(""),O(!0),console.log("Sending inquiry...");let e={...M,targetInfluencers:P,budget:M.budget>0?M.budget:void 0,deadline:M.deadline||void 0};console.log("Submit data:",e);let s=await (0,c.sV)(e);console.log("Inquiry created successfully:",s),Y(!0),G(`一括送信しました！${P.length}人のインフルエンサーに問い合わせを送信しました。`),V({title:"",description:"",budget:0,deadline:"",requiredServices:[]}),k([]),I([]),A(null),setTimeout(()=>{t("sent"),G(""),Y(!1),K()},3e3)}catch(t){console.error("Error creating inquiry:",t);let e="問い合わせの送信に失敗しました";t.response?.data?.error?e+=`: ${t.response.data.error}`:t.response?.data?.details?e+=`: ${JSON.stringify(t.response.data.details)}`:t.message&&(e+=`: ${t.message}`),b(e)}finally{O(!1)}},ee=async e=>{if(e.preventDefault(),f)try{let e={...W,proposedPrice:W.proposedPrice>0?W.proposedPrice:void 0,availableFrom:W.availableFrom||void 0,availableTo:W.availableTo||void 0};await (0,c.NY)(f.id,e),j(!1),N(null),K()}catch(e){console.error("Error updating response:",e),b("回答の更新に失敗しました。")}},et=e=>{N(e),B({status:e.status,proposedPrice:e.proposedPrice||0,message:e.message||"",availableFrom:e.availableFrom?e.availableFrom.split("T")[0]:"",availableTo:e.availableTo?e.availableTo.split("T")[0]:""}),j(!0)},es=e=>{k(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},ea=e=>{V(t=>({...t,requiredServices:t.requiredServices.includes(e)?t.requiredServices.filter(t=>t!==e):[...t.requiredServices,e]}))};return p?r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600",children:"読み込み中..."})]})}):(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50",children:[(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4 mb-8",children:[(0,r.jsxs)("button",{onClick:()=>v.push("/dashboard"),className:"flex items-center space-x-2 px-4 py-2 bg-white/80 backdrop-blur-xl rounded-xl shadow-lg hover:shadow-xl transition-all text-gray-700 hover:text-blue-600",children:[r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),r.jsx("span",{className:"font-medium",children:"ダッシュボードに戻る"})]}),r.jsx(i.motion.h1,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"一斉問い合わせ"})]}),g&&r.jsx(i.motion.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-xl mb-6",children:g}),_&&r.jsx(i.motion.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-xl mb-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{className:"text-xl",children:"✅"}),r.jsx("span",{children:_})]}),r.jsx("button",{onClick:()=>{b(""),G(""),Y(!1),V({title:"",description:"",budget:0,deadline:"",requiredServices:[]}),k([]),I([]),A(null)},className:"px-4 py-2 bg-green-600 text-white rounded-lg text-sm font-semibold hover:bg-green-700 transition-colors",children:"新しい問い合わせを作成"})]})}),(0,r.jsxs)("div",{className:"flex space-x-4 mb-8",children:[(w?.role==="CLIENT"||w?.role==="COMPANY")&&(0,r.jsxs)(r.Fragment,{children:[r.jsx("button",{onClick:()=>t("create"),className:`px-6 py-3 rounded-xl font-semibold transition-all ${"create"===e?"bg-blue-600 text-white shadow-lg":"bg-white/80 text-gray-700 hover:bg-white"}`,children:"問い合わせ作成"}),r.jsx("button",{onClick:()=>t("sent"),className:`px-6 py-3 rounded-xl font-semibold transition-all ${"sent"===e?"bg-blue-600 text-white shadow-lg":"bg-white/80 text-gray-700 hover:bg-white"}`,children:"送信済み"})]}),w?.role==="INFLUENCER"&&r.jsx("button",{onClick:()=>t("received"),className:`px-6 py-3 rounded-xl font-semibold transition-all ${"received"===e?"bg-blue-600 text-white shadow-lg":"bg-white/80 text-gray-700 hover:bg-white"}`,children:"受信済み"})]}),"create"===e&&(w?.role==="CLIENT"||w?.role==="COMPANY")&&(0,r.jsxs)(i.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white/80 backdrop-blur-xl rounded-2xl p-8 shadow-lg",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:"新しい問い合わせを作成"}),(0,r.jsxs)("form",{onSubmit:Q,className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"タイトル *"}),r.jsx("input",{type:"text",value:M.title,onChange:e=>V({...M,title:e.target.value}),required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"春の新商品プロモーション"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"予算（円）"}),r.jsx("input",{type:"number",value:M.budget,onChange:e=>V({...M,budget:parseInt(e.target.value)||0}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"100000"})]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"説明 *"}),r.jsx("textarea",{value:M.description,onChange:e=>V({...M,description:e.target.value}),required:!0,rows:4,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"プロジェクトの詳細説明..."})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"回答期限"}),r.jsx("input",{type:"datetime-local",value:M.deadline,onChange:e=>V({...M,deadline:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"必要なサービス *"}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:Object.entries(Z).map(([e,t])=>(0,r.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:M.requiredServices.includes(e),onChange:()=>ea(e),className:"rounded"}),r.jsx("span",{className:"text-sm",children:t})]},e))})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:["問い合わせ対象インフルエンサー * (",P.length,"人選択中)"]}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[r.jsx("button",{type:"button",onClick:H,disabled:R||!M.title||!M.description,className:"flex items-center space-x-2 px-4 py-2 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-lg font-semibold hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:R?(0,r.jsxs)(r.Fragment,{children:[r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),r.jsx("span",{children:"分析中..."})]}):(0,r.jsxs)(r.Fragment,{children:[r.jsx("span",{children:"\uD83E\uDD16"}),r.jsx("span",{children:"AIレコメンド"})]})}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx("button",{type:"button",onClick:()=>L(!0),className:`px-3 py-1 rounded-lg text-sm font-medium transition-all ${T?"bg-blue-500 text-white":"bg-gray-200 text-gray-700"}`,children:"AIモード"}),r.jsx("button",{type:"button",onClick:()=>L(!1),className:`px-3 py-1 rounded-lg text-sm font-medium transition-all ${T?"bg-gray-200 text-gray-700":"bg-blue-500 text-white"}`,children:"手動選択"})]})]})]}),D&&(0,r.jsxs)("div",{className:"mb-4 p-4 bg-gradient-to-r from-purple-50 to-pink-50 border border-purple-200 rounded-xl",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[r.jsx("span",{className:"text-lg",children:"\uD83E\uDD16"}),r.jsx("h4",{className:"font-semibold text-purple-900",children:"AI分析結果"})]}),r.jsx("p",{className:"text-sm text-purple-800 mb-3",children:D.recommendationSummary}),D.detectedKeywords&&D.detectedKeywords.length>0&&(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-xs text-purple-700 mb-2",children:"検出されたキーワード:"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:D.detectedKeywords.map((e,t)=>(0,r.jsxs)("span",{className:"px-2 py-1 bg-purple-100 text-purple-800 rounded-full text-xs",children:[e.category," (",e.score,")"]},t))})]})]}),(0,r.jsxs)("div",{className:"max-h-80 overflow-y-auto border border-gray-300 rounded-xl p-4",children:[(T?q:C).map(e=>(0,r.jsxs)("label",{className:`flex items-center space-x-3 py-3 cursor-pointer hover:bg-gray-50 rounded-lg px-2 border-l-4 ${e.isRecommended?"border-l-green-500 bg-green-50":"border-l-transparent"}`,children:[r.jsx("input",{type:"checkbox",checked:P.includes(e.id),onChange:()=>es(e.id),className:"rounded"}),r.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-500 rounded-full flex items-center justify-center text-white font-bold cursor-pointer hover:shadow-md transition-all flex-shrink-0",onClick:t=>{t.preventDefault(),t.stopPropagation(),v.push(`/influencer/${e.id}`)},title:`${e.displayName}の詳細を見る`,children:e.displayName?.charAt(0)||"U"}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[r.jsx("p",{className:"font-medium",children:e.displayName}),e.aiScore&&(0,r.jsxs)("div",{className:`px-2 py-1 rounded-full text-xs font-semibold ${e.aiScore>=90?"bg-green-100 text-green-800":e.aiScore>=80?"bg-blue-100 text-blue-800":e.aiScore>=70?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:["マッチ度: ",e.aiScore,"%"]}),e.isRecommended&&r.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-800 rounded-full text-xs font-semibold",children:"\uD83C\uDF1F おすすめ"})]}),r.jsx("p",{className:"text-sm text-gray-600 mb-1",children:e.bio}),(0,r.jsxs)("p",{className:"text-xs text-gray-500",children:[e.categories?.join(", ")," | ",e.prefecture]}),e.matchReasons&&e.matchReasons.length>0&&(0,r.jsxs)("div",{className:"mt-2",children:[r.jsx("p",{className:"text-xs font-medium text-gray-700 mb-1",children:"マッチング理由:"}),r.jsx("div",{className:"flex flex-wrap gap-1",children:e.matchReasons.map((e,t)=>r.jsx("span",{className:"px-2 py-1 bg-blue-50 text-blue-700 rounded text-xs",children:e},t))})]}),e.socialAccounts&&e.socialAccounts.length>0&&r.jsx("div",{className:"flex space-x-3 mt-2",children:e.socialAccounts.map((e,t)=>(0,r.jsxs)("div",{className:"text-xs text-gray-500",children:[e.platform,": ",e.followerCount?.toLocaleString(),"人"]},t))})]})]},e.id)),T&&0===q.length&&!R&&(0,r.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[r.jsx("p",{className:"text-lg mb-2",children:"\uD83E\uDD16"}),r.jsx("p",{children:"「AIレコメンド」ボタンをクリックして、最適なインフルエンサーを見つけましょう"}),r.jsx("p",{className:"text-sm mt-1",children:"タイトルと説明を入力後にご利用ください"})]}),!T&&0===C.length&&r.jsx("div",{className:"text-center py-8 text-gray-500",children:r.jsx("p",{children:"インフルエンサーが見つかりませんでした"})})]})]}),r.jsx("div",{className:"flex justify-end",children:r.jsx("button",{type:"submit",disabled:F||U,className:`px-8 py-3 rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2 ${U?"bg-gradient-to-r from-green-500 to-green-600 text-white":"bg-gradient-to-r from-blue-500 to-purple-500 text-white"}`,children:F?(0,r.jsxs)(r.Fragment,{children:[r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),r.jsx("span",{children:"送信中..."})]}):U?(0,r.jsxs)(r.Fragment,{children:[r.jsx("span",{className:"text-lg",children:"✅"}),r.jsx("span",{children:"送信完了"})]}):r.jsx("span",{children:"問い合わせを送信"})})})]})]}),"sent"===e&&(w?.role==="CLIENT"||w?.role==="COMPANY")&&(0,r.jsxs)(i.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:[u&&(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,r.jsxs)("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl p-6 shadow-lg",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"総問い合わせ数"}),r.jsx("p",{className:"text-3xl font-bold text-blue-600",children:u.totalInquiries})]}),(0,r.jsxs)("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl p-6 shadow-lg",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"総回答数"}),r.jsx("p",{className:"text-3xl font-bold text-green-600",children:u.totalResponses})]}),(0,r.jsxs)("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl p-6 shadow-lg",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"回答状況"}),r.jsx("div",{className:"space-y-1 text-sm",children:u.responseStats?.map(e=>r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:z[e.status]}),r.jsx("span",{className:"font-semibold",children:e._count.status})]},e.status))})]})]}),r.jsx("div",{className:"space-y-4",children:s.map(e=>(0,r.jsxs)("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl p-6 shadow-lg",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-xl font-bold text-gray-800",children:e.title}),r.jsx("p",{className:"text-gray-600",children:e.description})]}),(0,r.jsxs)("div",{className:"text-right",children:[r.jsx("p",{className:"text-sm text-gray-500",children:new Date(e.createdAt).toLocaleDateString()}),e.budget&&(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["予算: \xa5",e.budget.toLocaleString()]})]})]}),(0,r.jsxs)("div",{className:"mb-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"必要なサービス:"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:e.requiredServices.map(e=>r.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm",children:Z[e]},e))})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{className:"text-sm font-medium text-gray-700 mb-2",children:["回答状況 (",e.responses.length,"件)"]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:e.responses.map(e=>(0,r.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"w-6 h-6 bg-gradient-to-br from-blue-500 to-purple-500 rounded-full flex items-center justify-center text-white font-bold text-xs cursor-pointer hover:shadow-md transition-all",onClick:()=>v.push(`/influencer/${e.influencer.id}`),title:`${e.influencer.displayName}の詳細を見る`,children:e.influencer.displayName.charAt(0)}),r.jsx("p",{className:"font-medium text-sm",children:e.influencer.displayName})]}),r.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${J[e.status]}`,children:z[e.status]})]}),e.proposedPrice&&(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["提案価格: \xa5",e.proposedPrice.toLocaleString()]}),e.message&&r.jsx("p",{className:"text-xs text-gray-500 mt-1 line-clamp-2",children:e.message})]},e.id))})]})]},e.id))}),0===s.length&&(0,r.jsxs)("div",{className:"text-center py-12",children:[r.jsx("p",{className:"text-gray-600 text-lg",children:"まだ問い合わせを送信していません。"}),r.jsx("p",{className:"text-gray-500 mt-2",children:"「問い合わせ作成」タブから新しい問い合わせを作成してください。"})]})]}),"received"===e&&w?.role==="INFLUENCER"&&(0,r.jsxs)(i.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:[d.map(e=>(0,r.jsxs)("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl p-6 shadow-lg",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-xl font-bold text-gray-800",children:e.inquiry.title}),r.jsx("p",{className:"text-gray-600",children:e.inquiry.client.companyName})]}),(0,r.jsxs)("div",{className:"text-right",children:[r.jsx("span",{className:`px-3 py-1 rounded-full text-sm ${J[e.status]}`,children:z[e.status]}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:new Date(e.createdAt).toLocaleDateString()})]})]}),r.jsx("p",{className:"text-gray-700 mb-4",children:e.inquiry.description}),e.inquiry.budget&&(0,r.jsxs)("p",{className:"text-sm text-gray-600 mb-2",children:["予算: \xa5",e.inquiry.budget.toLocaleString()]}),(0,r.jsxs)("div",{className:"mb-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"必要なサービス:"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:e.inquiry.requiredServices.map(e=>r.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm",children:Z[e]},e))})]}),"PENDING"===e.status&&r.jsx("div",{className:"flex justify-end",children:r.jsx("button",{onClick:()=>et(e),className:"px-6 py-2 bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-xl font-semibold hover:shadow-lg transition-all",children:"回答する"})}),"PENDING"!==e.status&&(0,r.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 mt-4",children:[r.jsx("p",{className:"font-medium text-sm text-gray-700 mb-2",children:"あなたの回答:"}),e.proposedPrice&&(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["提案価格: \xa5",e.proposedPrice.toLocaleString()]}),e.message&&r.jsx("p",{className:"text-sm text-gray-700 mt-1",children:e.message})]})]},e.id)),0===d.length&&r.jsx("div",{className:"text-center py-12",children:r.jsx("p",{className:"text-gray-600 text-lg",children:"まだ問い合わせを受信していません。"})})]})]}),y&&f&&r.jsx(i.motion.div,{initial:{opacity:0},animate:{opacity:1},className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:(0,r.jsxs)(i.motion.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"bg-white rounded-3xl p-8 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"問い合わせに回答"}),r.jsx("button",{onClick:()=>{j(!1),N(null)},className:"text-gray-500 hover:text-gray-700 text-2xl",children:"✕"})]}),(0,r.jsxs)("div",{className:"mb-6 p-4 bg-gray-50 rounded-xl",children:[r.jsx("h3",{className:"font-bold text-lg mb-2",children:f.inquiry.title}),r.jsx("p",{className:"text-gray-600 mb-2",children:f.inquiry.description}),r.jsx("p",{className:"text-sm text-gray-500",children:f.inquiry.client.companyName})]}),(0,r.jsxs)("form",{onSubmit:ee,className:"space-y-6",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"回答 *"}),(0,r.jsxs)("select",{value:W.status,onChange:e=>B({...W,status:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"PENDING",children:"検討中"}),r.jsx("option",{value:"ACCEPTED",children:"承諾"}),r.jsx("option",{value:"DECLINED",children:"辞退"})]})]}),"ACCEPTED"===W.status&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"提案価格（円）"}),r.jsx("input",{type:"number",value:W.proposedPrice,onChange:e=>B({...W,proposedPrice:parseInt(e.target.value)||0}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"100000"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"対応可能開始日"}),r.jsx("input",{type:"date",value:W.availableFrom,onChange:e=>B({...W,availableFrom:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"対応可能終了日"}),r.jsx("input",{type:"date",value:W.availableTo,onChange:e=>B({...W,availableTo:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"メッセージ"}),r.jsx("textarea",{value:W.message,onChange:e=>B({...W,message:e.target.value}),rows:4,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"詳細なメッセージ..."})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-4",children:[r.jsx("button",{type:"button",onClick:()=>{j(!1),N(null)},className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition-colors",children:"キャンセル"}),r.jsx("button",{type:"submit",className:"px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-xl hover:shadow-lg transition-all",children:"回答を送信"})]})]})]})})]})};a()}catch(e){a(e)}})},3485:(e,t,s)=>{"use strict";s.a(e,async(e,a)=>{try{s.d(t,{NY:()=>v,OY:()=>u,Ol:()=>h,UZ:()=>d,VZ:()=>j,Zx:()=>c,a7:()=>b,aP:()=>f,e7:()=>g,eW:()=>m,mT:()=>o,r9:()=>p,sV:()=>y,t$:()=>N,u$:()=>x});var r=s(9648),l=e([r]);r=(l.then?(await l)():l)[0];let i="http://localhost:10000/api";console.log("API_BASE_URL:",i);let n=r.default.create({baseURL:i,headers:{"Content-Type":"application/json"},timeout:1e4});n.interceptors.request.use(e=>{let t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),console.log("API Request:",e.method?.toUpperCase(),e.url,e.data),e}),n.interceptors.response.use(e=>(console.log("API Response Success:",e.status,e.data),e),e=>(console.error("API Response Error:",{status:e.response?.status,statusText:e.response?.statusText,data:e.response?.data,config:{method:e.config?.method,url:e.config?.url,data:e.config?.data}}),Promise.reject(e)));let c=async e=>(await n.post("/achievements",e)).data,o=async()=>(await n.get("/achievements/my-achievements")).data,d=async()=>(await n.get("/achievements/stats")).data,x=async(e,t)=>(await n.put(`/achievements/${e}`,t)).data,u=async e=>(await n.delete(`/achievements/${e}`)).data,m=async e=>(await n.post("/service-pricing/bulk",e)).data,p=async()=>(await n.get("/service-pricing/my-pricing")).data,h=async()=>(await n.get("/service-pricing/validate")).data,g=async(e,t)=>(await n.put(`/service-pricing/${e}`,t)).data,b=async e=>(await n.delete(`/service-pricing/${e}`)).data,y=async e=>(await n.post("/bulk-inquiries",e)).data,j=async()=>(await n.get("/bulk-inquiries/my-inquiries")).data,f=async()=>(await n.get("/bulk-inquiries/my-responses")).data,N=async()=>(await n.get("/bulk-inquiries/stats")).data,v=async(e,t)=>(await n.put(`/bulk-inquiries/response/${e}`,t)).data;a()}catch(e){a(e)}})},108:()=>{},2785:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},968:e=>{"use strict";e.exports=require("next/head")},6689:e=>{"use strict";e.exports=require("react")},6405:e=>{"use strict";e.exports=require("react-dom")},997:e=>{"use strict";e.exports=require("react/jsx-runtime")},2048:e=>{"use strict";e.exports=require("fs")},5315:e=>{"use strict";e.exports=require("path")},6162:e=>{"use strict";e.exports=require("stream")},1568:e=>{"use strict";e.exports=require("zlib")},9752:e=>{"use strict";e.exports=import("@tanstack/react-query")},9648:e=>{"use strict";e.exports=import("axios")},6197:e=>{"use strict";e.exports=import("framer-motion")}};var t=require("../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[899,132,163,279],()=>s(9676));module.exports=a})();