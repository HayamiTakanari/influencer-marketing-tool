(()=>{var e={};e.id=929,e.ids=[929,888,660],e.modules={6248:(e,t,s)=>{"use strict";s.a(e,async(e,a)=>{try{s.r(t),s.d(t,{config:()=>b,default:()=>m,getServerSideProps:()=>p,getStaticPaths:()=>u,getStaticProps:()=>h,reportWebVitals:()=>g,routeModule:()=>w,unstable_getServerProps:()=>v,unstable_getServerSideProps:()=>f,unstable_getStaticParams:()=>N,unstable_getStaticPaths:()=>j,unstable_getStaticProps:()=>y});var r=s(7093),l=s(5244),i=s(1323),n=s(2899),c=s.n(n),o=s(3893),d=s(4050),x=e([o,d]);[o,d]=x.then?(await x)():x;let m=(0,i.l)(d,"default"),h=(0,i.l)(d,"getStaticProps"),u=(0,i.l)(d,"getStaticPaths"),p=(0,i.l)(d,"getServerSideProps"),b=(0,i.l)(d,"config"),g=(0,i.l)(d,"reportWebVitals"),y=(0,i.l)(d,"unstable_getStaticProps"),j=(0,i.l)(d,"unstable_getStaticPaths"),N=(0,i.l)(d,"unstable_getStaticParams"),v=(0,i.l)(d,"unstable_getServerProps"),f=(0,i.l)(d,"unstable_getServerSideProps"),w=new r.PagesRouteModule({definition:{kind:l.x.PAGES,page:"/reviews",pathname:"/reviews",bundlePath:"",filename:""},components:{App:o.default,Document:c()},userland:d});a()}catch(e){a(e)}})},3893:(e,t,s)=>{"use strict";s.a(e,async(e,a)=>{try{s.r(t),s.d(t,{default:()=>x});var r=s(997);s(108);var l=s(968),i=s.n(l),n=s(6689),c=s.n(n),o=s(9752),d=e([o]);o=(d.then?(await d)():d)[0];class m extends c().Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){console.error("Error caught by boundary:",e,t)}render(){return this.state.hasError?r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"エラーが発生しました"}),r.jsx("button",{onClick:()=>this.setState({hasError:!1}),className:"px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all",children:"再試行"})]})}):this.props.children}}function x({Component:e,pageProps:t}){let[s]=(0,n.useState)(()=>new o.QueryClient({defaultOptions:{queries:{staleTime:6e4,refetchOnWindowFocus:!1,retry:(e,t)=>(!t||!("status"in t)||404!==t.status)&&e<3}}}));return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(i(),{children:[r.jsx("title",{children:"インフルエンサーマーケティングツール"}),r.jsx("meta",{name:"description",content:"インフルエンサーとクライアントをつなぐマーケティングプラットフォーム"}),r.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),r.jsx("link",{rel:"icon",href:"/favicon.ico"})]}),r.jsx(m,{children:r.jsx(o.QueryClientProvider,{client:s,children:r.jsx(e,{...t})})})]})}a()}catch(e){a(e)}})},4050:(e,t,s)=>{"use strict";s.a(e,async(e,a)=>{try{s.r(t),s.d(t,{default:()=>x});var r=s(997),l=s(6689),i=s(6197),n=s(1163),c=s(1664),o=s.n(c),d=e([i]);i=(d.then?(await d)():d)[0];let x=()=>{let[e,t]=(0,l.useState)(null),[a,c]=(0,l.useState)([]),[d,x]=(0,l.useState)([]),[m,h]=(0,l.useState)(!0),[u,p]=(0,l.useState)(""),[b,g]=(0,l.useState)("received"),[y,j]=(0,l.useState)(!1),[N,v]=(0,l.useState)(null),[f,w]=(0,l.useState)({rating:5,comment:"",isPublic:!0}),[S,k]=(0,l.useState)(!1),P=(0,n.useRouter)();(0,l.useEffect)(()=>{let e=localStorage.getItem("user"),s=localStorage.getItem("token");if(e&&s){let s=JSON.parse(e);t(s),C()}else P.push("/login")},[P,b]);let C=async()=>{try{h(!0),"reviewable"===b?await q():await E()}catch(e){console.error("Error fetching data:",e),p("データの取得に失敗しました。")}finally{h(!1)}},E=async()=>{try{let{getMyReviews:e}=await s.e(279).then(s.bind(s,4279)),t=await e(b);c(t.reviews||[])}catch(e){throw console.error("Error fetching reviews:",e),e}},q=async()=>{try{let{getReviewableProjects:e}=await s.e(279).then(s.bind(s,4279)),t=await e();x(t||[])}catch(e){throw console.error("Error fetching reviewable projects:",e),e}},D=async()=>{if(N){k(!0);try{let{createReview:e}=await s.e(279).then(s.bind(s,4279));await e({projectId:N.id,rating:f.rating,comment:f.comment||void 0,isPublic:f.isPublic}),j(!1),v(null),w({rating:5,comment:"",isPublic:!0}),await C(),alert("レビューを投稿しました！")}catch(e){console.error("Error creating review:",e),alert("レビューの投稿に失敗しました。")}finally{k(!1)}}},I=e=>{v(e),j(!0)},T=e=>new Date(e).toLocaleDateString("ja-JP",{year:"numeric",month:"short",day:"numeric"}),_=(e,t=!1)=>Array.from({length:5},(s,a)=>{let l=a<e;return r.jsx("span",{className:`text-xl ${l?"text-yellow-400":"text-gray-300"} ${t?"cursor-pointer hover:text-yellow-400":""}`,onClick:t?()=>w(e=>({...e,rating:a+1})):void 0,children:"⭐"},a)});return m?r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600",children:"読み込み中..."})]})}):(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50",children:[r.jsx("div",{className:"bg-white/80 backdrop-blur-xl border-b border-gray-200 sticky top-0 z-10",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-4 flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[r.jsx(o(),{href:"/dashboard",className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-500 rounded-xl flex items-center justify-center",children:r.jsx("span",{className:"text-white font-bold",children:"IM"})}),(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"レビュー"}),r.jsx("p",{className:"text-sm text-gray-600",children:"評価とフィードバック"})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[r.jsx("span",{className:"text-gray-700",children:e?.email}),r.jsx(o(),{href:"/dashboard",className:"px-4 py-2 text-gray-600 hover:text-blue-600 transition-colors",children:"ダッシュボード"})]})]})}),(0,r.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[u&&r.jsx(i.motion.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-xl mb-6",children:u}),r.jsx(i.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white/80 backdrop-blur-xl border border-gray-200 rounded-3xl p-6 shadow-xl mb-8",children:(0,r.jsxs)("div",{className:"flex gap-2 flex-wrap",children:[r.jsx(i.motion.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>g("received"),className:`px-4 py-2 rounded-xl font-medium transition-all ${"received"===b?"bg-blue-500 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"受信したレビュー"}),r.jsx(i.motion.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>g("given"),className:`px-4 py-2 rounded-xl font-medium transition-all ${"given"===b?"bg-blue-500 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"投稿したレビュー"}),r.jsx(i.motion.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>g("reviewable"),className:`px-4 py-2 rounded-xl font-medium transition-all ${"reviewable"===b?"bg-blue-500 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"レビューを書く"})]})}),"received"===b&&r.jsx("div",{className:"space-y-4",children:0===a.length?(0,r.jsxs)("div",{className:"text-center py-12",children:[r.jsx("div",{className:"text-6xl mb-4",children:"⭐"}),r.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"受信したレビューがありません"}),r.jsx("p",{className:"text-gray-600",children:"プロジェクトが完了すると、クライアントからレビューが届きます。"})]}):a.map((t,s)=>(0,r.jsxs)(i.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.05*s},className:"bg-white/80 backdrop-blur-xl border border-gray-200 rounded-3xl p-6 shadow-xl",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"font-bold text-gray-900 mb-1",children:t.project.title}),r.jsx("p",{className:"text-sm text-gray-600",children:t.project.category}),(0,r.jsxs)("div",{className:"flex items-center mt-2",children:[_(t.rating),(0,r.jsxs)("span",{className:"ml-2 text-sm text-gray-600",children:["(",t.rating,"/5)"]})]})]}),(0,r.jsxs)("div",{className:"text-right",children:[r.jsx("p",{className:"text-sm text-gray-600",children:T(t.createdAt)}),r.jsx("p",{className:"text-xs text-gray-500",children:"INFLUENCER"===e.role?t.client?.companyName:t.influencer?.displayName})]})]}),t.comment&&r.jsx("div",{className:"bg-gray-50 rounded-xl p-4",children:r.jsx("p",{className:"text-gray-700",children:t.comment})}),!t.isPublic&&r.jsx("div",{className:"mt-3",children:r.jsx("span",{className:"inline-block px-2 py-1 bg-orange-100 text-orange-700 text-xs rounded-lg",children:"非公開"})})]},t.id))}),"given"===b&&r.jsx("div",{className:"space-y-4",children:0===a.length?(0,r.jsxs)("div",{className:"text-center py-12",children:[r.jsx("div",{className:"text-6xl mb-4",children:"\uD83D\uDCDD"}),r.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"投稿したレビューがありません"}),r.jsx("p",{className:"text-gray-600",children:"完了したプロジェクトについてレビューを投稿してみましょう。"})]}):a.map((t,s)=>(0,r.jsxs)(i.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.05*s},className:"bg-white/80 backdrop-blur-xl border border-gray-200 rounded-3xl p-6 shadow-xl",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"font-bold text-gray-900 mb-1",children:t.project.title}),r.jsx("p",{className:"text-sm text-gray-600",children:t.project.category}),(0,r.jsxs)("div",{className:"flex items-center mt-2",children:[_(t.rating),(0,r.jsxs)("span",{className:"ml-2 text-sm text-gray-600",children:["(",t.rating,"/5)"]})]})]}),(0,r.jsxs)("div",{className:"text-right",children:[r.jsx("p",{className:"text-sm text-gray-600",children:T(t.createdAt)}),(0,r.jsxs)("p",{className:"text-xs text-gray-500",children:["レビュー対象: ","CLIENT"===e.role?t.influencer?.displayName:t.client?.companyName]})]})]}),t.comment&&r.jsx("div",{className:"bg-gray-50 rounded-xl p-4",children:r.jsx("p",{className:"text-gray-700",children:t.comment})}),(0,r.jsxs)("div",{className:"flex items-center justify-between mt-4",children:[r.jsx("div",{children:!t.isPublic&&r.jsx("span",{className:"inline-block px-2 py-1 bg-orange-100 text-orange-700 text-xs rounded-lg",children:"非公開"})}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[r.jsx("button",{className:"px-3 py-1 text-sm text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:"編集"}),r.jsx("button",{className:"px-3 py-1 text-sm text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:"削除"})]})]})]},t.id))}),"reviewable"===b&&r.jsx("div",{className:"space-y-4",children:0===d.length?(0,r.jsxs)("div",{className:"text-center py-12",children:[r.jsx("div",{className:"text-6xl mb-4",children:"✅"}),r.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"レビュー可能なプロジェクトがありません"}),r.jsx("p",{className:"text-gray-600",children:"完了したプロジェクトがあると、ここに表示されレビューを投稿できます。"})]}):d.map((t,s)=>r.jsx(i.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.05*s},className:"bg-white/80 backdrop-blur-xl border border-gray-200 rounded-3xl p-6 shadow-xl",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"font-bold text-gray-900 mb-1",children:t.title}),r.jsx("p",{className:"text-sm text-gray-600 mb-2",children:t.category}),(0,r.jsxs)("p",{className:"text-xs text-gray-500",children:["完了日: ",T(t.updatedAt)]}),r.jsx("p",{className:"text-xs text-gray-500",children:"CLIENT"===e.role?`インフルエンサー: ${t.matchedInfluencer?.displayName}`:`クライアント: ${t.client?.companyName}`})]}),r.jsx(i.motion.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>I(t),className:"px-4 py-2 bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all",children:"レビューを書く"})]})},t.id))})]}),y&&N&&r.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:(0,r.jsxs)(i.motion.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-3xl p-6 max-w-md w-full shadow-xl",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"レビューを投稿"}),(0,r.jsxs)("div",{className:"mb-4",children:[r.jsx("h3",{className:"font-medium text-gray-900 mb-1",children:N.title}),r.jsx("p",{className:"text-sm text-gray-600",children:N.category}),r.jsx("p",{className:"text-sm text-gray-600",children:"CLIENT"===e.role?`インフルエンサー: ${N.matchedInfluencer?.displayName}`:`クライアント: ${N.client?.companyName}`})]}),(0,r.jsxs)("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"評価"}),(0,r.jsxs)("div",{className:"flex items-center",children:[_(f.rating,!0),(0,r.jsxs)("span",{className:"ml-2 text-sm text-gray-600",children:["(",f.rating,"/5)"]})]})]}),(0,r.jsxs)("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"コメント（任意）"}),r.jsx("textarea",{value:f.comment,onChange:e=>w(t=>({...t,comment:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-xl focus:ring-blue-500 focus:border-blue-500",rows:4,placeholder:"プロジェクトの感想やフィードバックを入力してください..."})]}),r.jsx("div",{className:"mb-6",children:(0,r.jsxs)("label",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",checked:f.isPublic,onChange:e=>w(t=>({...t,isPublic:e.target.checked})),className:"mr-2 rounded"}),r.jsx("span",{className:"text-sm text-gray-700",children:"このレビューを公開する"})]})}),(0,r.jsxs)("div",{className:"flex space-x-3",children:[r.jsx(i.motion.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>j(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition-colors",children:"キャンセル"}),r.jsx(i.motion.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:D,disabled:S,className:"flex-1 px-4 py-2 bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all disabled:opacity-50",children:S?"投稿中...":"投稿する"})]})]})})]})};a()}catch(e){a(e)}})},108:()=>{},2785:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},968:e=>{"use strict";e.exports=require("next/head")},6689:e=>{"use strict";e.exports=require("react")},6405:e=>{"use strict";e.exports=require("react-dom")},997:e=>{"use strict";e.exports=require("react/jsx-runtime")},2048:e=>{"use strict";e.exports=require("fs")},5315:e=>{"use strict";e.exports=require("path")},6162:e=>{"use strict";e.exports=require("stream")},1568:e=>{"use strict";e.exports=require("zlib")},9752:e=>{"use strict";e.exports=import("@tanstack/react-query")},9648:e=>{"use strict";e.exports=import("axios")},6197:e=>{"use strict";e.exports=import("framer-motion")}};var t=require("../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[899,132,163,664],()=>s(6248));module.exports=a})();