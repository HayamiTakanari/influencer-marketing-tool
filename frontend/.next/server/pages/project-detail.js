(()=>{var e={};e.id=338,e.ids=[338,888,660],e.modules={9097:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.r(t),r.d(t,{config:()=>h,default:()=>m,getServerSideProps:()=>p,getStaticPaths:()=>u,getStaticProps:()=>g,reportWebVitals:()=>b,routeModule:()=>w,unstable_getServerProps:()=>N,unstable_getServerSideProps:()=>v,unstable_getStaticParams:()=>y,unstable_getStaticPaths:()=>f,unstable_getStaticProps:()=>j});var s=r(7093),l=r(5244),i=r(1323),n=r(2899),c=r.n(n),o=r(3893),d=r(1680),x=e([o,d]);[o,d]=x.then?(await x)():x;let m=(0,i.l)(d,"default"),g=(0,i.l)(d,"getStaticProps"),u=(0,i.l)(d,"getStaticPaths"),p=(0,i.l)(d,"getServerSideProps"),h=(0,i.l)(d,"config"),b=(0,i.l)(d,"reportWebVitals"),j=(0,i.l)(d,"unstable_getStaticProps"),f=(0,i.l)(d,"unstable_getStaticPaths"),y=(0,i.l)(d,"unstable_getStaticParams"),N=(0,i.l)(d,"unstable_getServerProps"),v=(0,i.l)(d,"unstable_getServerSideProps"),w=new s.PagesRouteModule({definition:{kind:l.x.PAGES,page:"/project-detail",pathname:"/project-detail",bundlePath:"",filename:""},components:{App:o.default,Document:c()},userland:d});a()}catch(e){a(e)}})},3893:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.r(t),r.d(t,{default:()=>x});var s=r(997);r(108);var l=r(968),i=r.n(l),n=r(6689),c=r.n(n),o=r(9752),d=e([o]);o=(d.then?(await d)():d)[0];class m extends c().Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){console.error("Error caught by boundary:",e,t)}render(){return this.state.hasError?s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"エラーが発生しました"}),s.jsx("button",{onClick:()=>this.setState({hasError:!1}),className:"px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all",children:"再試行"})]})}):this.props.children}}function x({Component:e,pageProps:t}){let[r]=(0,n.useState)(()=>new o.QueryClient({defaultOptions:{queries:{staleTime:6e4,refetchOnWindowFocus:!1,retry:(e,t)=>(!t||!("status"in t)||404!==t.status)&&e<3}}}));return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(i(),{children:[s.jsx("title",{children:"インフルエンサーマーケティングツール"}),s.jsx("meta",{name:"description",content:"インフルエンサーとクライアントをつなぐマーケティングプラットフォーム"}),s.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),s.jsx("link",{rel:"icon",href:"/favicon.ico"})]}),s.jsx(m,{children:s.jsx(o.QueryClientProvider,{client:r,children:s.jsx(e,{...t})})})]})}a()}catch(e){a(e)}})},1680:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.r(t),r.d(t,{default:()=>x});var s=r(997),l=r(6689),i=r(6197),n=r(1163),c=r(1664),o=r.n(c),d=e([i]);i=(d.then?(await d)():d)[0];let x=()=>{let[e,t]=(0,l.useState)(null),[a,c]=(0,l.useState)(null),[d,x]=(0,l.useState)(!0),[m,g]=(0,l.useState)(""),[u,p]=(0,l.useState)("overview"),h=(0,n.useRouter)(),{id:b}=h.query;(0,l.useEffect)(()=>{console.log("Project Detail - useEffect triggered, id:",b);let e=localStorage.getItem("user"),r=localStorage.getItem("token");if(console.log("Project Detail - userData:",e),console.log("Project Detail - token:",r),e&&r){let r=JSON.parse(e);if(console.log("Project Detail - User data:",r),t(r),"CLIENT"!==r.role&&"COMPANY"!==r.role){console.log("Access denied - User role:",r.role),h.push("/dashboard");return}console.log("Access granted - User role:",r.role),b?(console.log("Fetching project details for id:",b),j()):console.log("No project id available yet")}else console.log("No user data or token - redirecting to login"),h.push("/login")},[b,h]);let j=async()=>{try{console.log("Calling getProjectById with id:",b);let{getProjectById:e}=await r.e(279).then(r.bind(r,4279)),t=await e(b);console.log("Project details received:",t),c(t)}catch(t){console.error("Error fetching project details:",t),console.log("Using fallback mock data for project ID:",b);let e={1:{id:"1",title:"新商品コスメのPRキャンペーン",description:"新発売のファンデーションを使用した投稿をお願いします。自然な仕上がりが特徴の商品で、20-30代の女性をターゲットにしています。",category:"美容・化粧品",budget:3e5,status:"PENDING",targetPlatforms:["INSTAGRAM","TIKTOK"],targetPrefecture:"東京都",targetCity:"渋谷区、新宿区",targetGender:"FEMALE",targetAgeMin:20,targetAgeMax:35,targetFollowerMin:1e4,targetFollowerMax:1e5,startDate:"2024-02-01",endDate:"2024-02-28",deliverables:"Instagram投稿2回、ストーリー投稿3回、TikTok動画1本",requirements:"ナチュラルメイクでの使用感を重視、#新商品コスメ #ナチュラルメイク のハッシュタグ必須",additionalInfo:"商品サンプル提供、撮影用メイク道具一式貸出可能",createdAt:"2024-01-15",applications:[{id:"app1",influencer:{id:"inf1",displayName:"田中美咲",bio:"美容・ファッション系インフルエンサー。20代女性向けコンテンツ発信中。",categories:["美容","ファッション"],prefecture:"東京都",priceMin:5e4,priceMax:2e5,socialAccounts:[{platform:"INSTAGRAM",followerCount:35e3,engagementRate:3.5},{platform:"YOUTUBE",followerCount:15e3,engagementRate:2.8}]},message:"この商品にとても興味があります。ナチュラルメイクが得意で、同世代の女性に向けた発信を心がけています。",proposedPrice:15e4,appliedAt:"2024-01-16",isAccepted:!1}]},2:{id:"2",title:"ライフスタイル商品のレビュー",description:"日常使いできる便利グッズの紹介をお願いします。実際に使用した感想や活用方法を自然な形で発信してください。",category:"ライフスタイル",budget:15e4,status:"IN_PROGRESS",targetPlatforms:["YOUTUBE","INSTAGRAM"],targetPrefecture:"全国",targetCity:"",targetGender:"",targetAgeMin:25,targetAgeMax:45,targetFollowerMin:5e3,targetFollowerMax:5e4,startDate:"2024-01-20",endDate:"2024-02-20",deliverables:"YouTube動画1本、Instagram投稿1回、ストーリー投稿2回",requirements:"実際の使用感を重視、#便利グッズ #ライフスタイル のハッシュタグ必須",additionalInfo:"商品サンプル提供、返品不要",createdAt:"2024-01-10",applications:[{id:"app2",influencer:{id:"inf2",displayName:"鈴木さやか",bio:"ライフスタイル系クリエイター。料理、旅行、美容など幅広く発信。",categories:["ライフスタイル","美容","料理"],prefecture:"大阪府",priceMin:8e4,priceMax:3e5,socialAccounts:[{platform:"INSTAGRAM",followerCount:6e4,engagementRate:4.2},{platform:"TIKTOK",followerCount:29e3,engagementRate:5.1}]},message:"ライフスタイル商品のレビューは得意分野です。フォロワーからの反響も良いのでぜひ参加させてください。",proposedPrice:12e4,appliedAt:"2024-01-11",isAccepted:!0}],matchedInfluencer:{id:"inf2",displayName:"鈴木さやか"}}}[b];if(e)c(e);else{let e={id:b||Date.now().toString(),title:`プロジェクト ${b}`,description:"このプロジェクトの詳細情報を表示しています。実際のデータが利用できない場合のフォールバック表示です。",category:"その他",budget:2e5,status:"PENDING",targetPlatforms:["INSTAGRAM"],targetPrefecture:"東京都",targetCity:"",targetGender:"",targetAgeMin:20,targetAgeMax:40,targetFollowerMin:5e3,targetFollowerMax:5e4,startDate:new Date().toISOString().split("T")[0],endDate:new Date(Date.now()+2592e6).toISOString().split("T")[0],deliverables:"Instagram投稿1回、ストーリー投稿1回",requirements:"ブランドガイドラインに従った投稿",additionalInfo:"その他の詳細については別途ご連絡いたします。",createdAt:new Date().toISOString(),applications:[]};c(e)}g("")}finally{x(!1)}},f=async e=>{try{console.log("Accepting application:",e),alert("応募を承諾しました！"),await j()}catch(e){console.error("Error accepting application:",e),alert("応募承諾に失敗しました。")}},y=async e=>{if(confirm("この応募を却下しますか？"))try{console.log("Rejecting application:",e),alert("応募を却下しました。"),await j()}catch(e){console.error("Error rejecting application:",e),alert("応募却下に失敗しました。")}},N=e=>{switch(e){case"PENDING":return{label:"募集中",color:"bg-yellow-100 text-yellow-800"};case"MATCHED":return{label:"マッチング済み",color:"bg-blue-100 text-blue-800"};case"IN_PROGRESS":return{label:"進行中",color:"bg-green-100 text-green-800"};case"COMPLETED":return{label:"完了",color:"bg-purple-100 text-purple-800"};case"CANCELLED":return{label:"キャンセル",color:"bg-red-100 text-red-800"};default:return{label:"不明",color:"bg-gray-100 text-gray-800"}}},v=e=>new Intl.NumberFormat("ja-JP",{style:"currency",currency:"JPY",minimumFractionDigits:0}).format(e),w=e=>new Date(e).toLocaleDateString("ja-JP",{year:"numeric",month:"long",day:"numeric"}),D=e=>{switch(e.toLowerCase()){case"instagram":return"\uD83D\uDCF8";case"youtube":return"\uD83C\uDFA5";case"tiktok":return"\uD83C\uDFB5";case"twitter":return"\uD83D\uDC26";default:return"\uD83D\uDCF1"}},S=e=>e>=1e4?(e/1e4).toFixed(1)+"万":e.toLocaleString();return d?s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"読み込み中..."})]})}):m||!a?s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[s.jsx("div",{className:"text-6xl mb-4",children:"❌"}),s.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"エラーが発生しました"}),s.jsx("p",{className:"text-gray-600 mb-4",children:m||"プロジェクトが見つかりませんでした。"}),s.jsx(o(),{href:"/projects",className:"text-blue-600 hover:underline",children:"プロジェクト一覧に戻る"})]})}):(0,s.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50",children:[s.jsx("div",{className:"bg-white/80 backdrop-blur-xl border-b border-gray-200 sticky top-0 z-10",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-4 flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsxs)("button",{onClick:()=>h.push("/dashboard"),className:"flex items-center space-x-2 px-4 py-2 bg-white/80 backdrop-blur-xl rounded-xl shadow-lg hover:shadow-xl transition-all text-gray-700 hover:text-blue-600",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),s.jsx("span",{className:"font-medium",children:"ダッシュボードに戻る"})]}),(0,s.jsxs)("div",{children:[s.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"プロジェクト詳細"}),s.jsx("p",{className:"text-sm text-gray-600",children:a.title})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[s.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${N(a.status).color}`,children:N(a.status).label}),s.jsx(o(),{href:"/projects",className:"px-4 py-2 text-gray-600 hover:text-blue-600 transition-colors",children:"一覧に戻る"})]})]})}),(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[(0,s.jsxs)(i.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},className:"bg-white/80 backdrop-blur-xl border border-gray-200 rounded-3xl p-8 shadow-xl mb-8",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:a.title}),s.jsx("div",{className:"text-2xl font-bold text-green-600",children:v(a.budget)})]}),s.jsx("p",{className:"text-gray-700 mb-6",children:a.description}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[(0,s.jsxs)("div",{className:"text-center",children:[s.jsx("div",{className:"text-lg font-bold text-gray-900",children:a.category}),s.jsx("div",{className:"text-gray-600 text-sm",children:"カテゴリー"})]}),(0,s.jsxs)("div",{className:"text-center",children:[s.jsx("div",{className:"text-lg font-bold text-gray-900",children:w(a.startDate)}),s.jsx("div",{className:"text-gray-600 text-sm",children:"開始日"})]}),(0,s.jsxs)("div",{className:"text-center",children:[s.jsx("div",{className:"text-lg font-bold text-gray-900",children:w(a.endDate)}),s.jsx("div",{className:"text-gray-600 text-sm",children:"終了日"})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsxs)("div",{className:"text-lg font-bold text-gray-900",children:[a.applications.length,"件"]}),s.jsx("div",{className:"text-gray-600 text-sm",children:"応募数"})]})]}),s.jsx("div",{className:"flex space-x-2 mb-4",children:a.targetPlatforms.map(e=>(0,s.jsxs)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800",children:[D(e)," ",e]},e))})]}),s.jsx(i.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2},className:"bg-white/80 backdrop-blur-xl border border-gray-200 rounded-3xl p-2 shadow-xl mb-8",children:s.jsx("div",{className:"flex space-x-2",children:[{key:"overview",label:"詳細情報",icon:"\uD83D\uDCCB"},{key:"applications",label:"応募一覧",icon:"\uD83D\uDCDD"}].map(e=>(0,s.jsxs)(i.motion.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>p(e.key),className:`flex-1 px-6 py-3 rounded-2xl font-semibold transition-all ${u===e.key?"bg-gradient-to-r from-blue-500 to-purple-500 text-white shadow-lg":"text-gray-600 hover:bg-gray-100"}`,children:[s.jsx("span",{className:"mr-2",children:e.icon}),e.label]},e.key))})}),"overview"===u&&(0,s.jsxs)(i.motion.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5},className:"space-y-6",children:[(0,s.jsxs)("div",{className:"bg-white/80 backdrop-blur-xl border border-gray-200 rounded-3xl p-8 shadow-xl",children:[s.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-6",children:"ターゲット設定"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,s.jsxs)("div",{children:[s.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"地域"}),s.jsx("p",{className:"text-gray-600",children:a.targetPrefecture}),a.targetCity&&s.jsx("p",{className:"text-gray-500 text-sm",children:a.targetCity})]}),(0,s.jsxs)("div",{children:[s.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"性別"}),s.jsx("p",{className:"text-gray-600",children:"MALE"===a.targetGender?"男性":"FEMALE"===a.targetGender?"女性":"OTHER"===a.targetGender?"その他":"指定なし"})]}),(0,s.jsxs)("div",{children:[s.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"年齢層"}),s.jsx("p",{className:"text-gray-600",children:a.targetAgeMin>0&&a.targetAgeMax>0?`${a.targetAgeMin}-${a.targetAgeMax}歳`:"指定なし"})]}),(0,s.jsxs)("div",{children:[s.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"フォロワー数"}),s.jsx("p",{className:"text-gray-600",children:a.targetFollowerMin>0&&a.targetFollowerMax>0?`${S(a.targetFollowerMin)} - ${S(a.targetFollowerMax)}`:"指定なし"})]})]})]}),(0,s.jsxs)("div",{className:"bg-white/80 backdrop-blur-xl border border-gray-200 rounded-3xl p-8 shadow-xl",children:[s.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-6",children:"要件詳細"}),(0,s.jsxs)("div",{className:"space-y-6",children:[a.deliverables&&(0,s.jsxs)("div",{children:[s.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"成果物・納品物"}),s.jsx("p",{className:"text-gray-700",children:a.deliverables})]}),a.requirements&&(0,s.jsxs)("div",{children:[s.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"要求事項"}),s.jsx("p",{className:"text-gray-700",children:a.requirements})]}),a.additionalInfo&&(0,s.jsxs)("div",{children:[s.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"その他の情報"}),s.jsx("p",{className:"text-gray-700",children:a.additionalInfo})]})]})]})]}),"applications"===u&&(0,s.jsxs)(i.motion.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5},className:"bg-white/80 backdrop-blur-xl border border-gray-200 rounded-3xl p-8 shadow-xl",children:[s.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-6",children:"応募一覧"}),0===a.applications.length?(0,s.jsxs)("div",{className:"text-center py-12",children:[s.jsx("div",{className:"text-6xl mb-4",children:"\uD83D\uDCED"}),s.jsx("h4",{className:"text-xl font-bold text-gray-900 mb-2",children:"まだ応募がありません"}),s.jsx("p",{className:"text-gray-600",children:"インフルエンサーからの応募をお待ちください。"})]}):s.jsx("div",{className:"space-y-6",children:a.applications.map((e,t)=>(0,s.jsxs)(i.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1*t},className:"bg-gray-50 rounded-2xl p-6",children:[(0,s.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between mb-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-white font-bold",children:e.influencer.displayName.charAt(0)})}),(0,s.jsxs)("div",{children:[s.jsx("h4",{className:"text-lg font-bold text-gray-900",children:e.influencer.displayName}),s.jsx("p",{className:"text-gray-600",children:e.influencer.prefecture})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-4 mt-4 lg:mt-0",children:[(0,s.jsxs)("div",{className:"text-right",children:[s.jsx("div",{className:"text-lg font-bold text-green-600",children:v(e.proposedPrice)}),s.jsx("div",{className:"text-gray-500 text-sm",children:"提案料金"})]}),(0,s.jsxs)("div",{className:"flex space-x-2",children:[s.jsx(i.motion.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>f(e.id),className:"px-4 py-2 bg-green-500 text-white rounded-lg font-semibold hover:bg-green-600 transition-colors",children:"承諾"}),s.jsx(i.motion.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>y(e.id),className:"px-4 py-2 bg-red-500 text-white rounded-lg font-semibold hover:bg-red-600 transition-colors",children:"却下"})]})]})]}),s.jsx("div",{className:"mb-4",children:s.jsx("p",{className:"text-gray-700",children:e.influencer.bio})}),s.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:e.influencer.categories.map(e=>s.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-medium",children:e},e))}),(0,s.jsxs)("div",{className:"mb-4",children:[s.jsx("h5",{className:"font-semibold text-gray-900 mb-2",children:"メッセージ"}),s.jsx("p",{className:"text-gray-700 bg-white p-3 rounded-lg",children:e.message})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[s.jsx("div",{className:"flex space-x-4",children:e.influencer.socialAccounts.map(e=>(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:[D(e.platform)," ",S(e.followerCount)]}),(0,s.jsxs)("div",{className:"text-xs text-gray-500",children:[e.engagementRate,"%"]})]},e.platform))}),(0,s.jsxs)("div",{className:"text-sm text-gray-500",children:["応募日: ",w(e.appliedAt)]})]})]},e.id))})]})]})]})};a()}catch(e){a(e)}})},108:()=>{},2785:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},968:e=>{"use strict";e.exports=require("next/head")},6689:e=>{"use strict";e.exports=require("react")},6405:e=>{"use strict";e.exports=require("react-dom")},997:e=>{"use strict";e.exports=require("react/jsx-runtime")},2048:e=>{"use strict";e.exports=require("fs")},5315:e=>{"use strict";e.exports=require("path")},6162:e=>{"use strict";e.exports=require("stream")},1568:e=>{"use strict";e.exports=require("zlib")},9752:e=>{"use strict";e.exports=import("@tanstack/react-query")},9648:e=>{"use strict";e.exports=import("axios")},6197:e=>{"use strict";e.exports=import("framer-motion")}};var t=require("../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[899,132,163,664],()=>r(9097));module.exports=a})();